import{_,c_ as b,B as f,cV as g,p as j,ak as w,a8 as k,r as n,o as a,c as r,b as i,t as h,d as s,h as y,w as P,e as E,F as C}from"../../assets/app-8df99815.js";import{P as S}from"./PostContent-93850f8e.js";const v={components:{EmojiPicker:b,BaseButton:f,PostContent:S,Mentionable:g},inject:{dialogRef:{default:null}},data(){return{loading:!1,type:this.dialogRef.data.type,subject:this.dialogRef.data.subject,share_content:""}},mounted(){this.$refs.mention.addContent("")},methods:{...j(w,["postNewFeed"]),addEmoji(e){this.$refs.mention.addContent(e)},async shareToProfile(){this.loading=!0;try{let e;this.type==="posts"?e={type:"share",content:this.share_content,parent_id:this.subject.parent?this.subject.parent.id:this.subject.id}:e={type:"share_item",subject_type:this.type,subject_id:this.subject.id,content:this.share_content},await this.postNewFeed(e),this.dialogRef.close(),this.showSuccess(this.$t("Shared Successfully.")),this.loading=!1}catch(e){e.error.code==k.RESPONSE_CODE_MEMBERSHIP_PERMISSION?this.showPermissionPopup("post",e.error.message):this.showError(e.error),this.loading=!1}}}},B={class:"mb-base-2"},M={class:"relative bg-input-background-color text-input-text-color border border-input-border-color rounded-base-lg mb-base-2 pt-2 px-base-2 pb-8 dark:bg-slate-800 dark:text-white dark:border-white/10"},x={class:"absolute bottom-2 start-2 leading-none"},N={key:0,class:"bg-white border border-divider rounded-none md:rounded-base-lg mb-base-2 dark:bg-slate-800 dark:border-white/10"},V={key:0,class:"feed-entry-wrap"},R={key:1,class:"feed-entry-wrap"},A={class:"text-end"};function F(e,o,T,I,t,d){const p=n("Mentionable"),u=n("EmojiPicker"),c=n("PostContent"),m=n("BaseButton");return a(),r(C,null,[i("div",B,h(e.$t("Message")),1),i("div",M,[s(p,{modelValue:t.share_content,"onUpdate:modelValue":o[0]||(o[0]=l=>t.share_content=l),ref:"mention",rows:4,className:"max-h-28"},null,8,["modelValue"]),i("div",x,[s(u,{onEmoji_click:d.addEmoji},null,8,["onEmoji_click"])])]),t.type==="posts"?(a(),r("div",N,[t.subject.parent?(a(),r("div",V,[s(c,{post:t.subject.parent,showCommentAction:!1,showMenuAction:!1},null,8,["post"])])):(a(),r("div",R,[s(c,{post:t.subject,showCommentAction:!1,showMenuAction:!1},null,8,["post"])]))])):y("",!0),i("div",A,[s(m,{onClick:o[1]||(o[1]=l=>d.shareToProfile()),loading:t.loading},{default:P(()=>[E(h(e.$t("Share")),1)]),_:1},8,["loading"])])],64)}const H=_(v,[["render",F]]);export{H as default};
