import{_ as C,a as I,s as L,r as p,o,c as b,aC as V,h as a,g as r,b as g,t as S}from"../../assets/app-8df99815.js";function _(){return window.axios.get("/country/get").then(e=>e.data.data)}function B(e){return window.axios.get(`/country/get_state/${e}`).then(t=>t.data.data)}function w(e){return window.axios.get(`/country/get_city/${e}`).then(t=>t.data.data)}const z={components:{BaseSelect:I,BaseInputText:L},props:{modelValue:{type:Object,default:null},showAddress:{type:Boolean,default:!0},showLabel:{type:Boolean,default:!0},error:{type:Object,default:null},disabled:{type:Boolean,default:!1}},data(){var e,t,i,d,s;return{countriesList:[],statesList:[],citiesList:[],selectedCountryId:(e=this.modelValue)==null?void 0:e.country_id,selectedStateId:(t=this.modelValue)==null?void 0:t.state_id,selectedCityId:(i=this.modelValue)==null?void 0:i.city_id,zipCode:(d=this.modelValue)==null?void 0:d.zip_code,address:(s=this.modelValue)==null?void 0:s.address}},mounted(){this.getCountriesList(),this.selectedCountryId&&this.getStatesListByCountryId(this.selectedCountryId),this.selectedStateId&&this.getCitesListByStateId(this.selectedStateId)},computed:{locationInfo(){return{country_id:this.selectedCountryId,state_id:this.selectedStateId,city_id:this.selectedCityId,zip_code:this.zipCode,address:this.address,address_full:this.getFullAddress()}}},watch:{selectedCountryId(){this.getStatesListByCountryId(this.selectedCountryId).then(()=>{this.selectedStateId=null,this.selectedCityId=null}),this.$emit("update:modelValue",this.locationInfo)},selectedStateId(){this.selectedCityId=null,this.selectedStateId?this.getCitesListByStateId(this.selectedStateId):this.citiesList=[],this.$emit("update:modelValue",this.locationInfo)},selectedCityId(){this.selectedCityId&&this.$emit("update:modelValue",this.locationInfo)},zipCode(){this.$emit("update:modelValue",this.locationInfo)},address(){this.$emit("update:modelValue",this.locationInfo)}},methods:{async getCountriesList(){try{const e=await _();this.countriesList=[{id:0,name:this.$t("Country")},...e]}catch(e){console.log(e)}},async getStatesListByCountryId(e){if(this.statesList={id:0,name:this.$t("State")},e)try{const t=await B(e);this.statesList=[this.statesList,...t]}catch(t){console.log(t)}},async getCitesListByStateId(e){if(this.citiesList={id:0,name:this.$t("City")},e)try{const t=await w(e);this.citiesList=[this.citiesList,...t]}catch(t){console.log(t)}},getFullAddress(){var e,t,i;if(this.address_full=this.address?this.address:"",this.selectedCityId){let d=(e=window._.find(this.citiesList,{id:this.selectedCityId}))==null?void 0:e.name;d&&(this.address_full+=this.address_full?", "+d:d)}if(this.selectedStateId){let d=(t=window._.find(this.statesList,{id:this.selectedStateId}))==null?void 0:t.name;d&&(this.address_full+=this.address_full?", "+d:d)}if(this.zipCode&&(this.address_full+=this.address_full?", "+this.zipCode:this.zipCode),this.selectedCountryId){let d=(i=window._.find(this.countriesList,{id:this.selectedCountryId}))==null?void 0:i.name;d&&(this.address_full+=this.address_full?", "+d:d)}return this.address_full}},emits:["update:modelValue"]},k={class:"block mb-1"};function A(e,t,i,d,s,U){var c,h,y,m,f;const n=p("BaseSelect"),u=p("BaseInputText");return o(),b("div",null,[s.countriesList.length>1&&i.showLabel?V(e.$slots,"default",{key:0},()=>[g("label",k,S(e.$t("Location")),1)]):a("",!0),s.countriesList.length>1?(o(),r(n,{key:1,class:"mb-base-2",modelValue:s.selectedCountryId,"onUpdate:modelValue":t[0]||(t[0]=l=>s.selectedCountryId=l),error:(c=i.error)==null?void 0:c.country_id,options:s.countriesList,optionLabel:"name",optionValue:"id",placeholder:e.$t("Country"),disabled:i.disabled},null,8,["modelValue","error","options","placeholder","disabled"])):a("",!0),s.statesList.length>1?(o(),r(n,{key:2,class:"mb-base-2",modelValue:s.selectedStateId,"onUpdate:modelValue":t[1]||(t[1]=l=>s.selectedStateId=l),error:(h=i.error)==null?void 0:h.state_id,options:s.statesList,optionLabel:"name",optionValue:"id",placeholder:e.$t("State"),disabled:i.disabled},null,8,["modelValue","error","options","placeholder","disabled"])):a("",!0),s.citiesList.length>1?(o(),r(n,{key:3,class:"mb-base-2",modelValue:s.selectedCityId,"onUpdate:modelValue":t[2]||(t[2]=l=>s.selectedCityId=l),error:(y=i.error)==null?void 0:y.city_id,options:s.citiesList,optionLabel:"name",optionValue:"id",placeholder:e.$t("City"),disabled:i.disabled},null,8,["modelValue","error","options","placeholder","disabled"])):a("",!0),s.selectedCountryId?(o(),r(u,{key:4,class:"mb-base-2",modelValue:s.zipCode,"onUpdate:modelValue":t[3]||(t[3]=l=>s.zipCode=l),error:(m=i.error)==null?void 0:m.zip_code,placeholder:e.$t("Zip Code"),disabled:i.disabled},null,8,["modelValue","error","placeholder","disabled"])):a("",!0),i.showAddress?(o(),r(u,{key:5,modelValue:s.address,"onUpdate:modelValue":t[4]||(t[4]=l=>s.address=l),error:(f=i.error)==null?void 0:f.address,placeholder:e.$t("Address"),disabled:i.disabled},null,8,["modelValue","error","placeholder","disabled"])):a("",!0)])}const j=C(z,[["render",A]]);export{j as B};
