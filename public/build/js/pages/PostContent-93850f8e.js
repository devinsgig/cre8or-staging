import{b2 as j,b3 as I,j as U,a7 as O,b1 as E,b0 as N,B as z,bP as T,m as C,p as v,bG as q,ad as k,bH as H,bI as R,bQ as V,bJ as G,_ as D,y as F,u as Q,ak as J,V as K,r as m,o as n,c as d,b as o,d as l,F as x,t as i,h as r,w as b,e as h,g as p,Q as f}from"../../assets/app-8df99815.js";const W={components:{ContentHtml:j,PostContentType:I,BaseIcon:U,Error:O,UserName:E,Avatar:N,BaseButton:z,GroupName:T},props:{post:{type:Object,default:null},showCommentAction:{type:Boolean,default:!0},showMenuAction:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!1}},data(){return{loadingLike:!1,loadingUnlike:!1,loadingBookmark:!1,loadingUnbookmark:!1}},computed:{...C(F,["authenticated","user"]),...C(Q,["config","setOpenedModalCount"]),postActionItemClass(){return"feed-main-action-item flex-1 flex gap-2 items-center justify-center px-2 py-base-1 rounded-md transition hover:bg-light-web-wash dark:hover:bg-dark-web-wash"}},methods:{...v(J,["toggleLikePostItem","toggleBookmarkPostItem"]),...v(K,["setSelectedPage"]),async likePost(t){if(this.authenticated){if(this.loadingLike)return;this.loadingLike=!0;try{await this.toggleLikePostItem({subject_type:"posts",subject_id:t,action:"add"}),this.$refs.likeButton.classList.add("active")}catch(s){this.showError(s.error)}finally{this.loadingLike=!1}}else this.showRequireLogin()},async unLikePost(t){if(!this.loadingUnlike){this.loadingUnlike=!0;try{await this.toggleLikePostItem({subject_type:"posts",subject_id:t,action:"remove"}),this.$refs.likeButton.classList.remove("active")}catch(s){this.showError(s.error)}finally{this.loadingUnlike=!1}}},async bookmarkPost(t){if(this.authenticated){if(this.loadingBookmark)return;this.loadingBookmark=!0;try{await this.toggleBookmarkPostItem({subject_type:"posts",subject_id:t,action:"add"}),this.$refs.bookmarkButton.classList.add("active")}catch(s){this.showError(s.error)}finally{this.loadingBookmark=!1}}else this.showRequireLogin()},async unBookmarkPost(t){if(!this.loadingUnbookmark){this.loadingUnbookmark=!0;try{await this.toggleBookmarkPostItem({subject_type:"posts",subject_id:t,action:"remove"}),this.$refs.bookmarkButton.classList.remove("active")}catch(s){this.showError(s.error)}finally{this.loadingUnbookmark=!1}}},openLikersModal(t,s){this.$dialog.open(q,{data:{itemType:t,itemId:s},props:{header:this.$t("Likes"),class:"likers-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{k()}})},openShareModal(t,s){this.authenticated?(this.setOpenedModalCount(),this.$dialog.open(H,{data:{subjectType:t,subject:s},props:{showHeader:!1,class:"dropdown-menu-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{k(),this.setOpenedModalCount(!1)}})):this.showRequireLogin()},openDropdownMenu(){this.setOpenedModalCount(),this.$dialog.open(R,{data:{post:this.post},props:{showHeader:!1,class:"dropdown-menu-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{k(),this.setOpenedModalCount(!1)}})},handleCommentClick(){this.authenticated?this.$emit("comment_click"):this.showRequireLogin()},boostPost(){this.user.id==this.post.user.id?this.$router.push({name:"advertising_boost_post",params:{id:this.post.id}}):(this.setSelectedPage(this.post.user),setTimeout(async()=>{try{await V(this.post.user.id);let t=this.$router.resolve({name:"advertising_boost_post",params:{id:this.post.id}});window.location.href=window.siteConfig.siteUrl+t.fullPath}catch(t){this.showError(t.error),this.setSelectedPage(null)}},1500))},handleCommentCountClick(){this.authenticated?this.$emit("comment_count_click"):this.showRequireLogin()},handleOpenPostAnalytics(){this.authenticated?(this.setOpenedModalCount(),this.$dialog.open(G,{data:{post:this.post},props:{header:this.$t("Post Analytics"),modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{k(),this.setOpenedModalCount(!1)}})):this.showRequireLogin()}},emits:["comment_click","comment_count_click"]},X={key:0},Y={class:"feed-item-header flex pt-base-2 px-base-2 md:pt-4 md:px-4 mb-base-2"},Z={class:"feed-item-header-img"},$={class:"feed-item-header-info flex-grow ps-base-2"},ee={class:"feed-item-header-info-title flex justify-between items-start gap-base-2"},te={class:"whitespace-normal"},se={class:"feed-item-header-info-date flex flex-wrap gap-x-base-1 gap-y-1 items-center text-sub-color text-xs dark:text-slate-400"},oe={key:0},ae={key:1,class:"feed-item-header-info-ads-badge bg-web-wash text-main-color leading-none px-base-1 py-1 rounded-md dark:bg-dark-web-wash dark:text-slate-400"},ie={key:2,class:"feed-item-header-info-label-badge bg-badge-color text-primary-color leading-none px-base-1 py-1 rounded-md dark:bg-dark-web-wash dark:text-white"},ne={key:3,class:"feed-item-header-info-pinned-badge bg-badge-color text-main-color leading-none px-base-1 py-1 rounded-md dark:bg-dark-web-wash dark:text-white"},le={class:"feed-item-content"},re={class:"activity_feed_content_item"},de={key:0,class:"flex flex-col gap-base-2 px-base-2 md:px-4 mt-base-2 dark:text-white"},me={class:"flex flex-wrap gap-x-base-2 gap-y-base-1 items-center"},ce={class:"feed-item-like flex-1 whitespace-nowrap"},ue={class:"flex gap-base-1"},he={class:"feed-main-action flex gap-base-2 justify-between py-base-1 border-t border-divider dark:border-white/10"},ke={class:"hidden md:block"},be={class:"hidden md:block"},fe={class:"hidden md:block"},pe={class:"hidden md:block"};function ge(t,s,e,_e,ye,a){var y,w;const P=m("Avatar"),g=m("UserName"),u=m("BaseIcon"),B=m("GroupName"),L=m("router-link"),M=m("ContentHtml"),S=m("PostContentType"),_=m("BaseButton"),A=m("Error");return e.post?(n(),d("div",X,[o("div",Y,[o("div",Z,[l(P,{user:e.post.user},null,8,["user"])]),o("div",$,[o("div",ee,[o("div",te,[l(g,{user:e.post.user,truncate:!1},null,8,["user"]),e.post.type==="user_page_review"?(n(),d(x,{key:0},[o("span",null,i(" "+((y=e.post.items[0].subject)!=null&&y.is_recommend?t.$t("recommended"):t.$t("doesn't recommend"))+" "),1),l(g,{user:(w=e.post.items[0].subject)==null?void 0:w.page,truncate:!1},null,8,["user"])],64)):r("",!0),e.post.source&&!e.post.inSource?(n(),d(x,{key:1},[l(u,{name:"caret_right",size:"16",class:"mx-base-1 h-5"}),l(u,{name:"user_group",size:"16",class:"me-base-1 h-5"}),l(B,{group:e.post.source,class:"break-word"},null,8,["group"])],64)):r("",!0)]),e.showMenuAction&&t.authenticated?(n(),d("button",{key:0,onClick:s[0]||(s[0]=c=>a.openDropdownMenu())},[l(u,{size:"20",name:"more_horiz_outlined",class:"feed-item-dropdown text-sub-color dark:text-slate-400"})])):r("",!0)]),o("div",se,[e.post.type_label?(n(),d("span",oe,i(e.post.type_label)+" - ",1)):r("",!0),l(L,{to:{name:"post",params:{id:e.post.id}},class:"text-inherit"},{default:b(()=>[h(i(e.post.created_at),1)]),_:1},8,["to"]),e.post.is_ads?(n(),d("span",ae,i(t.$t("Sponsored")),1)):r("",!0),e.post.type_box_label?(n(),d("span",ie,i(e.post.type_box_label),1)):r("",!0),e.post.is_pin?(n(),d("span",ne,i(t.$t("Pinned")),1)):r("",!0)])])]),o("div",le,[l(M,{class:"activity_feed_content_message px-base-2 md:px-4 mb-base-2",content:e.post.content,mentions:e.post.mentions},null,8,["content","mentions"]),o("div",re,[l(S,{post:e.post,"auto-play":e.autoPlay},null,8,["post","auto-play"])])]),e.showCommentAction?(n(),d("div",de,[o("div",me,[o("div",ce,[o("button",{class:"feed-item-like-text inline-block text-main-color dark:text-white",onClick:s[1]||(s[1]=c=>a.openLikersModal("posts",e.post.id))},i(t.$filters.numberShortener(e.post.like_count,t.$t("[number] like"),t.$t("[number] likes"))),1),s[9]||(s[9]=h(" · ")),o("button",{class:"feed-item-like-text inline-block text-main-color dark:text-white",onClick:s[2]||(s[2]=c=>a.handleCommentCountClick())},i(t.$filters.numberShortener(e.post.comment_count,t.$t("[number] comment"),t.$t("[number] comments"))),1),s[10]||(s[10]=h(" · ")),o("button",{class:"feed-item-like-text inline-block text-main-color dark:text-white",onClick:s[3]||(s[3]=c=>a.handleOpenPostAnalytics())},i(t.$filters.numberShortener(e.post.view_count,t.$t("[number] view"),t.$t("[number] views"))),1)]),o("div",ue,[e.post.canShareEarn?(n(),p(_,{key:0,onClick:s[4]||(s[4]=c=>a.openShareModal("posts",e.post)),size:"xs"},{default:b(()=>[h(i(t.$t("Share to Earn")),1)]),_:1})):r("",!0),e.post.canBoot?(n(),p(_,{key:1,onClick:a.boostPost,size:"xs"},{default:b(()=>[h(i(t.$t("Boost Post")),1)]),_:1},8,["onClick"])):r("",!0)])]),o("div",he,[o("button",{ref:"likeButton",class:f(["feed-main-action-like",e.post.is_liked?"text-base-red is-liked":"",a.postActionItemClass]),onClick:s[5]||(s[5]=c=>e.post.is_liked?a.unLikePost(e.post.id):a.likePost(e.post.id))},[l(u,{name:e.post.is_liked?"heart_fill":"heart"},null,8,["name"]),o("div",ke,i(t.$t("Like")),1)],2),e.post.canComment?(n(),d("button",{key:0,onClick:s[6]||(s[6]=c=>a.handleCommentClick()),class:f(a.postActionItemClass)},[l(u,{name:"comment"}),o("div",be,i(t.$t("Comment")),1)],2)):r("",!0),e.post.canShare?(n(),d("button",{key:1,onClick:s[7]||(s[7]=c=>a.openShareModal("posts",e.post)),class:f(a.postActionItemClass)},[l(u,{name:"share"}),o("div",fe,i(t.$t("Share")),1)],2)):r("",!0),o("button",{ref:"bookmarkButton",class:f(["feed-main-action-bookmark",e.post.is_bookmarked?"text-primary-color dark:text-dark-primary-color is-bookmarked":"",a.postActionItemClass]),onClick:s[8]||(s[8]=c=>e.post.is_bookmarked?a.unBookmarkPost(e.post.id):a.bookmarkPost(e.post.id))},[l(u,{name:e.post.is_bookmarked?"bookmark_fill":"bookmarks"},null,8,["name"]),o("div",pe,i(t.$t("Bookmark")),1)],2)])])):r("",!0)])):(n(),p(A,{key:1,class:"mb-0"},{default:b(()=>[h(i(t.$t("Post is not found")),1)]),_:1}))}const Ce=D(W,[["render",ge]]);export{Ce as P};
