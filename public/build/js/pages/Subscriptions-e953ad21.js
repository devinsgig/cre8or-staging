import{g as y,a as L}from"./subscription-dccd4f39.js";import{_ as w,L as v,B as k,a as V,r as p,o as a,c as n,b as t,d as c,w as h,$ as B,t as r,F as b,f as x,h as C,e as m}from"../../assets/app-8df99815.js";const N={components:{Loading:v,BaseButton:k,BaseSelect:V},data(){return{loadingSubscription:!0,loadmoreSubscription:!1,subscriptionsList:[],type:"all",currentPage:1,selectedStatus:"all",statusList:[{name:this.$t("All"),value:"all"},{name:this.$t("Active"),value:"active"},{name:this.$t("Cancel"),value:"cancel"},{name:this.$t("Stop"),value:"stop"}],typesList:[],loadingSearch:!1}},mounted(){this.getConfig(),this.getSubscriptionsList(this.type,this.selectedStatus,this.currentPage)},methods:{async getConfig(){try{const e=await y();this.typesList=window._.map(e.types,function(o,d){return{value:d,name:o}})}catch(e){this.showError(e)}},async getSubscriptionsList(e,o,d){try{const l=await L(e,o,d);d===1?this.subscriptionsList=l.items:this.subscriptionsList=window._.concat(this.subscriptionsList,l.items),l.has_next_page?(this.loadmoreSubscription=!0,this.currentPage++):this.loadmoreSubscription=!1}catch(l){this.showError(l.error)}finally{this.loadingSubscription=!1,this.loadingSearch=!1}},filterSubscriptionsList(){this.loadingSubscription=!0,this.loadmoreSubscription=!1,this.currentPage=1,this.loadingSearch=!0,this.getSubscriptionsList(this.type,this.selectedStatus,this.currentPage)}}},P={class:"flex-1"},A={class:"flex-1"},E={class:"relative overflow-x-auto scrollbar-thin border border-b-0 border-table-border-color md:rounded-md dark:border-white/10"},U={class:"w-full text-sm whitespace-nowrap text-start"},$={class:"text-xs uppercase bg-table-header-color dark:bg-dark-web-wash"},F={scope:"col",class:"p-3"},T={scope:"col",class:"p-3"},D={scope:"col",class:"p-3"},M={scope:"col",class:"p-3"},j={key:0},q={colspan:"5"},z={class:"p-3"},G={class:"p-3"},H={class:"p-3"},I={class:"p-3"},J={key:1,class:"border-b border-table-border-color dark:border-gray-700"},K={colspan:"5",class:"text-center p-3"},O={key:0,class:"text-center my-base-2"};function Q(e,o,d,l,s,u){const g=p("BaseSelect"),_=p("BaseButton"),S=p("Loading"),f=p("router-link");return a(),n(b,null,[t("form",{class:"flex flex-wrap gap-base-2 mb-base-2",onSubmit:o[2]||(o[2]=B((...i)=>u.filterSubscriptionsList&&u.filterSubscriptionsList(...i),["prevent"]))},[t("div",P,[c(g,{modelValue:s.type,"onUpdate:modelValue":o[0]||(o[0]=i=>s.type=i),options:s.typesList,optionLabel:"name",optionValue:"value",placeholder:e.$t("Type")},null,8,["modelValue","options","placeholder"])]),t("div",A,[c(g,{modelValue:s.selectedStatus,"onUpdate:modelValue":o[1]||(o[1]=i=>s.selectedStatus=i),options:s.statusList,optionLabel:"name",optionValue:"value",placeholder:e.$t("Status")},null,8,["modelValue","options","placeholder"])]),c(_,{loading:s.loadingSearch,class:"self-end w-full md:w-auto"},{default:h(()=>[m(r(e.$t("Search")),1)]),_:1},8,["loading"])],32),t("div",E,[t("table",U,[t("thead",$,[t("tr",null,[t("th",F,r(e.$t("Subscription")),1),t("th",T,r(e.$t("Status")),1),t("th",D,r(e.$t("Next payment")),1),t("th",M,r(e.$t("Action")),1)])]),t("tbody",null,[s.loadingSubscription?(a(),n("tr",j,[t("td",q,[c(S,{class:"mt-base-2"})])])):(a(),n(b,{key:1},[s.subscriptionsList.length?(a(!0),n(b,{key:0},x(s.subscriptionsList,i=>(a(),n("tr",{key:i.id,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b border-table-border-color dark:border-gray-700"},[t("td",z,r(i.name),1),t("td",G,r(i.status_text),1),t("td",H,r(i.next_payment),1),t("td",I,[c(f,{to:{name:"setting_subscription_detail",params:{id:i.id}}},{default:h(()=>[m(r(e.$t("View")),1)]),_:2},1032,["to"])])]))),128)):(a(),n("tr",J,[t("td",K,r(e.$t("No Subscriptions")),1)]))],64))])])]),s.loadmoreSubscription?(a(),n("div",O,[c(_,{onClick:o[3]||(o[3]=i=>u.getSubscriptionsList(s.type,s.selectedStatus,s.currentPage))},{default:h(()=>[m(r(e.$t("View more")),1)]),_:1})])):C("",!0)],64)}const X=w(N,[["render",Q]]);export{X as default};
