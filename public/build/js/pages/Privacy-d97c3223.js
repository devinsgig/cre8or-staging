import{B as y}from"./BaseSwitch-3591db5b.js";import{_,L as w,a as x,B,cm as S,cn as V,r as n,o,g as b,c as u,b as s,t as i,d as r,F as L,f as P,w as k,$ as E,e as N}from"../../assets/app-8df99815.js";const U={components:{BaseSwitch:y,Loading:w,BaseSelect:x,BaseButton:B},mounted(){this.getPrivacySettings(),this.privacyLists=[{value:1,name:this.$t("Everyone")},{value:2,name:this.$t("My followers")},{value:3,name:this.$t("Only me")}],this.chatPrivacyLists=[{value:1,name:this.$t("Everyone")},{value:2,name:this.$t("My followers")},{value:3,name:this.$t("No One")}]},data(){return{loading_status:!0,settings:[],privacy:1,privacyLists:null,chat_privacy:1,chatPrivacyLists:null,success:null,error:null,loading:!1}},methods:{labelText(t){switch(t){case"show_following":return this.$t("View my followings");case"show_follower":return this.$t("View my followers");default:return null}},async getPrivacySettings(){try{const t=await S();return this.privacy=t.privacy,this.chat_privacy=t.chat_privacy,this.settings=window._.map(t.settings,function(e,d){return{name:d,value:e}}),this.loading_status=!1,t}catch{this.loading_status=!1}},async saveSetting(){if(!this.loading){this.loading=!0;try{var t={privacy:this.privacy,chat_privacy:this.chat_privacy};window._.forEach(this.settings,function(e){t[e.name]=e.value}),await V(t),this.showSuccess(this.$t("Your changes have been saved."))}catch(e){this.showError(e.error)}finally{this.loading=!1}}}}},M={class:"flex flex-wrap gap-x-6 mb-3"},T={class:"md:flex-1 md:text-end w-full mb-1"},$={class:"md:flex-2 w-full"},C={class:"flex flex-wrap gap-x-6 mb-3"},F={class:"md:flex-1 md:text-end w-full mb-1"},O={class:"md:flex-2 w-full"},W={class:"flex-2 sm:flex-1 md:text-end w-full mb-1"},D={class:"flex-1 sm:flex-2 w-full"},Y={class:"flex flex-wrap gap-x-5"},j={class:"md:flex-2 w-full"};function q(t,e,d,z,a,c){const h=n("Loading"),m=n("BaseSelect"),f=n("BaseSwitch"),p=n("BaseButton");return a.loading_status?(o(),b(h,{key:0})):(o(),u("form",{key:1,onSubmit:e[2]||(e[2]=E((...l)=>c.saveSetting&&c.saveSetting(...l),["prevent"]))},[s("div",M,[s("div",T,[s("label",null,i(t.$t("Who can see your posts and other account information")),1)]),s("div",$,[r(m,{modelValue:a.privacy,"onUpdate:modelValue":e[0]||(e[0]=l=>a.privacy=l),options:a.privacyLists,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])]),s("div",C,[s("div",F,[s("label",null,i(t.$t("Who can send you a message")),1)]),s("div",O,[r(m,{modelValue:a.chat_privacy,"onUpdate:modelValue":e[1]||(e[1]=l=>a.chat_privacy=l),options:a.chatPrivacyLists,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])]),(o(!0),u(L,null,P(a.settings,(l,v)=>(o(),u("div",{key:l.name,class:"flex flex-wrap gap-x-6 mb-3"},[s("div",W,[s("label",null,i(c.labelText(l.name)),1)]),s("div",D,[r(f,{modelValue:a.settings[v].value,"onUpdate:modelValue":g=>a.settings[v].value=g},null,8,["modelValue","onUpdate:modelValue"])])]))),128)),s("div",Y,[e[3]||(e[3]=s("div",{class:"md:flex-1 md:text-end w-full"},null,-1)),s("div",j,[r(p,{loading:a.loading,class:"w-full"},{default:k(()=>[N(i(t.$t("Save")),1)]),_:1},8,["loading"])])])],32))}const H=_(U,[["render",q]]);export{H as default};
