import{_ as g,L as y,B as k,cD as w,cE as S,cC as f,cB as B,r as d,o,c,g as C,h,b as s,t as r,d as u,F as b,f as D,w as T,e as L}from"../../assets/app-8df99815.js";import{C as v}from"./CurrentPlan-7a657346.js";const x={props:["id"],components:{Loading:y,BaseButton:k,CurrentPlan:v},data(){return{subscriptionDetail:null,loadingTransaction:!0,loadmoreTransaction:!1,transactionsList:[],currentPage:1}},mounted(){this.getSubscriberDetail(this.id),this.getSubscriptionTransactions(this.id,this.currentPage)},methods:{async getSubscriberDetail(t){try{const e=await w(t);this.subscriptionDetail=e}catch(e){this.showError(e.error)}},async getSubscriptionTransactions(t,e){try{const a=await S(t,e);e===1?this.transactionsList=a.items:this.transactionsList=window._.concat(this.transactionsList,a.items),a.has_next_page?(this.loadmoreTransaction=!0,this.currentPage++):this.loadmoreTransaction=!1,this.loadingTransaction=!1}catch(a){this.showError(a.error)}},async handleCancelSubscriber(t){try{await f(t),this.getSubscriberDetail(t)}catch(e){this.showError(e.error)}},async handleResumeSubscriber(t){try{await B(t),this.getSubscriberDetail(t)}catch(e){this.showError(e.error)}},handleBack(){this.$router.push({name:"setting_creator_dashboard",params:{tab:"subscribers"}})}}},P={class:"mb-base-2 font-bold"},E={class:"relative overflow-x-auto scrollbar-thin border border-b-0 border-table-border-color md:rounded-md dark:border-white/10"},N={class:"w-full text-sm whitespace-nowrap text-center"},R={class:"text-xs uppercase bg-table-header-color dark:bg-dark-web-wash"},V={scope:"col",class:"p-3 text-start"},F={scope:"col",class:"p-3"},A={scope:"col",class:"p-3"},$={scope:"col",class:"p-3"},j={key:0},q={colspan:"4"},z={class:"p-3 text-start"},G={class:"p-3"},H={class:"p-3"},J={class:"p-3"},K={key:1,class:"border-b border-table-border-color dark:border-gray-700"},M={colspan:"4",class:"p-3"},O={key:1,class:"text-center my-base-2"};function Q(t,e,a,U,n,l){const _=d("CurrentPlan"),p=d("Loading"),m=d("BaseButton");return o(),c(b,null,[n.subscriptionDetail?(o(),C(_,{key:0,subscription:n.subscriptionDetail,onCancel:l.handleCancelSubscriber,onResume:l.handleResumeSubscriber,onBack:l.handleBack,class:"mb-base-2"},null,8,["subscription","onCancel","onResume","onBack"])):h("",!0),s("div",P,r(t.$t("Payment history")),1),s("div",E,[s("table",N,[s("thead",R,[s("tr",null,[s("th",V,r(t.$t("Date")),1),s("th",F,r(t.$t("Status")),1),s("th",A,r(t.$t("Transaction ID")),1),s("th",$,r(t.$t("Amount")),1)])]),s("tbody",null,[n.loadingTransaction?(o(),c("tr",j,[s("td",q,[u(p,{class:"mt-base-2"})])])):(o(),c(b,{key:1},[n.transactionsList.length?(o(!0),c(b,{key:0},D(n.transactionsList,i=>(o(),c("tr",{key:i.id,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b border-table-border-color dark:border-gray-700"},[s("td",z,r(i.date),1),s("td",G,r(i.status_text),1),s("td",H,r(i.transaction_id),1),s("td",J,r(i.price),1)]))),128)):(o(),c("tr",K,[s("td",M,r(t.$t("No Transactions")),1)]))],64))])])]),n.loadmoreTransaction?(o(),c("div",O,[u(m,{onClick:e[0]||(e[0]=i=>l.getSubscriptionTransactions(a.id,n.currentPage))},{default:T(()=>[L(r(t.$t("View more")),1)]),_:1})])):h("",!0)],64)}const Y=g(x,[["render",Q]]);export{Y as default};
