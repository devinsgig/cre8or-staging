import{_ as m,B as b,an as f,ao as w,bk as S,bl as y,W as _,bm as j,bn as B,ad as l,r as a,o as U,c as M,b as n,t as u,d as i,w as c,e as k,bo as $,bp as C,bq as T}from"../../assets/app-8df99815.js";const I={components:{BaseButton:b,BaseSuggest:f,AutoSuggestUserItem:w},data(){var s,e;return{disableAutoComplete:!1,userMentionList:null,selectedUser:null,fundAmount:null,onlySearchUser:!0,notSearchMyself:!0,subjectType:(s=this.dialogRef.data)==null?void 0:s.subject_type,subject:(e=this.dialogRef.data)==null?void 0:e.subject}},inject:["dialogRef"],methods:{async suggestUsersMention(s){try{let e;switch(this.subjectType){case"group":e=await y(this.subject.id,s.query);break;default:e=await S(s.query);break}this.userMentionList=e}catch{this.userMentionList=[]}},async handleClickAddModerator(){const s=this.$dialog.open(_,{props:{header:this.$t("Enter Password"),class:"password-modal",modal:!0,dismissableMask:!0,draggable:!1},emits:{onConfirm:async e=>{if(e.password)try{let t;switch(this.subjectType){case"group":t=await B({id:this.subject.id,user_id:this.selectedUser[0].id,password:e.password});break;default:t=await j({id:this.selectedUser[0].id,password:e.password});break}switch(this.dialogRef.close({adminInfo:t}),s.close(),l(),this.showSuccess(this.$t("Transfer Admin Successfully.")),this.subjectType){case"group":this.$router.push({name:"group_profile",params:{id:this.subject.id,slug:this.subject.slug}});break;default:window.location.href=window.siteConfig.siteUrl;break}}catch(t){this.showError(t.error),s.close(),l()}}}})}}},L={class:"mb-base-2"},V={class:"mb-1"};function P(s,e,t,A,r,d){const p=a("AutoSuggestUserItem"),g=a("BaseSuggest"),h=a("BaseButton");return U(),M("div",null,[n("div",L,[n("div",V,[n("label",null,u(s.$t("Username")),1)]),i(g,{modelValue:r.selectedUser,"onUpdate:modelValue":e[0]||(e[0]=o=>r.selectedUser=o),optionLabel:"name",suggestions:r.userMentionList,onComplete:d.suggestUsersMention,emptySearchMessage:s.$t("No users found")},{option:c(({option:o})=>[i(p,{user:o},null,8,["user"])]),_:1},8,["modelValue","suggestions","onComplete","emptySearchMessage"])]),i(h,{onClick:e[1]||(e[1]=o=>d.handleClickAddModerator()),class:"w-full"},{default:c(()=>[k(u(s.$t("Transfer")),1)]),_:1})])}const D=m(I,[["render",P]]),R={components:{BaseButton:b,AutoSuggestUserItem:w,BaseSuggest:f},data(){var s,e;return{userMentionList:null,selectedUser:[],fundAmount:null,subjectType:(s=this.dialogRef.data)==null?void 0:s.subject_type,subjectId:(e=this.dialogRef.data)==null?void 0:e.subject_id}},inject:["dialogRef"],methods:{async suggestUsersMention(s){try{let e;switch(this.subjectType){case"group":e=await y(this.subjectId,s.query);break;default:e=await $(s.query);break}this.userMentionList=e}catch{this.userMentionList=[]}},async handleClickAddModerator(){if(this.selectedUser.length===0){this.showError(this.$t("Please select user to add moderator."));return}const s=this.$dialog.open(_,{props:{header:this.$t("Enter Password"),class:"password-modal",modal:!0,dismissableMask:!0,draggable:!1},emits:{onConfirm:async e=>{if(e.password)try{let t;switch(this.subjectType){case"group":t=await T({id:this.subjectId,user_id:this.selectedUser[0].id,password:e.password});break;default:t=await C({id:this.selectedUser[0].id,password:e.password});break}this.showSuccess(this.$t("Add Moderator Successfully.")),s.close(),l(),this.dialogRef.close({adminInfo:t})}catch(t){this.showError(t.error),s.close(),l()}}}})}}},v={class:"mb-base-2"},E={class:"mb-1"};function q(s,e,t,A,r,d){const p=a("AutoSuggestUserItem"),g=a("BaseSuggest"),h=a("BaseButton");return U(),M("div",null,[n("div",v,[n("div",E,[n("label",null,u(s.$t("Username")),1)]),i(g,{modelValue:r.selectedUser,"onUpdate:modelValue":e[0]||(e[0]=o=>r.selectedUser=o),suggestions:r.userMentionList,optionLabel:"name",onComplete:d.suggestUsersMention,emptySearchMessage:s.$t("No users found")},{option:c(({option:o})=>[i(p,{user:o},null,8,["user"])]),_:1},8,["modelValue","suggestions","onComplete","emptySearchMessage"])]),i(h,{onClick:e[1]||(e[1]=o=>d.handleClickAddModerator()),class:"w-full"},{default:c(()=>[k(u(s.$t("Add")),1)]),_:1})])}const F=m(R,[["render",q]]);export{F as A,D as T};
