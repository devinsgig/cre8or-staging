import{_ as y,s as $,B,ap as S,r as h,o as n,c,b as s,t as r,d as u,w as L,e as k,$ as w,j as N,aq as U,ar as D,as as V,g as b,F as p,f as v,h as g}from"../../assets/app-8df99815.js";import j from"./ListListsDetail-f24ea0d7.js";import"./GroupMembersList-c38b600c.js";const E={inject:["dialogRef"],components:{BaseInputText:$,BaseButton:B},data(){var e,t;return{id:(e=this.dialogRef.data.item)==null?void 0:e.id,listName:(t=this.dialogRef.data.item)==null?void 0:t.name,loadingSave:!1,error:{name:null}}},methods:{async handleStoreUserList(){this.loadingSave=!0;try{const e=await S({id:this.id,name:this.listName});this.dialogRef.close({item:e})}catch(e){this.handleApiErrors(this.error,e)}finally{this.loadingSave=!1}}}},M={class:"mb-base-1"};function R(e,t,a,m,i,o){const _=h("BaseInputText"),f=h("BaseButton");return n(),c("form",{onSubmit:t[1]||(t[1]=w((...d)=>o.handleStoreUserList&&o.handleStoreUserList(...d),["prevent"])),class:"flex flex-col gap-base-2"},[s("div",null,[s("label",M,r(e.$t("List Name")),1),u(_,{modelValue:i.listName,"onUpdate:modelValue":t[0]||(t[0]=d=>i.listName=d),autofocus:"",error:i.error.name},null,8,["modelValue","error"])]),u(f,{class:"w-full",loading:i.loadingSave},{default:L(()=>[k(r(e.$t("Save")),1)]),_:1},8,["loading"])],32)}const F=y(E,[["render",R]]),I={components:{BaseIcon:N,BaseButton:B,ListListsDetail:j},data(){return{listCount:null,page:1,loadingLists:!0,listsList:[],hasMoreLists:!1,isListDetail:!1,selectedList:null}},computed:{defaultList(){return[{name:"following_count",title:this.$t("Following"),icon:"list_following",tab:"list_following"},{name:"follower_count",title:this.$t("Followers"),icon:"list_followers",tab:"list_follower"},{name:"block_count",title:this.$t("Blocking User"),icon:"list_blocking",tab:"list_block_member"},{name:"subscriber_count",title:this.$t("Subscribers"),icon:"user_circle_plus",tab:"list_subscriber"}]}},mounted(){this.getListCount(),this.getUserList(this.page)},methods:{async getListCount(){try{this.listCount=await U()}catch(e){this.showError(e.error)}},async getUserList(e){try{const t=await D(e);e===1&&(this.listsList=[]),this.listsList=window._.concat(this.listsList,t.items),t.has_next_page?(this.hasMoreLists=!0,this.page++):this.hasMoreLists=!1}catch(t){this.showError(t.error)}finally{this.loadingLists=!1}},handleCreateNewList(e){this.$dialog.open(F,{data:{item:e},props:{header:this.$t("Add New List"),modal:!0,dismissableMask:!0,draggable:!1},onClose:t=>{var m;const a=(m=t.data)==null?void 0:m.item;if(a){const i=this.listsList.findIndex(o=>o.id===a.id);i!==-1?this.listsList[i]=a:this.listsList.unshift(a)}}})},handleDeleteList(e){this.$confirm.require({message:this.$t("Are you sure you want to delete this list?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await V(e),this.listsList=this.listsList.filter(t=>t.id!==e),this.showSuccess(this.$t("Remove Successfully"))}catch(t){this.showError(t.error)}}})},handleSelectList(e){this.isListDetail=!0,this.selectedList=e},handleBack(e){this.isListDetail=!1,this.selectedList=null;const t=this.listsList.findIndex(a=>a.id===e.id);t!==-1&&(this.listsList[t].member_count=e.member_count)}}},T={class:"flex items-center justify-between gap-3 mb-5"},A={class:"text-2xl font-bold"},q={key:0,class:"flex flex-col gap-5 text-main-color dark:text-white"},z={class:"flex items-center justify-center bg-web-wash w-[50px] h-[50px] flex-shrink-0 rounded-full dark:bg-dark-web-wash"},O={class:"flex-1"},P={class:"text-sub-color dark:text-slate-400"},G={key:1,class:"flex flex-col gap-5 border-t mt-5 pt-5 border-divider dark:border-white/10"},H=["onClick"],J={class:"flex items-center justify-center bg-web-wash w-[50px] h-[50px] flex-shrink-0 rounded-full dark:bg-dark-web-wash"},K={class:"flex-1"},Q={class:"text-sub-color dark:text-slate-400"},W={class:"flex gap-2 items-center"},X=["onClick"],Y=["onClick"];function Z(e,t,a,m,i,o){const _=h("ListListsDetail"),f=h("BaseButton"),d=h("BaseIcon"),C=h("router-link");return i.isListDetail?(n(),b(_,{key:0,item:i.selectedList,onBack:o.handleBack},null,8,["item","onBack"])):(n(),c(p,{key:1},[s("div",T,[s("h2",A,r(e.$t("Lists")),1),u(f,{onClick:o.handleCreateNewList},{default:L(()=>[k(r(e.$t("Create New List")),1)]),_:1},8,["onClick"])]),i.listCount?(n(),c("div",q,[(n(!0),c(p,null,v(o.defaultList,l=>(n(),b(C,{key:l.name,class:"flex gap-base-2 items-center text-inherit",to:{name:l.tab}},{default:L(()=>[s("div",z,[u(d,{name:l.icon,size:"30"},null,8,["name"])]),s("div",O,[s("div",null,[s("b",null,r(l.title),1)]),s("div",P,r(e.$filters.numberShortener(i.listCount[l.name],e.$t("[number] member"),e.$t("[number] members"))),1)])]),_:2},1032,["to"]))),128))])):g("",!0),i.listsList.length?(n(),c("div",G,[(n(!0),c(p,null,v(i.listsList,l=>(n(),c("div",{key:l.id,class:"flex gap-base-2 items-center cursor-pointer text-main-color dark:text-white",onClick:x=>o.handleSelectList(l)},[s("div",J,[u(d,{name:"list_users",size:"30"})]),s("div",K,[s("div",null,[s("b",null,r(l.name),1)]),s("div",Q,r(e.$filters.numberShortener(l.member_count,e.$t("[number] member"),e.$t("[number] members"))),1)]),s("div",W,[s("button",{onClick:w(x=>o.handleCreateNewList(l),["stop"]),class:"text-primary-color dark:text-dark-primary-color p-2"},r(e.$t("Edit")),9,X),s("button",{onClick:w(x=>o.handleDeleteList(l.id),["stop"]),class:"text-base-red p-2"},r(e.$t("Delete")),9,Y)])],8,H))),128)),i.hasMoreLists?(n(),b(f,{key:0,onClick:t[0]||(t[0]=l=>o.getUserList(this.page))},{default:L(()=>[k(r(e.$t("View more")),1)]),_:1})):g("",!0)])):g("",!0)],64))}const ie=y(I,[["render",Z]]);export{ie as default};
