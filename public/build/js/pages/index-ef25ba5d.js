import{_ as d,j as w,B as b,a7 as T,L as S,T as v,a8 as B,m as l,y as I,u as k,l as C,a9 as H,D as A,r as o,o as r,c as n,g as i,w as p,e as y,t as h,h as g,b as u,d as N,N as F,F as P}from"../../assets/app-8df99815.js";import x from"./PostsSearch-419d3337.js";import E from"./UsersSearch-4c5fe4e2.js";import M from"./PageSearch-91fe6045.js";import L from"./GroupSearch-26266377.js";import"./PostsList-f3c51b69.js";import"./SkeletonPostsList-68921a0e.js";import"./PostDetailModal-69941281.js";import"./PostContent-93850f8e.js";import"./UserPagesList-cdf08693.js";import"./GroupsList-ae163842.js";const U={props:["search_type","type"],components:{BaseIcon:w,BaseButton:b,Error:T,Loading:S,TabsMenu:v},data(){return{currentTab:this.type,hashtagChar:B.HASHTAG,loading_query:this.search_type==="hashtag",query:null,queryInfo:null,error:null}},created(){this.query=window._.isNil(this.$route.query.q)?"":this.$route.query.q,this.search_type==="hashtag"&&this.getHashtagInfo(this.query)},watch:{$route(){this.query=window._.isNil(this.$route.query.q)?"":this.$route.query.q,this.search_type==="hashtag"&&this.query&&this.getHashtagInfo(this.query)}},computed:{...l(I,["authenticated"]),...l(k,["config"]),searchTypeComponent(){if(this.query!="")switch(this.currentTab){case"user":return E;case"page":return M;case"group":return L;default:return x}return null},searchMenus(){return[{icon:"feeds",name:this.$t("Post"),isShow:!0,isActive:this.currentTab==="post",tab:"post"},{icon:"user",name:this.$t("People"),isShow:!0,isActive:this.currentTab==="user",tab:"user"},{icon:"briefcase",name:this.$t("Page"),isShow:!0,isActive:this.currentTab==="page",tab:"page"},{icon:"users",name:this.$t("Group"),isShow:this.config.group.enable,isActive:this.currentTab==="group",tab:"group"}]}},methods:{changeTab(e){this.currentTab=e;let s=this.$router.resolve({name:"search",params:{search_type:this.search_type,type:this.currentTab},query:{q:this.query}});C(s.fullPath)},async getHashtagInfo(e){try{const s=await H(e);this.queryInfo=s,this.loading_query=!1}catch{this.loading_query=!1}},async toggleFollowHashtag(){try{await A({name:this.queryInfo.name,action:this.queryInfo.is_followed?"unfollow":"follow"}),this.queryInfo.is_followed=!this.queryInfo.is_followed}catch(e){this.showError(e.error)}}}},V={class:"page-title mb-base-2"},D={key:0},G={key:1,class:"flex flex-wrap items-center gap-x-3 gap-y-base-2"},$={class:"break-word"},j={key:1};function z(e,s,c,J,t,a){const m=o("Error"),f=o("Loading"),_=o("BaseButton"),q=o("TabsMenu");return r(),n(P,null,[t.error?(r(),i(m,{key:0},{default:p(()=>[y(h(t.error),1)]),_:1})):g("",!0),u("h1",V,[c.search_type==="hashtag"?(r(),n("div",D,[t.loading_query?(r(),i(f,{key:0})):(r(),n("div",G,[u("span",$,h(t.hashtagChar+t.query),1),t.queryInfo&&e.authenticated?(r(),i(_,{key:0,onClick:s[0]||(s[0]=K=>a.toggleFollowHashtag())},{default:p(()=>[y(h(t.queryInfo.is_followed?e.$t("Unfollow"):e.$t("Follow")),1)]),_:1})):g("",!0)]))])):(r(),n("div",j,h(e.$t("Search")+": "+t.query),1))]),u("div",null,[N(q,{menus:a.searchMenus,onSelect:a.changeTab},null,8,["menus","onSelect"]),(r(),i(F(a.searchTypeComponent),{search_type:c.search_type,type:t.currentTab,query:t.query},null,8,["search_type","type","query"]))])],64)}const ae=d(U,[["render",z]]);export{ae as default};
