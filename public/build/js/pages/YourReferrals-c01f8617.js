import{g as I,b as B}from"./invite-271dc862.js";import{_ as R,a7 as K,L as V,B as C,s as S,U as T,r as c,o as i,c as n,g as p,w as f,e as u,t as r,h as v,b as e,Q as _,$ as U,d as h,F as b,f as E}from"../../assets/app-8df99815.js";const N={components:{Error:K,Loading:V,BaseButton:C,BaseInputText:S,UsersList:T},data(){return{error:null,inviteInfo:null,invitesList:null,loadingInvites:!0,loadmoreInvites:!1,page:1,searchKeyword:"",type:"invite"}},mounted(){this.getInviteInfo(),this.getReferralsList(this.type,this.page,this.searchKeyword)},methods:{labelText(t){switch(t){case"sent":return this.$t("Sent");case"joined":return this.$t("Joined")}},async getInviteInfo(){try{const t=await I();this.inviteInfo=t}catch(t){this.error=t}},async getReferralsList(t,o,g){try{const d=await B(t,o,g);o===1?this.invitesList=d.items:this.invitesList=window._.concat(this.invitesList,d.items),d.has_next_page?(this.loadmoreInvites=!0,this.page++):this.loadmoreInvites=!1}catch(d){this.error=d}finally{this.loadingInvites=!1}},resetReferralsList(){this.loadingInvites=!0,this.invitesList=[],this.loadmoreInvites=!1,this.page=1,this.getReferralsList(this.type,this.page,this.searchKeyword)},searchInvitesList(){this.resetReferralsList()},filterReferralsList(t){this.type=t,this.searchKeyword="",this.resetReferralsList()}}},j={class:"px-base-2 pt-6 pb-4"},F={class:"text-center mb-base-2"},J={key:0,class:"flex justify-between items-center text-center border border-secondary-box-color mb-base-2 dark:border-white/10"},M={class:"px-2 py-5 flex-1"},Y={class:"text-3xl md:text-base-4xl py-3"},z={class:"text-base-xs uppercase"},D={class:"px-2 py-5 flex-1 border-s border-secondary-box-color dark:border-white/10"},H={class:"text-3xl md:text-base-4xl py-3"},Q={class:"text-base-xs uppercase"},q={class:"tabs-list flex gap-base-2 mb-4"},A={class:"relative overflow-x-auto border border-b-0 border-table-border-color md:rounded-md dark:border-white/10"},G={class:"w-full text-sm whitespace-nowrap text-center"},O={class:"text-xs uppercase bg-table-header-color dark:bg-dark-web-wash"},P={scope:"col",class:"p-3 text-start"},W={scope:"col",class:"p-3"},X={scope:"col",class:"p-3"},Z={key:0},$={colspan:"3"},ee={class:"p-3 text-start"},se={class:"p-3"},te={class:"p-3"},re={key:1,class:"border-b border-table-border-color dark:border-gray-700"},oe={colspan:"3",class:"p-3"},ie={key:0,class:"text-center my-base-2"};function ae(t,o,g,d,s,l){const w=c("Error"),m=c("Loading"),k=c("BaseInputText"),y=c("BaseButton"),x=c("UsersList");return i(),n(b,null,[s.error?(i(),p(w,{key:0},{default:f(()=>[u(r(s.error),1)]),_:1})):v("",!0),e("div",j,[e("p",F,r(t.$t("Here's a list of the people that have been invited to join thru email and list of people has signed up using your referral link/code")),1),s.inviteInfo?(i(),n("div",J,[e("div",M,[e("div",Y,r(s.inviteInfo.total_sent),1),e("div",z,r(t.$t("Sent")),1)]),e("div",D,[e("div",H,r(s.inviteInfo.total_referral),1),e("div",Q,r(t.$t("Joined")),1)])])):(i(),p(m,{key:1})),e("div",q,[e("button",{onClick:o[0]||(o[0]=a=>l.filterReferralsList("invite")),class:_(["tabs-list-item p-base-2 rounded-base-lg",s.type==="invite"?"active bg-primary-color text-white dark:bg-dark-primary-color":"bg-web-wash dark:bg-dark-web-wash"])},r(t.$t("Invited email list")),3),e("button",{onClick:o[1]||(o[1]=a=>l.filterReferralsList("referral")),class:_(["tabs-list-item p-base-2 rounded-base-lg",s.type==="referral"?"active bg-primary-color text-white dark:bg-dark-primary-color":"bg-web-wash dark:bg-dark-web-wash"])},r(t.$t("Your referrals")),3)]),e("form",{class:"flex gap-base-2 mb-base-2",onSubmit:o[3]||(o[3]=U((...a)=>l.searchInvitesList&&l.searchInvitesList(...a),["prevent"]))},[h(k,{modelValue:s.searchKeyword,"onUpdate:modelValue":o[2]||(o[2]=a=>s.searchKeyword=a),placeholder:t.$t("Keyword"),class:"max-w-[240px]"},null,8,["modelValue","placeholder"]),h(y,null,{default:f(()=>[u(r(t.$t("Search")),1)]),_:1})],32),s.type==="invite"?(i(),n(b,{key:2},[e("div",A,[e("table",G,[e("thead",O,[e("tr",null,[e("th",P,r(t.$t("Email")),1),e("th",W,r(t.$t("Last Updated")),1),e("th",X,r(t.$t("Status")),1)])]),e("tbody",null,[s.loadingInvites?(i(),n("tr",Z,[e("td",$,[h(m,{class:"mt-base-2"})])])):(i(),n(b,{key:1},[s.invitesList.length?(i(!0),n(b,{key:0},E(s.invitesList,(a,L)=>(i(),n("tr",{key:L,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b border-table-border-color dark:border-gray-700"},[e("td",ee,r(a.email),1),e("td",se,r(a.sent_at),1),e("td",te,r(l.labelText(a.status)),1)]))),128)):(i(),n("tr",re,[e("td",oe,r(t.$t("No Invites Sent")),1)]))],64))])])]),s.loadmoreInvites?(i(),n("div",ie,[h(y,{onClick:o[4]||(o[4]=a=>l.getReferralsList(s.type,s.page,s.searchKeyword))},{default:f(()=>[u(r(t.$t("View more")),1)]),_:1})])):v("",!0)],64)):s.type==="referral"?(i(),p(x,{key:3,loading:s.loadingInvites,usersList:s.invitesList,"has-load-more":s.loadmoreInvites,onLoadMore:o[5]||(o[5]=a=>l.getReferralsList(s.type,s.page,s.searchKeyword))},null,8,["loading","usersList","has-load-more"])):v("",!0)])],64)}const de=R(N,[["render",ae]]);export{de as default};
