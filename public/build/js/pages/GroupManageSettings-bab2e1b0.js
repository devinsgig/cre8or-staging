import{_ as b,a as v,s as B,B as C,aV as x,W as h,aW as y,aX as S,r as d,o as g,c as m,b as o,t as a,d as i,w as p,e as c,F as k,h as V}from"../../assets/app-8df99815.js";import{B as G}from"./BaseSwitch-3591db5b.js";const P={props:["adminConfig"],components:{BaseSwitch:G,BaseSelect:v,BaseInputText:B,BaseButton:C},data(){return{postApproveEnable:this.adminConfig.post_approve_enable,whoCanPost:this.adminConfig.who_can_post,slug:this.adminConfig.group.slug,error:{who_can_post:null,slug:null},loadingSaveButton:!1,loadingHideButton:!1,loadingDeleteButton:!1}},computed:{whoCanPostOptions(){return window._.map(this.adminConfig.whoCanPostList,function(e,s){return{key:e,value:s}})},baseUrl(){return window.siteConfig.siteUrl}},methods:{async handleSaveGroupSettings(){this.loadingSaveButton=!0;try{await x({id:this.adminConfig.group.id,post_approve_enable:this.postApproveEnable,who_can_post:this.whoCanPost,slug:this.slug}),this.showSuccess(this.$t("Your changes have been saved.")),this.resetErrors(this.error)}catch(e){this.handleApiErrors(this.error,e)}finally{this.loadingSaveButton=!1}},handleHideGroup(){this.$confirm.require({message:this.$t("Are you sure you want to hide this group? All members can't access this group until you re-open it"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:()=>{const e=this.$dialog.open(h,{props:{header:this.$t("Enter Password"),class:"password-modal",modal:!0,dismissableMask:!0,draggable:!1},emits:{onConfirm:async s=>{if(s.password){this.loadingHideButton=!0;try{await y({id:this.adminConfig.group.id,password:s.password}),e.close(),this.$router.push({name:"list_groups"}),this.showSuccess(this.$t("Hide Group Successfully."))}catch(n){this.showError(n.error),e.close()}finally{this.loadingHideButton=!1}}}}})}})},handleDeleteGroup(){this.$confirm.require({message:this.$t("Are you sure you want to delete this group?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:()=>{const e=this.$dialog.open(h,{props:{header:this.$t("Enter Password"),class:"password-modal",modal:!0,dismissableMask:!0,draggable:!1},emits:{onConfirm:async s=>{if(s.password){this.loadingDeleteButton=!0;try{await S({id:this.adminConfig.group.id,password:s.password}),e.close(),this.$router.push({name:"groups"}),this.showSuccess(this.$t("Delete Group Successfully."))}catch(n){this.showError(n.error),e.close()}finally{this.loadingDeleteButton=!1}}}}})}})}}},$={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},D={class:"flex flex-col gap-base-2"},E={class:"text-main-color text-base-lg font-extrabold dark:text-white"},A={class:"flex gap-4"},H={class:"flex-1"},L={class:"font-bold"},T={class:"flex flex-wrap gap-4"},U={class:"font-bold flex-1"},M={class:"flex-3"},N={class:"flex flex-wrap gap-4"},O={class:"font-bold flex-1"},W={class:"flex-3"},I={class:"text-sub-color text-xs italic mt-base-1 dark:text-slate-400 break-word"},j={class:"flex gap-4"},q={class:"flex-3 flex flex-wrap gap-base-2"};function F(e,s,n,z,t,r){const f=d("BaseSwitch"),w=d("BaseSelect"),_=d("BaseInputText"),u=d("BaseButton");return g(),m("div",$,[o("div",D,[o("h3",E,a(e.$t("Settings")),1),o("div",A,[o("div",H,[o("div",L,a(e.$t("Post Approval")),1),o("div",null,a(e.$t("Turn this on if you want admins and moderators to approve each post. This setting will not apply for post create by admins and moderators.")),1)]),i(f,{modelValue:t.postApproveEnable,"onUpdate:modelValue":s[0]||(s[0]=l=>t.postApproveEnable=l),size:"md"},null,8,["modelValue"])]),o("div",T,[o("div",U,a(e.$t("Who can post")),1),o("div",M,[i(w,{modelValue:t.whoCanPost,"onUpdate:modelValue":s[1]||(s[1]=l=>t.whoCanPost=l),options:r.whoCanPostOptions,optionLabel:"key",optionValue:"value",error:t.error.who_can_post},null,8,["modelValue","options","error"])])]),o("div",N,[o("div",O,a(e.$t("Web Address")),1),o("div",W,[i(_,{modelValue:t.slug,"onUpdate:modelValue":s[2]||(s[2]=l=>t.slug=l),error:t.error.slug},null,8,["modelValue","error"]),o("div",I,a(r.baseUrl+"/groups/"+n.adminConfig.group.id+"/"+t.slug),1)])]),o("div",j,[s[3]||(s[3]=o("div",{class:"flex-1"},null,-1)),o("div",q,[i(u,{loading:t.loadingSaveButton,onClick:r.handleSaveGroupSettings},{default:p(()=>[c(a(e.$t("Save")),1)]),_:1},8,["loading","onClick"]),n.adminConfig.is_owner?(g(),m(k,{key:0},[i(u,{type:"warning",loading:t.loadingHideButton,onClick:r.handleHideGroup},{default:p(()=>[c(a(e.$t("Hide Group")),1)]),_:1},8,["loading","onClick"]),i(u,{type:"danger",loading:t.loadingDeleteButton,onClick:r.handleDeleteGroup},{default:p(()=>[c(a(e.$t("Delete Group")),1)]),_:1},8,["loading","onClick"])],64)):V("",!0)])])])])}const J=b(P,[["render",F]]);export{J as default};
