import{B as V,a2 as C,s as T,u as g,m as v,y as x,_ as L,r as i,o as r,c as a,b as d,t as n,d as l,a6 as f,h as p,w as m,e as u,F as w,f as F}from"../../assets/app-8df99815.js";import{C as S,u as E}from"./CloudFlareTurnstile-dd2b6044.js";const P={components:{BaseButton:V,BasePassword:C,BaseInputText:T,CloudFlareTurnstile:S},data(){const e=g(),t=E(e.config.loginEnableRecapcha,this.enableRecapcha,this.enableTurnstile);return{user:{email:null,password:null},error:{email:null,password:null},loadingLogin:!1,...t}},computed:{...v(g,["config"])},mounted(){setTimeout(()=>{this.loadRecaptcha(this.$recaptchaInstance)},2e3)},unmounted(){this.unloadRecaptcha(this.$recaptchaInstance)},methods:{async login(){this.loadingLogin=!0;try{this.user.token=await this.getCaptchaToken(this.$recaptcha,this.turnstileToken,"login"),await x().login(this.user);const e=this.$route.query.redirect,t=e&&atob(e).includes(window.siteConfig.siteUrl)?atob(e):window.siteConfig.siteUrl;window.location.href=t,this.resetErrors(this.error)}catch(e){this.handleApiErrors(this.error,e)}finally{this.loadingLogin=!1}}}},$={class:"widget-box bg-white rounded-base-lg max-w-full w-full sm:w-96 p-7 mx-auto mb-base-2 dark:bg-slate-800"},K={class:"text-base-lg font-extrabold mb-5 dark:text-white"},U={key:0,class:"text-center"},N={class:"my-5 text-center"},R={class:"flex flex-wrap gap-3 justify-center mb-5"},A=["href"],I=["src","alt"],D={class:"mt-5 text-center"},j={key:2,class:"mt-5 text-center"};function q(e,t,O,W,s,c){const b=i("BaseInputText"),_=i("BasePassword"),k=i("CloudFlareTurnstile"),y=i("BaseButton"),h=i("router-link");return r(),a("div",$,[d("h3",K,n(e.$t("Login")),1),l(b,{modelValue:s.user.email,"onUpdate:modelValue":t[0]||(t[0]=o=>s.user.email=o),placeholder:e.$t("Email"),error:s.error.email,left_icon:"mail",onKeyup:f(c.login,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),l(_,{modelValue:s.user.password,"onUpdate:modelValue":t[1]||(t[1]=o=>s.user.password=o),placeholder:e.$t("Password"),autocomplete:"current-password",error:s.error.password,onKeyup:f(c.login,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),e.enableWidget?(r(),a("div",U,[l(k,{modelValue:e.turnstileToken,"onUpdate:modelValue":t[2]||(t[2]=o=>e.turnstileToken=o)},null,8,["modelValue"])])):p("",!0),l(y,{onClick:c.login,loading:s.loadingLogin,disabled:!e.isVerified(),class:"w-full"},{default:m(()=>[u(n(e.$t("Login")),1)]),_:1},8,["onClick","loading","disabled"]),e.config.openidProviders.length?(r(),a(w,{key:1},[d("div",N,n(e.$t("Or Sign in using")),1),d("div",R,[(r(!0),a(w,null,F(e.config.openidProviders,(o,B)=>(r(),a("a",{key:B,href:o.href},[d("img",{class:"max-w-[2rem]",src:o.photo,alt:o.name},null,8,I)],8,A))),128))])],64)):p("",!0),d("div",D,[l(h,{to:{name:"recover"},class:"text-primary-color dark:text-dark-primary-color"},{default:m(()=>[u(n(e.$t("Forgot password")),1)]),_:1})]),this.config.signupEnable?(r(),a("div",j,[u(n(e.$t("Don't have an account?"))+"Â ",1),l(h,{to:{name:"signup"},class:"text-primary-color dark:text-dark-primary-color"},{default:m(()=>[u(n(e.$t("Sign up")),1)]),_:1})])):p("",!0)])}const H=L(P,[["render",q]]);export{H as default};
