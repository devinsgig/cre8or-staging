import{_ as p,B as w,s as h,ck as V,cl as _,r as m,o as g,c as v,b as s,t as l,d as r,w as u,e as f,F as b,y as x,a2 as C,m as S,$ as E}from"../../assets/app-8df99815.js";const $={components:{BaseButton:w,BaseInputText:h},data(){return{email:this.dialogRef.data.email,password:this.dialogRef.data.password,password_confirmed:this.dialogRef.data.password_confirmed,code:null,loading:!1,loading_resend:!1}},inject:["dialogRef"],methods:{async checkVerificationCode(){this.loading=!0;try{await V(this.email,this.password,this.password_confirmed,this.code),this.showSuccess(this.$t("Email and password have been successfully updated.")),this.dialogRef.close()}catch(o){this.showError(o.error)}finally{this.loading=!1}},async resendCode(){this.loading_resend=!0;try{await _(this.email,this.password,this.password_confirmed),this.showSuccess(this.$t("A verification code has been sent to your email account."))}catch(o){this.showError(o.error)}finally{this.loading_resend=!1}}}},k={class:"mb-base-2"},P={class:"mt-1"};function A(o,e,B,y,a,d){const c=m("BaseInputText"),n=m("BaseButton");return g(),v(b,null,[s("p",k,l(o.$t("Please check your email for a message with your code.")),1),r(c,{modelValue:a.code,"onUpdate:modelValue":e[0]||(e[0]=i=>a.code=i),placeholder:o.$t("Code")},null,8,["modelValue","placeholder"]),s("p",P,l(o.$t("We sent your code to"))+":Â "+l(a.email),1),r(n,{loading:a.loading,class:"w-full mt-3",onClick:e[1]||(e[1]=i=>d.checkVerificationCode())},{default:u(()=>[f(l(o.$t("Verify")),1)]),_:1},8,["loading"]),r(n,{loading:a.loading_resend,type:"transparent",class:"w-full mt-2",onClick:e[2]||(e[2]=i=>d.resendCode())},{default:u(()=>[f(l(o.$t("Resend code")),1)]),_:1},8,["loading"])],64)}const R=p($,[["render",A]]),T=x(),I={components:{BaseButton:w,BaseInputText:h,BasePassword:C},data(){return{loadingSave:!1,email:null,password:null,password_confirmed:null,error:{email:null,password:null,password_confirmed:null}}},computed:{...S(x,["user"])},methods:{async saveAccount(){this.loadingSave=!0;try{await _(this.email,this.password,this.password_confirmed),this.$dialog.open(R,{data:{email:this.email,password:this.password,password_confirmed:this.password_confirmed},props:{header:this.$t("Enter verification code"),class:"verification-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:async()=>{await T.me(),this.$router.push({name:"setting_account"})}})}catch(o){this.handleApiErrors(this.error,o)}finally{this.loadingSave=!1}}}},U={class:"flex flex-wrap gap-x-5 mb-3"},M={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},N={class:"md:flex-2 w-full"},F={class:"flex flex-wrap gap-x-5 mb-3"},j={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},D={class:"md:flex-2 w-full"},W={class:"flex flex-wrap gap-x-5 mb-3"},q={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},z={class:"md:flex-2 w-full"},G={class:"flex flex-wrap gap-x-5"},H={class:"md:flex-2 w-full"};function J(o,e,B,y,a,d){const c=m("BaseInputText"),n=m("BasePassword"),i=m("BaseButton");return g(),v("form",{onSubmit:e[3]||(e[3]=E((...t)=>d.saveAccount&&d.saveAccount(...t),["prevent"]))},[s("div",U,[s("div",M,[s("label",null,l(o.$t("Email")),1)]),s("div",N,[r(c,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=t=>a.email=t),class:"w-full",error:a.error.email},null,8,["modelValue","error"])])]),s("div",F,[s("div",j,[s("label",null,l(o.$t("Password")),1)]),s("div",D,[r(n,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=t=>a.password=t),error:a.error.password},null,8,["modelValue","error"])])]),s("div",W,[s("div",q,[s("label",null,l(o.$t("Confirm Password")),1)]),s("div",z,[r(n,{modelValue:a.password_confirmed,"onUpdate:modelValue":e[2]||(e[2]=t=>a.password_confirmed=t),error:a.error.password_confirmed},null,8,["modelValue","error"])])]),s("div",G,[e[4]||(e[4]=s("div",{class:"md:flex-1 md:text-end w-full"},null,-1)),s("div",H,[r(i,{loading:a.loadingSave,class:"w-full"},{default:u(()=>[f(l(o.$t("Save")),1)]),_:1},8,["loading"])])])],32)}const L=p(I,[["render",J]]);export{L as default};
