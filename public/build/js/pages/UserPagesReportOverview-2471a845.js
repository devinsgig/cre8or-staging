import{_ as w,j as k,m,p as A,cL as y,cM as R,r as g,o as f,c as v,b as t,t as s,d as n,h as C,F as O,y as x,u as _}from"../../assets/app-8df99815.js";import{s as G}from"./chart.esm-17c946be.js";const B={components:{BaseIcon:k,Chart:G},data(){return{dataReportOverview:null,dataReportAudience:null,chartAgeData:null,chartAgeOptions:null,chartGenderData:null,chartGenderOptions:null}},computed:{...m(x,["user"]),...m(_,["darkmode"]),tickColor(){return this.darkmode==="on"?"#fff":"#333"},surfaceBorder(){return this.darkmode==="on"?"#ffffff26":"#e0e0e0"}},watch:{darkmode(){this.setAgeChartOptions()}},mounted(){this.user.is_page?(this.getReportOverview(),this.getReportAudience()):this.setErrorLayout(!0)},methods:{...A(_,["setErrorLayout"]),async getReportOverview(){try{const e=await y();this.dataReportOverview=e}catch(e){this.showError(e.error)}},async getReportAudience(){try{const e=await R();this.dataReportAudience=e,this.setAgeChartData(),this.setAgeChartOptions(),this.setGenderChartData(),this.setGenderChartOptions()}catch(e){this.showError(e.error)}},getPercentGenderGroupByAge(e){return window._.flatMap(this.dataReportAudience.ages,r=>window._.map(window._.filter(r,{name:e}),"percent"))},setAgeChartData(){const e=window._.keys(this.dataReportAudience.ages),r=this.dataReportAudience.genders.map(a=>({label:a.name,backgroundColor:a.color,data:this.getPercentGenderGroupByAge(a.name)}));this.chartAgeData={labels:e,datasets:r}},setAgeChartOptions(){const e=this.surfaceBorder;this.chartAgeOptions={plugins:{legend:{labels:{color:this.tickColor}},tooltip:{callbacks:{label:function(r){let a=r.dataset.label||"";return a&&(a+=": "),r.parsed.y!==null&&(a+=r.parsed.y+"%")," "+a}}}},maintainAspectRatio:!1,scales:{x:{ticks:{color:this.tickColor,font:{size:15}},grid:{display:!1}},y:{grid:{color:e,drawBorder:!1},suggestedMin:0,suggestedMax:100,ticks:{color:this.tickColor,font:{size:15},stepSize:20,callback:function(r){return r+"%"}}}}}},setGenderChartData(){const e=this.dataReportAudience.follows.map(i=>i.name),r=this.dataReportAudience.follows.map(i=>i.percent),a=this.dataReportAudience.follows.map(i=>i.color);this.chartGenderData={labels:e,datasets:[{data:r,backgroundColor:a}]}},setGenderChartOptions(){this.chartGenderOptions={plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){return" "+e.label+": "+e.parsed+"%"}}}}}}}},D={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},P={class:"text-main-color text-base-lg font-extrabold dark:text-white mb-base-2"},E={class:"mb-base-2"},L={class:"flex items-center gap-base-2 py-base-2 border-t border-divider dark:border-white/10"},S={class:"flex-1"},M={class:"flex items-center gap-base-2 py-base-2 border-t border-divider dark:border-white/10"},N={class:"flex-1"},z={class:"flex items-center gap-base-2 py-base-2 border-t border-divider dark:border-white/10"},F={class:"flex-1"},I={class:"flex items-center gap-base-2 py-base-2 border-t border-divider dark:border-white/10"},V={class:"flex-1"},$={class:"flex items-center gap-base-2 py-base-2 border-t border-divider dark:border-white/10"},j={class:"flex-1"},T={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},U={class:"text-main-color text-base-lg font-extrabold dark:text-white mb-base-2"},q={class:"mb-base-2"},H={key:0};function J(e,r,a,i,o,K){var c,p,h,u,b;const d=g("BaseIcon"),l=g("Chart");return f(),v(O,null,[t("div",D,[t("h3",P,s(e.$t("Page overview")),1),t("div",E,s(e.$t("Last 28 days")),1),t("div",L,[n(d,{name:"globe",cursor:!1}),t("div",S,s(e.$t("Post Reach")),1),t("div",null,s((c=o.dataReportOverview)==null?void 0:c.post_reach),1)]),t("div",M,[n(d,{name:"users",cursor:!1}),t("div",N,s(e.$t("Post Engagement")),1),t("div",null,s((p=o.dataReportOverview)==null?void 0:p.post_engagement),1)]),t("div",z,[n(d,{name:"check_circle",cursor:!1}),t("div",F,s(e.$t("New Followers")),1),t("div",null,s((h=o.dataReportOverview)==null?void 0:h.follow),1)]),t("div",I,[n(d,{name:"comment",cursor:!1}),t("div",V,s(e.$t("Comment")),1),t("div",null,s((u=o.dataReportOverview)==null?void 0:u.post_comment),1)]),t("div",$,[n(d,{name:"share",cursor:!1}),t("div",j,s(e.$t("Share")),1),t("div",null,s((b=o.dataReportOverview)==null?void 0:b.post_share),1)])]),t("div",T,[t("h3",U,s(e.$t("Audience")),1),t("div",q,s(e.$t("These values are based on total followers of your Page or profile.")),1),o.dataReportAudience?(f(),v("div",H,[n(l,{type:"bar",data:o.chartAgeData,options:o.chartAgeOptions,class:"h-64 mb-12"},null,8,["data","options"]),n(l,{type:"pie",data:o.chartGenderData,options:o.chartGenderOptions,class:"w-72 mx-auto"},null,8,["data","options"])])):C("",!0)])],64)}const X=w(B,[["render",J]]);export{X as default};
