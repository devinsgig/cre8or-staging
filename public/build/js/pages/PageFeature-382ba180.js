import{b0 as D,b1 as U,B as N,cY as W,cZ as R,j as z,m as x,u as j,y as E,bK as F,p as I,I as $,_ as B,r as _,o as s,c as o,F as p,f as k,d as a,b as n,w as u,e as b,t as r,h as w,g as y,S as q,Q as H}from"../../assets/app-8df99815.js";const T={components:{Avatar:D,UserName:U,BaseButton:N,VueperSlides:W,VueperSlide:R,BaseIcon:z},props:{pagesList:{type:Array,default:null},target:{type:String,default:""},showPopover:{type:Boolean,default:!0},listStyle:{type:String,default:"list"},positionWidget:{type:String,default:""}},data(){return{pagesListData:window._.clone(this.pagesList),slideRatio:0}},mounted(){this.setSlideRatio(),addEventListener("resize",()=>{this.setSlideRatio()})},computed:{...x(j,["screen"]),...x(E,["user","authenticated"]),...x(F,["userAction"])},watch:{userAction(){this.pagesList.map(e=>(e.id===this.userAction.pageId&&(this.userAction.status==="follow"?e.is_followed=!0:this.userAction.status==="unfollow"&&(e.is_followed=!1)),e))},pagesList(){this.pagesListData=window._.clone(this.pagesList)}},methods:{...I(F,["updateFollowStatus"]),async followPage(e){if(this.authenticated)try{await $({id:e.id,action:"follow"}),this.pagesListData.map(i=>(i.id===e.id&&(i.is_followed=!0),i)),this.updateFollowStatus({pageId:e.id,status:"follow"}),this.$emit("follow_page",e)}catch(i){this.showError(i.error)}else this.showRequireLogin()},async unFollowPage(e){try{await $({id:e.id,action:"unfollow"}),this.pagesListData.map(i=>(i.id===e.id&&(i.is_followed=!1),i)),this.updateFollowStatus({pageId:e.id,status:"unfollow"}),this.$emit("unfollow_page",e)}catch(i){this.showError(i.error)}},setSlideRatio(){this.listStyle!=="list"&&this.$nextTick(()=>{const e=this.pagesListData.map((i,l)=>{var c,h;const g=this.$refs[`slideContent${l}`];return(g?(c=g[0])==null?void 0:c.offsetHeight:0)/(((h=g[0])==null?void 0:h.offsetWidth)*(this.screen.md?1:2))});this.slideRatio=Math.max(...e)})}},emits:["follow_page","unfollow_page"]},Z={key:0},K={class:"flex-1 min-w-0"},M={key:0,class:"text-xs mb-1 truncate text-sub-color dark:text-slate-400"},Q={key:1,class:"text-xs text-sub-color dark:text-slate-400"},Y={key:0},G=["onClick"],J=["onClick"],O={class:"grid-item rounded-lg border border-divider dark:border-white/10 h-full"},X={class:"p-base-2"},ee={class:"flex gap-4"},te={class:"flex-1 min-w-0"},se={class:"flex flex-wrap gap-2 items-center mb-1"},oe={key:0,class:"grid-item-sub text-xs mb-1 truncate text-sub-color dark:text-slate-400"},ie={key:1,class:"grid-item-sub text-xs text-sub-color dark:text-slate-400"},le={key:0,class:"mt-base-2"},re={key:1,class:"h-base-9 mt-base-2"},ae={class:"flex items-center justify-center w-10 h-10 bg-white shadow-md rounded-full text-main-color dark:bg-slate-800 dark:text-white dark:shadow-slate-600 z-10"},ne={class:"flex items-center justify-center w-10 h-10 bg-white shadow-md rounded-full text-main-color dark:bg-slate-800 dark:text-white dark:shadow-slate-600 z-10"},de={key:1,class:"text-center"};function ce(e,i,l,g,d,c){const h=_("Avatar"),S=_("UserName"),v=_("router-link"),L=_("BaseButton"),C=_("VueperSlide"),P=_("BaseIcon"),A=_("VueperSlides");return d.pagesListData.length?(s(),o("div",{key:0,class:H(`user_pages_list_${l.positionWidget}`)},[l.listStyle==="list"?(s(),o("div",Z,[(s(!0),o(p,null,k(d.pagesListData,t=>(s(),o("div",{key:t.id,class:"users-list-item flex items-center gap-base-2 mb-base-2 last:mb-0"},[a(h,{user:t,target:l.target,activePopover:l.showPopover},null,8,["user","target","activePopover"]),n("div",K,[a(S,{user:t,activePopover:l.showPopover,target:l.target,class:"list_items_title_text_color"},null,8,["user","activePopover","target"]),t.categories.length?(s(),o("div",M,[(s(!0),o(p,null,k(t.categories,(f,m)=>(s(),o("span",{key:f.id},[a(v,{to:{name:"user_pages",query:{category_id:f.id}},class:"text-inherit"},{default:u(()=>[b(r(f.name),1)]),_:2},1032,["to"]),b(" "+r(m===t.categories.length-1?"":" · "),1)]))),128))])):w("",!0),t.show_follower?(s(),o("div",Q,r(e.$filters.numberShortener(t.follower_count,e.$t("[number] Follower"),e.$t("[number] Followers"))),1)):w("",!0)]),e.user.id!==t.id&&t.can_follow?(s(),o("div",Y,[t.is_followed?(s(),o("button",{key:0,class:"list_items_button text-xs text-primary-color cursor-pointer font-bold dark:text-dark-primary-color",onClick:f=>c.unFollowPage(t)},r(e.$t("Unfollow")),9,G)):(s(),o("button",{key:1,class:"list_items_button text-xs text-primary-color cursor-pointer font-bold dark:text-dark-primary-color",onClick:f=>c.followPage(t)},r(e.$t("Follow")),9,J))])):w("",!0)]))),128))])):(s(),y(A,{key:1,class:"no-shadow relative","slide-ratio":d.slideRatio,"visible-slides":e.screen.md?1:2,"slide-multiple":"",gap:1,autoplay:!0,duration:6e3,bullets:!1,touchable:!1,rtl:!!e.user.rtl},{"arrow-left":u(()=>[n("div",ae,[a(P,{name:"caret_left"})])]),"arrow-right":u(()=>[n("div",ne,[a(P,{name:"caret_right"})])]),default:u(()=>[(s(!0),o(p,null,k(d.pagesListData,(t,f)=>(s(),y(C,{key:t.id},{content:u(()=>[n("div",{ref_for:!0,ref:`slideContent${f}`},[n("div",O,[a(v,{to:{name:"profile",params:{user_name:t.user_name}},class:"block pb-[35%] bg-cover bg-center bg-no-repeat rounded-t-lg",style:q({backgroundImage:`url(${t.cover})`})},null,8,["to","style"]),n("div",X,[n("div",ee,[a(h,{user:t,activePopover:!1,size:50},null,8,["user"]),n("div",te,[n("div",se,[a(S,{user:t,class:"grid-item-title"},null,8,["user"])]),t.categories.length?(s(),o("div",oe,[(s(!0),o(p,null,k(t.categories,(m,V)=>(s(),o("span",{key:m.id},[a(v,{to:{name:"user_pages",query:{category_id:m.id}},class:"text-inherit"},{default:u(()=>[b(r(m.name),1)]),_:2},1032,["to"]),b(" "+r(V===t.categories.length-1?"":" · "),1)]))),128))])):w("",!0),t.show_follower?(s(),o("div",ie,r(e.$filters.numberShortener(t.follower_count,e.$t("[number] Follower"),e.$t("[number] Followers"))),1)):w("",!0)])]),t.can_follow?(s(),o("div",le,[t.is_followed?(s(),y(L,{key:0,onClick:m=>c.unFollowPage(t),type:"outlined",class:"w-full"},{default:u(()=>[b(r(e.$t("Unfollow")),1)]),_:2},1032,["onClick"])):(s(),y(L,{key:1,onClick:m=>c.followPage(t),type:"outlined",class:"w-full"},{default:u(()=>[b(r(e.$t("Follow")),1)]),_:2},1032,["onClick"]))])):(s(),o("div",re))])])],512)]),_:2},1024))),128))]),_:1},8,["slide-ratio","visible-slides","rtl"]))],2)):(s(),o("div",de,r(e.$t("No Pages")),1))}const ue=B(T,[["render",ce]]),_e={props:["data","params","position"],components:{UserPagesWidgetList:ue},data(){return{pagesList:this.data.data}}},he={key:0,class:"widget-box bg-white border border-white rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800"},fe={key:0,class:"widget-box-header flex flex-wrap items-center justify-between gap-2 mb-base-2"},me={class:"text-main-color text-base-lg font-extrabold dark:text-white"};function we(e,i,l,g,d,c){const h=_("UserPagesWidgetList");return d.pagesList.length?(s(),o("div",he,[l.data.enable_title?(s(),o("div",fe,[n("h3",me,r(l.data.title),1)])):w("",!0),a(h,{pagesList:d.pagesList,positionWidget:l.position,listStyle:["left","right"].includes(l.position)?"list":"slider"},null,8,["pagesList","positionWidget","listStyle"])])):w("",!0)}const ge=B(_e,[["render",we]]);export{ge as default};
