import{_ as w,b0 as k,b1 as A,B as v,m as y,p as $,cN as x,cO as L,r as c,o as r,c as o,b as a,t as i,g as p,w as h,h as n,d as l,F as g,f as C,y as M,u as B,e as f}from"../../assets/app-8df99815.js";import{T as P,A as N}from"./AddModeratorsModal-1a65fd1b.js";const S={components:{Avatar:k,UserName:A,BaseButton:v},data(){return{currentPage:1,loadmoreAdminsList:!1,adminsList:[]}},mounted(){this.user.is_page?this.getAdminsList(this.currentPage):this.setErrorLayout(!0)},computed:{...y(M,["user"])},methods:{...$(B,["setErrorLayout"]),async getAdminsList(e){try{const s=await x(e);e==1&&(this.adminsList=[]),this.adminsList=window._.concat(this.adminsList,s.items),s.has_next_page?(this.loadmoreAdminsList=!0,this.currentPage++):this.loadmoreAdminsList=!1}catch(s){this.showError(s.error)}},handleClickTransferAdmin(){this.$dialog.open(P,{props:{header:this.$t("Transfer Admin Account"),modal:!0,dismissableMask:!0,draggable:!1}})},handleClickAddModerator(){this.$dialog.open(N,{props:{header:this.$t("Add Moderator"),modal:!0,dismissableMask:!0,draggable:!1},onClose:e=>{e.data&&this.adminsList.push(e.data.adminInfo)}})},async handleRemoveModerator(e){this.$confirm.require({message:this.$t("Do you want to remove this user?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await L(e),this.showSuccess(this.$t("Remove Successfully")),this.user.is_owner_page?this.adminsList=this.adminsList.filter(s=>s.id!==e):window.location.href=window.siteConfig.siteUrl}catch(s){this.showError(s.error)}}})}}},T={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},U={class:"flex flex-wrap items-center justify-between gap-2 mb-base-2"},E={class:"text-base-lg font-extrabold"},V={key:0,class:"users-list-item flex items-center gap-base-2 mb-base-2"},R={class:"flex-1 min-w-0"},j={key:0,class:"list_items_sub_text_color flex items-center text-xs text-sub-color dark:text-slate-400"},D={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},F={class:"flex flex-wrap items-center justify-between gap-2 mb-base-2"},O={class:"text-base-lg font-extrabold"},q={class:"flex-1 min-w-0"},z={key:0,class:"list_items_sub_text_color flex items-center text-xs text-sub-color dark:text-slate-400"},G=["onClick"],H={key:0,class:"text-center"};function I(e,s,J,K,m,d){const u=c("BaseButton"),_=c("Avatar"),b=c("UserName");return r(),o(g,null,[a("div",T,[a("div",U,[a("h3",E,i(e.$t("Admin")),1),e.user.is_owner_page?(r(),p(u,{key:0,onClick:s[0]||(s[0]=t=>d.handleClickTransferAdmin())},{default:h(()=>[f(i(e.$t("Transfer Page")),1)]),_:1})):n("",!0)]),e.user.page_owner?(r(),o("div",V,[l(_,{user:e.user.page_owner},null,8,["user"]),a("div",R,[l(b,{user:e.user.page_owner,class:"list_items_title_text_color"},null,8,["user"]),e.user.page_owner.show_follower?(r(),o("p",j,i(e.$filters.numberShortener(e.user.page_owner.follower_count,e.$t("[number] follower"),e.$t("[number] followers"))),1)):n("",!0)])])):n("",!0)]),a("div",D,[a("div",F,[a("h3",O,i(e.$t("Moderators")),1),e.user.is_owner_page?(r(),p(u,{key:0,onClick:s[1]||(s[1]=t=>d.handleClickAddModerator())},{default:h(()=>[f(i(e.$t("Add moderator")),1)]),_:1})):n("",!0)]),(r(!0),o(g,null,C(m.adminsList,t=>(r(),o("div",{key:t.id,class:"users-list-item flex items-center gap-base-2 mb-base-2 last:mb-0"},[l(_,{user:t},null,8,["user"]),a("div",q,[l(b,{user:t,class:"list_items_title_text_color"},null,8,["user"]),t.show_follower?(r(),o("p",z,i(e.$filters.numberShortener(t.follower_count,e.$t("[number] follower"),e.$t("[number] followers"))),1)):n("",!0)]),e.user.is_owner_page||e.user.parent.id===t.id?(r(),o("button",{key:0,onClick:Q=>d.handleRemoveModerator(t.id),class:"list_items_button text-xs text-primary-color cursor-pointer font-bold dark:text-dark-primary-color"},i(e.$t("Remove")),9,G)):n("",!0)]))),128)),m.loadmoreAdminsList?(r(),o("div",H,[l(u,{onClick:s[2]||(s[2]=t=>d.getAdminsList(m.currentPage))},{default:h(()=>[f(i(e.$t("View more")),1)]),_:1})])):n("",!0)])],64)}const Y=w(S,[["render",I]]);export{Y as default};
