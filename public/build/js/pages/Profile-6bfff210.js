import{_ as z,L as C,B as P,j as F,s as A,a as I,v as T,cd as M,b0 as D,b1 as j,m as y,p as E,ce as O,ad as R,r as n,o as d,c as u,F as h,b as t,t as a,d as o,g as Y,f as q,h as x,w as G,y as k,u as Z,cf as H,e as J,aZ as K}from"../../assets/app-8df99815.js";import{B as Q}from"./BaseCalendar-e4a0da98.js";import{B as W}from"./BaseSelectLocation-a004491b.js";import"./index.esm-3350796f.js";const X={components:{Loading:C,BaseButton:P,BaseIcon:F,BaseInputText:A,BaseSelect:I,BaseTextarea:T,BaseCalendar:Q,BaseSelectLocation:W,BaseSelectPrivacy:M,Avatar:D,UserName:j},data(){return{loadingStatus:!0,about:null,avatar:null,bio:null,gender_id:null,genders:[],links:null,name:null,timezone:null,timezones:[],birthday:null,error:{about:null,bio:null,gender_id:null,links:null,location:null,name:null,user_name:null,timezone:null,birthday:null,country_id:null,state_id:null,city_id:null,zip_code:null,address:null},privacyField:null,loadingSave:!1,pageName:null,pageUserName:null,location:{country_id:null,state_id:null,city_id:null,zip_code:null,address:null},privaciesList:[{icon:"globe",name:this.$t("Everyone"),value:1},{icon:"users",name:this.$t("My followers"),value:2},{icon:"lock",name:this.$t("Only me"),value:3}],originalName:""}},computed:{...y(k,["user"]),...y(Z,["config"])},mounted(){this.getProfileSettings()},methods:{...E(k,["storeProfileSettings","storeProfilePageSettings","updateUserMeInfo"]),async getProfileSettings(){if(this.user.is_page)this.pageName=this.user.name,this.pageUserName=this.user.user_name,this.originalName=this.user.name;else try{const s=await O();this.avatar=s.avatar,this.name=s.name,this.bio=s.bio,this.about=s.about,this.links=s.links.split(" "),this.gender_id=s.gender_id,this.genders=[{id:0,name:this.$t("Prefer not to say")},...s.genders],this.timezone=s.timezone,this.timezones=window._.map(s.timezones,function(e,m){return{key:e,value:m}}),this.birthday=s.birthday,this.location.country_id=s.country_id,this.location.state_id=s.state_id,this.location.city_id=s.city_id,this.location.zip_code=s.zip_code,this.location.address=s.address,this.loadingStatus=!1,this.privacyField=s.privacyField,this.originalName=s.name}catch{this.loadingStatus=!1}},async saveProfileSettings(){if(!this.loadingSave){this.loadingSave=!0;try{const s=async()=>{this.user.is_page?await this.storeProfilePageSettings({name:this.pageName,user_name:this.pageUserName}):(await this.storeProfileSettings({name:this.name,bio:this.bio,about:this.about,links:this.links.filter(e=>e!="").join(" "),gender_id:this.gender_id==0?null:this.gender_id,timezone:this.timezone,birthday:this.formatDateTime(this.birthday),country_id:this.location.country_id,state_id:this.location.state_id,city_id:this.location.city_id,zip_code:this.location.zip_code,address:this.location.address,privacyField:this.privacyField}),this.links.filter(e=>Object.keys(e).length!==0).length>0&&(this.links=this.links.filter(e=>Object.keys(e).length!==0))),this.showSuccess(this.$t("Your changes have been saved.")),this.resetErrors(this.error)};this.user.is_verify?this.name&&this.name!==this.originalName||this.pageName&&this.pageName!==this.originalName?this.$confirm.require({message:this.$t("You will lose your profile verification badge if you change your name. Do you want to continue?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{await s(),this.updateUserMeInfo({...this.user,is_verify:!1})},reject:()=>{this.name=this.originalName,this.pageName=this.originalName}}):await s():await s()}catch(s){this.handleApiErrors(this.error,s)}finally{this.loadingSave=!1}}},uploadAvatar(s){var e=s.target;if(e.files&&e.files[0]){var m=new FileReader;m.onload=v=>{const l=H(()=>K(()=>import("./UploadAvatarModal-6534132c.js"),["./UploadAvatarModal-6534132c.js","../../assets/app-8df99815.js","../../assets/app-0209511c.css","./style-a13dfc58.js","../../assets/style-790ea523.css"],import.meta.url));this.$dialog.open(l,{data:{imageData:v.target.result},props:{header:this.$t("Crop Avatar"),class:"crop-avatar-modal p-dialog-md",modal:!0},onClose:r=>{r.data&&(this.avatar=r.data.avatar),R()}})},m.readAsDataURL(e.files[0])}},onInputClick(s){s.target.value=null},addMoreLink(){this.error.links=null,this.links.push("")},removeMoreLink(s){this.links=this.links.filter((e,m)=>m!=s),this.links.length==0&&this.links.push("")}}},$={class:"flex flex-wrap gap-x-5 mb-3"},ee={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},le={class:"md:flex-2 w-full"},te={class:"flex flex-wrap gap-x-5 mb-3"},se={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},ie={class:"md:flex-2 w-full"},oe={key:1},ae={class:"flex gap-x-2 md:gap-x-5 mb-3"},ne={class:"md:flex-1 md:text-end mb-1"},re={class:"md:flex-2 flex flex-col items-start gap-1"},de={class:"flex flex-wrap gap-x-5 mb-3"},ue={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},me={class:"md:flex-2 w-full"},pe={class:"flex flex-wrap gap-x-5 mb-3"},ce={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},fe={class:"md:flex-2 w-full relative"},he={class:"flex flex-wrap gap-x-5 mb-3"},ve={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},ge={class:"md:flex-2 w-full relative"},_e={class:"flex flex-wrap gap-x-5 mb-3"},be={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},ye={class:"md:flex-2 w-full relative"},xe={class:"flex flex-wrap gap-x-5 mb-3"},ke={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},Ve={class:"md:flex-2 w-full relative"},we={class:"flex flex-wrap gap-x-5 mb-3"},Be={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},Se={class:"md:flex-2 w-full relative"},Ne={class:"flex flex-wrap gap-x-5 mb-3"},Ue={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},Le={class:"md:flex-2 w-full"},ze={class:"flex flex-wrap gap-x-5 mb-3"},Ce={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},Pe={class:"md:flex-2 w-full relative"},Fe=["onClick"],Ae={key:0,class:"block p-error mb-2"},Ie={class:"flex flex-wrap gap-x-5 mb-3"},Te={class:"md:flex-2 w-full"},Me={class:"text-sub-color text-xs italic dark:text-slate-400"},De={class:"flex flex-wrap gap-x-5"},je={class:"md:flex-2 w-full"};function Ee(s,e,m,v,l,r){const c=n("BaseInputText"),V=n("Loading"),w=n("Avatar"),B=n("UserName"),g=n("BaseTextarea"),p=n("BaseSelectPrivacy"),S=n("BaseSelectLocation"),_=n("BaseSelect"),N=n("BaseCalendar"),U=n("BaseIcon"),L=n("BaseButton");return d(),u(h,null,[s.user.is_page?(d(),u(h,{key:0},[t("div",$,[t("div",ee,[t("label",null,a(s.$t("Page Name")),1)]),t("div",le,[o(c,{modelValue:l.pageName,"onUpdate:modelValue":e[0]||(e[0]=i=>l.pageName=i),error:l.error.name},null,8,["modelValue","error"])])]),t("div",te,[t("div",se,[t("label",null,a(s.$t("Page Alias")),1)]),t("div",ie,[o(c,{modelValue:l.pageUserName,"onUpdate:modelValue":e[1]||(e[1]=i=>l.pageUserName=i),error:l.error.user_name},null,8,["modelValue","error"])])])],64)):(d(),u(h,{key:1},[l.loadingStatus?(d(),Y(V,{key:0})):(d(),u("div",oe,[t("div",ae,[t("div",ne,[o(w,{user:s.user,activePopover:!1,size:50,class:"ms-auto"},null,8,["user"])]),t("div",re,[o(B,{user:s.user},null,8,["user"]),t("button",{class:"text-xs font-bold text-primary-color dark:text-dark-primary-color",onClick:e[2]||(e[2]=i=>s.$refs.avatar.click())},a(s.$t("Change profile photo")),1),t("input",{type:"file",ref:"avatar",onChange:e[3]||(e[3]=i=>r.uploadAvatar(i)),onClick:e[4]||(e[4]=i=>r.onInputClick(i)),accept:"image/*",class:"hidden"},null,544)])]),t("div",de,[t("div",ue,[t("label",null,a(s.$t("Display Name")),1)]),t("div",me,[o(c,{modelValue:l.name,"onUpdate:modelValue":e[5]||(e[5]=i=>l.name=i),error:l.error.name},null,8,["modelValue","error"])])]),t("div",pe,[t("div",ce,[t("label",null,a(s.$t("Bio")),1)]),t("div",fe,[o(g,{modelValue:l.bio,"onUpdate:modelValue":e[6]||(e[6]=i=>l.bio=i),autoResize:!0,error:l.error.bio},null,8,["modelValue","error"]),o(p,{modelValue:l.privacyField.bio,"onUpdate:modelValue":e[7]||(e[7]=i=>l.privacyField.bio=i),options:l.privaciesList,class:"absolute top-0 -end-9"},null,8,["modelValue","options"])])]),t("div",he,[t("div",ve,[t("label",null,a(s.$t("About")),1)]),t("div",ge,[o(g,{modelValue:l.about,"onUpdate:modelValue":e[8]||(e[8]=i=>l.about=i),autoResize:!0,error:l.error.about},null,8,["modelValue","error"]),o(p,{modelValue:l.privacyField.about,"onUpdate:modelValue":e[9]||(e[9]=i=>l.privacyField.about=i),options:l.privaciesList,class:"absolute top-0 -end-9"},null,8,["modelValue","options"])])]),t("div",_e,[t("div",be,[t("label",null,a(s.$t("Location")),1)]),t("div",ye,[o(S,{modelValue:l.location,"onUpdate:modelValue":e[10]||(e[10]=i=>l.location=i),"show-label":!1,error:l.error},null,8,["modelValue","error"]),o(p,{modelValue:l.privacyField.location,"onUpdate:modelValue":e[11]||(e[11]=i=>l.privacyField.location=i),options:l.privaciesList,class:"absolute top-0 -end-9"},null,8,["modelValue","options"])])]),t("div",xe,[t("div",ke,[t("label",null,a(s.$t("Gender")),1)]),t("div",Ve,[o(_,{modelValue:l.gender_id,"onUpdate:modelValue":e[12]||(e[12]=i=>l.gender_id=i),options:l.genders,optionLabel:"name",optionValue:"id",error:l.error.gender_id},null,8,["modelValue","options","error"]),o(p,{modelValue:l.privacyField.gender_id,"onUpdate:modelValue":e[13]||(e[13]=i=>l.privacyField.gender_id=i),options:l.privaciesList,class:"absolute top-0 -end-9"},null,8,["modelValue","options"])])]),t("div",we,[t("div",Be,[t("label",null,a(s.$t("Birthday")),1)]),t("div",Se,[o(N,{modelValue:l.birthday,"onUpdate:modelValue":e[14]||(e[14]=i=>l.birthday=i),error:l.error.birthday},null,8,["modelValue","error"]),o(p,{modelValue:l.privacyField.birthday,"onUpdate:modelValue":e[15]||(e[15]=i=>l.privacyField.birthday=i),options:l.privaciesList,class:"absolute top-0 -end-9"},null,8,["modelValue","options"])])]),t("div",Ne,[t("div",Ue,[t("label",null,a(s.$t("Timezone")),1)]),t("div",Le,[o(_,{modelValue:l.timezone,"onUpdate:modelValue":e[16]||(e[16]=i=>l.timezone=i),options:l.timezones,optionLabel:"key",optionValue:"value",error:l.error.timezone},null,8,["modelValue","options","error"])])]),t("div",ze,[t("div",Ce,[t("label",null,a(s.$t("Link")),1)]),t("div",Pe,[o(p,{modelValue:l.privacyField.link,"onUpdate:modelValue":e[17]||(e[17]=i=>l.privacyField.link=i),options:l.privaciesList,class:"absolute top-0 -end-9"},null,8,["modelValue","options"]),(d(!0),u(h,null,q(l.links,(i,f)=>(d(),u("div",{key:f,class:"flex items-center gap-base-2 mb-3"},[o(c,{modelValue:l.links[f],"onUpdate:modelValue":b=>l.links[f]=b},null,8,["modelValue","onUpdate:modelValue"]),l.links.length>1?(d(),u("button",{key:0,onClick:b=>r.removeMoreLink(f)},[o(U,{name:"close",class:"text-base-red"})],8,Fe)):x("",!0)]))),128)),l.error.links?(d(),u("small",Ae,a(l.error.links),1)):x("",!0),t("button",{class:"block text-xs font-bold text-primary-color dark:text-dark-primary-color",onClick:e[18]||(e[18]=(...i)=>r.addMoreLink&&r.addMoreLink(...i))},a(s.$t("Add more link")),1)])]),t("div",Ie,[e[20]||(e[20]=t("div",{class:"md:flex-1 md:text-end w-full mb-1"},null,-1)),t("div",Te,[t("div",Me,a(s.$t("* Field privacy setting will apply for the 'Info' tab in your profile. If it's Only me, it does not show there.")),1)])])]))],64)),t("div",De,[e[21]||(e[21]=t("div",{class:"md:flex-1 md:text-end w-full"},null,-1)),t("div",je,[o(L,{loading:l.loadingSave,onClick:e[19]||(e[19]=i=>r.saveProfileSettings()),class:"w-full"},{default:G(()=>[J(a(s.$t("Save")),1)]),_:1},8,["loading"])])])],64)}const Ge=z(X,[["render",Ee]]);export{Ge as default};
