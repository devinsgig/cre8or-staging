import{_ as x,B as I,s as D,v as A,dv as S,r as h,o as s,c as l,b as t,t as i,d as u,w as v,e as k,dw as M,F as f,f as _,b0 as V,j as P,b2 as L,cT as j,a8 as H,m as w,bD as B,u as N,p as z,dx as O,dy as U,g as b,h as c,Q as q}from"../../assets/app-8df99815.js";import{B as F,E as Y,a as Q}from"./BoxItem-ffbaca72.js";import{S as J}from"./SelectCategoriesModal-c855a87b.js";import{B as K}from"./BaseRadio-b63270a2.js";import{R as W}from"./RuleItem-ebb1b7c5.js";import"./BaseSelectHashtags-4e8385d1.js";const X={components:{BaseButton:I,BaseInputText:D,BaseTextarea:A},data(){var e;return{ruleId:(e=this.dialogRef.data)==null?void 0:e.id,groupId:this.dialogRef.data.groupId,ruleTitle:this.dialogRef.data.title,ruleDescription:this.dialogRef.data.description}},inject:["dialogRef"],methods:{async handleSaveRule(){try{await S({id:this.ruleId,group_id:this.groupId,title:this.ruleTitle,description:this.ruleDescription}),this.dialogRef.close()}catch(e){this.showError(e.error)}}}},Z={class:"flex flex-col gap-base-2"},ee={class:"mb-base-1"},te={class:"mb-base-1"};function se(e,n,d,C,o,a){const y=h("BaseInputText"),p=h("BaseTextarea"),m=h("BaseButton");return s(),l("div",Z,[t("div",null,[t("label",ee,i(e.$t("Title")),1),u(y,{modelValue:o.ruleTitle,"onUpdate:modelValue":n[0]||(n[0]=g=>o.ruleTitle=g)},null,8,["modelValue"])]),t("div",null,[t("label",te,i(e.$t("Description")),1),u(p,{modelValue:o.ruleDescription,"onUpdate:modelValue":n[1]||(n[1]=g=>o.ruleDescription=g)},null,8,["modelValue"])]),u(m,{class:"w-full",onClick:a.handleSaveRule},{default:v(()=>[k(i(e.$t("Save")),1)]),_:1},8,["onClick"])])}const G=x(X,[["render",se]]),oe={components:{BaseRadio:K,BaseButton:I},inject:["dialogRef"],data(){return{typesList:[{value:0,label:this.$t("Public Group"),description:this.$t("Everyone can join")},{value:1,label:this.$t("Closed Group"),description:this.$t("Everyone can join but need approval from admins. Private groups can't be changed to public to protect the privacy of group members")}],groupId:this.dialogRef.data.groupId,groupType:this.dialogRef.data.groupType}},methods:{async handleSelectPrivacy(){try{await M(this.groupId),this.dialogRef.close({type:this.groupType}),this.showSuccess(this.$t("Your changes have been saved."))}catch(e){this.showError(e.error)}}}},ae={class:"flex flex-col gap-base-2"},ie=["for"],re={class:"font-bold leading-5"},le={class:"text-sub-color text-base-xs dark:text-slate-400"};function ne(e,n,d,C,o,a){const y=h("BaseRadio"),p=h("BaseButton");return s(),l("div",ae,[(s(!0),l(f,null,_(o.typesList,m=>(s(),l("div",{key:m.value,class:"flex gap-base-2"},[u(y,{modelValue:o.groupType,"onUpdate:modelValue":n[0]||(n[0]=g=>o.groupType=g),inputId:m.value,name:"group_type",value:m.value},null,8,["modelValue","inputId","value"]),t("label",{for:m.value,class:"flex-1"},[t("div",re,i(m.label),1),t("div",le,i(m.description),1)],8,ie)]))),128)),u(p,{disabled:o.groupType===0,onClick:a.handleSelectPrivacy},{default:v(()=>[k(i(e.$t("Save")),1)]),_:1},8,["disabled","onClick"])])}const de=x(oe,[["render",ne]]),ue={props:["groupInfo"],components:{Avatar:V,BaseButton:I,BaseIcon:P,ContentHtml:L,Draggable:j,RuleItem:W,BoxItem:F},data(){return{description:this.groupInfo.description,categories:this.groupInfo.categories,hashtags:this.groupInfo.hashtags,type:this.groupInfo.type,typeText:this.groupInfo.type_text,constant:H}},computed:{...w(B,["groupRulesList"]),...w(N,["isMobile"]),isGroupAdmin(){return this.groupInfo.is_admin}},methods:{...z(B,["handleGetGroupRules"]),handleEditDescription(){this.$dialog.open(Y,{data:{descriptionData:{content:this.description,subject_id:this.groupInfo.id,subject_type:"group"}},props:{header:this.$t("Edit Description"),modal:!0,dismissableMask:!0,draggable:!1},onClose:e=>{e.data&&(this.description=e.data.description)}})},handleEditCategories(){this.$dialog.open(J,{data:{categoriesData:{selected_category_ids:this.categories.map(e=>e.id),subject_id:this.groupInfo.id,subject_type:"group",selected_type:"save"}},props:{header:this.$t("Select Categories"),class:"select-categories-modal",modal:!0,dismissableMask:!0,draggable:!1},onClose:async e=>{e.data&&(this.categories=e.data.selectedCategoriesList)}})},handleEditHashtags(){this.$dialog.open(Q,{data:{hashtagsData:{selectedHashtags:this.hashtags,subject_id:this.groupInfo.id,subject_type:"group"}},props:{header:this.$t("Select Hashtags"),modal:!0,dismissableMask:!0,draggable:!1},onClose:async e=>{e.data&&(this.hashtags=e.data.hashtags)}})},privacyIcon(e){switch(e){case 1:return"lock";default:return"earth"}},handleEditPrivacyGroup(){this.$dialog.open(de,{data:{groupId:this.groupInfo.id,groupType:this.type},props:{header:this.$t("Select Type"),modal:!0,dismissableMask:!0,draggable:!1},onClose:e=>{e.data&&(this.type=e.data.type,this.typeText=this.$t("Private"))}})},handleEditNewRule(e){this.$dialog.open(G,{data:{id:e.id,groupId:this.groupInfo.id,title:e.title,description:e.description},props:{header:this.$t("Add Rule"),modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{this.handleGetGroupRules(this.groupInfo.id)}})},handleCreateNewRule(){this.$dialog.open(G,{data:{groupId:this.groupInfo.id},props:{header:this.$t("Add Rule"),modal:!0,dismissableMask:!0,draggable:!1},onClose:()=>{this.handleGetGroupRules(this.groupInfo.id)}})},async handleOrderRule(){try{await O({group_id:this.groupInfo.id,orders:this.groupRulesList.map(e=>e.id)}),this.handleGetGroupRules(this.groupInfo.id)}catch(e){this.showError(e.error)}},handleDeleteRule(e){this.$confirm.require({message:this.$t("Do you want to remove this rule?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await U(e),this.handleGetGroupRules(this.groupInfo.id)}catch(n){this.showError(n.error)}}})}}},ce={class:"main-content-section bg-white p-5 mb-base-2 rounded-none md:rounded-base-lg dark:bg-slate-800"},pe={class:"flex flex-col gap-base-2"},he={class:"text-main-color text-base-lg font-extrabold dark:text-white"},me={key:0},ge={class:"font-bold mb-base-2"},be={class:"flex items-start gap-base-2"},fe={class:"flex-1"},_e={key:1},ye={class:"font-bold mb-base-2"},ve={key:0,class:"flex flex-wrap items-start gap-2 mt-base-2"},ke={class:"boxes-list flex flex-wrap gap-base-2 flex-1"},xe={key:2},Ie={class:"font-bold mb-base-2"},Ce={key:0,class:"flex flex-wrap items-start gap-2 mt-base-2"},Re={class:"boxes-list flex flex-wrap gap-base-2 flex-1"},we={class:"font-bold mb-base-2"},Be={class:"flex flex-wrap gap-2 mt-base-2"},Ge={class:"flex-1 flex items-center gap-base-1"},Te={class:"main-content-section bg-white p-5 mb-base-2 rounded-none md:rounded-base-lg dark:bg-slate-800"},Ee={class:"flex flex-col gap-base-2"},$e={class:"text-main-color text-base-lg font-extrabold dark:text-white"},De={class:"flex flex-col gap-base-2"},Ae={class:"flex gap-base-2"},Se={class:"font-medium"},Me={class:"text-base-xs leading-tight text-sub-color dark:text-slate-400"},Ve={class:"flex gap-base-2"},Pe={class:"font-medium"},Le={class:"text-base-xs leading-tight text-sub-color dark:text-slate-400"},je={class:"flex gap-base-2"},He={class:"font-medium"},Ne={key:0,class:"main-content-section bg-white p-5 mb-base-2 rounded-none md:rounded-base-lg dark:bg-slate-800"},ze={class:"text-main-color text-base-lg font-extrabold dark:text-white mb-base-2"},Oe={class:"flex gap-2"},Ue={key:1,class:"main-content-section bg-white p-5 mb-base-2 rounded-none md:rounded-base-lg dark:bg-slate-800"},qe={class:"flex flex-col gap-base-2"},Fe={class:"text-main-color text-base-lg font-extrabold dark:text-white"},Ye={class:"flex gap-base-2"};function Qe(e,n,d,C,o,a){const y=h("ContentHtml"),p=h("BaseButton"),m=h("BoxItem"),g=h("BaseIcon"),T=h("Avatar"),R=h("RuleItem"),E=h("Draggable");return s(),l(f,null,[t("div",ce,[t("div",pe,[t("h3",he,i(e.$t("Info")),1),o.description||a.isGroupAdmin?(s(),l("div",me,[t("div",ge,i(e.$t("Description")),1),t("div",be,[o.description?(s(),l(f,{key:0},[t("div",fe,[u(y,{content:o.description},null,8,["content"])]),a.isGroupAdmin?(s(),b(p,{key:0,onClick:n[0]||(n[0]=r=>a.handleEditDescription()),icon:"pencil",type:"secondary-outlined",size:"sm"})):c("",!0)],64)):(s(),l("button",{key:1,class:"block text-xs text-primary-color dark:text-dark-primary-color",onClick:n[1]||(n[1]=r=>a.handleEditDescription())},i(e.$t("Add Description")),1))])])):c("",!0),o.categories.length||a.isGroupAdmin?(s(),l("div",_e,[t("div",ye,i(e.$t("Categories")),1),o.categories.length?(s(),l("div",ve,[t("div",ke,[(s(!0),l(f,null,_(o.categories,r=>(s(),b(m,{key:r.id,item:r,to:{name:"groups",params:{tab:"all"},query:{category_id:r.id}}},null,8,["item","to"]))),128))]),a.isGroupAdmin?(s(),b(p,{key:0,onClick:n[2]||(n[2]=r=>a.handleEditCategories()),icon:"pencil",type:"secondary-outlined",size:"sm"})):c("",!0)])):o.categories.length===0&&a.isGroupAdmin?(s(),l("button",{key:1,class:"block text-xs text-primary-color dark:text-dark-primary-color",onClick:n[3]||(n[3]=r=>a.handleEditCategories())},i(e.$t("Add Categories")),1)):c("",!0)])):c("",!0),o.hashtags.length||a.isGroupAdmin?(s(),l("div",xe,[t("div",Ie,i(e.$t("Hashtags")),1),o.hashtags.length?(s(),l("div",Ce,[t("div",Re,[(s(!0),l(f,null,_(o.hashtags,r=>(s(),b(m,{key:r.name,item:r,to:{name:"search",params:{search_type:"hashtag",type:"group"},query:{q:r.name}}},null,8,["item","to"]))),128))]),a.isGroupAdmin?(s(),b(p,{key:0,onClick:n[4]||(n[4]=r=>a.handleEditHashtags()),icon:"pencil",type:"secondary-outlined",size:"sm"})):c("",!0)])):o.hashtags.length===0&&a.isGroupAdmin?(s(),l("button",{key:1,class:"block text-xs text-primary-color dark:text-dark-primary-color",onClick:n[5]||(n[5]=r=>a.handleEditHashtags())},i(e.$t("Add Hashtags")),1)):c("",!0)])):c("",!0),t("div",null,[t("div",we,i(e.$t("Group Privacy")),1),t("div",Be,[t("div",Ge,[u(g,{name:a.privacyIcon(o.type)},null,8,["name"]),t("span",null,i(o.typeText),1)]),a.isGroupAdmin&&o.type===o.constant.GROUP_TYPE.PUBLIC?(s(),b(p,{key:0,onClick:a.handleEditPrivacyGroup,icon:"pencil",type:"secondary-outlined",size:"sm"},null,8,["onClick"])):c("",!0)])])])]),t("div",Te,[t("div",Ee,[t("h3",$e,i(e.$t("Activities")),1),t("div",De,[t("div",Ae,[u(g,{name:"message",cursor:!1}),t("div",null,[t("div",Se,i(e.$filters.numberShortener(d.groupInfo.statistics.post_recent_count,e.$t("[number] post recently"),e.$t("[number] posts recently"))),1),t("div",Me,i(e.$filters.numberShortener(d.groupInfo.statistics.post_this_month_count,e.$t("[number] post this month"),e.$t("[number] posts this month"))),1)])]),t("div",Ve,[u(g,{name:"users",cursor:!1}),t("div",null,[t("div",Pe,i(e.$filters.numberShortener(d.groupInfo.member_count,e.$t("[number] total member"),e.$t("[number] total members"))),1),t("div",Le,i(e.$filters.numberShortener(d.groupInfo.statistics.member_last_week_count,e.$t("[number] member in the last week"),e.$t("[number] members in the last week"))),1)])]),t("div",je,[u(g,{name:"clock",cursor:!1}),t("div",He,i(e.$t("Created")+" "+d.groupInfo.created_at),1)])])])]),d.groupInfo.members.length?(s(),l("div",Ne,[t("h3",ze,i(e.$t("Members")+" · "+e.shortenNumber(d.groupInfo.member_count)),1),t("div",Oe,[(s(!0),l(f,null,_(d.groupInfo.members,r=>(s(),b(T,{key:r.id,user:r,size:50},null,8,["user"]))),128))]),d.groupInfo.canView?(s(),b(p,{key:0,to:{name:"group_profile",params:{id:d.groupInfo.id,slug:d.groupInfo.slug,tab:"members"}},type:"outlined",class:"w-full mt-base-2"},{default:v(()=>[k(i(e.$t("View all")),1)]),_:1},8,["to"])):c("",!0)])):c("",!0),e.groupRulesList.length||d.groupInfo.is_owner?(s(),l("div",Ue,[t("div",qe,[t("h3",Fe,i(e.$t("Group rules")),1),d.groupInfo.is_owner?(s(),l(f,{key:0},[u(E,{list:e.groupRulesList,disabled:e.isMobile,onChange:a.handleOrderRule},{default:v(()=>[(s(!0),l(f,null,_(e.groupRulesList,r=>(s(),l("div",{key:r.id,class:q(["flex items-start gap-3 mb-base-2 last:mb-0",{"cursor-move":!e.isMobile}])},[e.isMobile?c("",!0):(s(),b(g,{key:0,name:"dots_six_vertical"})),u(R,{item:r,class:"flex-1"},null,8,["item"]),t("div",Ye,[u(p,{onClick:$=>a.handleDeleteRule(r.id),icon:"trash",type:"danger-outlined",size:"sm"},null,8,["onClick"]),u(p,{onClick:$=>a.handleEditNewRule(r),icon:"pencil",type:"secondary-outlined",size:"sm"},null,8,["onClick"])])],2))),128))]),_:1},8,["list","disabled","onChange"]),u(p,{class:"w-full",onClick:a.handleCreateNewRule},{default:v(()=>[k(i(e.$t("Create New Rule")),1)]),_:1},8,["onClick"])],64)):(s(!0),l(f,{key:1},_(e.groupRulesList,r=>(s(),b(R,{key:r.id,item:r},null,8,["item"]))),128))])])):c("",!0)],64)}const tt=x(ue,[["render",Qe]]);export{tt as default};
