import{_ as V,B as k,j as B,m as b,u as I,y as x,r as m,o as r,c,b as s,t as o,d,w as p,e as _,F as g,f as v,h as w}from"../../assets/app-8df99815.js";import{B as $}from"./BaseInputFile-e520513a.js";function F(){return window.axios.get("user_verify/get_files").then(e=>e.data.data)}function S(e){return window.axios.post("user_verify/upload_file",e).then(t=>t.data.data)}function C(e){return window.axios.post("user_verify/delete_file",e).then(t=>t.data.data)}function E(e){return window.axios.post("user_verify/store_request",e).then(t=>t.data.data)}const q={components:{BaseButton:k,BaseIcon:B,BaseInputFile:$},data(){return{myVerificationDocuments:[],uploadedVerificationDocuments:[]}},mounted(){this.config.userVerifyEnable&&!this.user.is_verify?this.getMyVerificationDocuments():this.$router.push({name:"home"})},computed:{...b(I,["config"]),...b(x,["user"])},methods:{async getMyVerificationDocuments(){try{const e=await F();this.myVerificationDocuments=e}catch(e){this.showError(e.error)}},async uploadVerificationDocuments(e){this.startUploadImages(e.target.files)},async startUploadImages(e,t){typeof t>"u"&&(t=!1);for(var i=0;i<e.length;i++)if(!(t&&e[i].type.indexOf("image")==-1)){var h=!0;if(t||(h=this.checkUploadedData(e[i],"user_verify")),h){let u=new FormData;var n=e[i];t&&(n=e[i].getAsFile()),u.append("file",n);try{const l=await S(u);this.uploadedVerificationDocuments.push(l)}catch(l){this.showError(l.error)}}}},async removeDocument(e){try{await C({id:e}),this.uploadedVerificationDocuments=this.uploadedVerificationDocuments.filter(t=>t.id!==e)}catch(t){this.showError(t.error)}},async storeDocuments(){try{await E({files:this.uploadedVerificationDocuments.map(e=>e.id)}),this.myVerificationDocuments=[...this.myVerificationDocuments,...this.uploadedVerificationDocuments],this.uploadedVerificationDocuments=[],this.showSuccess(this.$t("Your request has been submitted.")),this.$refs.baseInputFile.clearSelectedFile()}catch(e){this.showError(e.error)}}}},T={class:"main-content-section bg-white rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800"},U={class:"flex flex-wrap items-center justify-between gap-1 mb-base-2"},N={class:"text-main-color text-base-lg font-extrabold dark:text-white"},A={class:"mb-base-2"},M={class:"mb-base-2"},j={class:"text-base font-bold mb-base-2"},H={class:"list-disc ps-5"},z={key:0},L={class:"flex items-center gap-base-2 mb-base-2"},O=["href"],R={key:1},Y={class:"flex items-center gap-base-2 mb-base-2"},G=["href"],J=["onClick"],K={class:"flex gap-base-2"};function P(e,t,i,h,n,u){const l=m("BaseInputFile"),D=m("BaseIcon"),y=m("BaseButton");return r(),c("div",T,[s("div",U,[s("h3",N,o(e.$t("Request Identity Verification")),1)]),s("p",A,o(e.$t("The Verified badge lets people know that an account is authentic. To receive the verified badge, please submit the verification documents such as a driver's license, ID card, passport... if you're a business please submit company registration number. The information in the document must be matched to the information on your account. Information shared will only be used for verification purpose and will auto delete after the request is processed.")),1),s("div",M,[s("h4",j,o(e.$t("How to take the photos")),1),s("ul",H,[s("li",null,o(e.$t("Take the photos in a room with enough light")),1),s("li",null,o(e.$t("Select the highest quality setting on your device")),1),s("li",null,o(e.$t("Have your driver's license, ID card or passport on hand")),1),s("li",null,o(e.$t("Make sure that your whole document is in the frame, as well as your face - nothing can be censored")),1)])]),s("div",null,[d(l,{ref:"baseInputFile",onUploadFile:u.uploadVerificationDocuments,multiple:"",accept:"*/*",class:"mb-2"},{default:p(()=>[_(o(e.$t("Upload Verification Documents")),1)]),_:1},8,["onUploadFile"]),n.myVerificationDocuments.length>0?(r(),c("div",z,[(r(!0),c(g,null,v(n.myVerificationDocuments,(a,f)=>(r(),c("div",{key:f},[s("div",L,[s("a",{href:a.file_url,target:"_blank"},o(a.name),9,O)])]))),128))])):w("",!0),n.uploadedVerificationDocuments.length>0?(r(),c("div",R,[(r(!0),c(g,null,v(n.uploadedVerificationDocuments,(a,f)=>(r(),c("div",{key:f},[s("div",Y,[s("a",{href:a.file_url,target:"_blank"},o(a.name),9,G),s("button",{onClick:Q=>u.removeDocument(a.id)},[d(D,{name:"close",class:"text-base-red",size:"20"})],8,J)])]))),128))])):w("",!0)]),s("div",K,[d(y,{onClick:t[0]||(t[0]=a=>u.storeDocuments())},{default:p(()=>[_(o(e.$t("Submit")),1)]),_:1}),d(y,{type:"outlined",to:{name:"home"}},{default:p(()=>[_(o(e.$t("Cancel")),1)]),_:1})])])}const Z=V(q,[["render",P]]);export{Z as default};
