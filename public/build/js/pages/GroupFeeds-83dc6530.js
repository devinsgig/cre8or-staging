import{_ as L,B as x,j as v,bU as C,m as f,ak as P,bD as w,a8 as G,p as _,r as h,o as s,c as n,d as c,F as u,g as b,w as l,f as F,t as a,h as g,e as S,b as p}from"../../assets/app-8df99815.js";import{P as V}from"./PostsList-f3c51b69.js";import{P as M}from"./PostStatusBoxHolder-8d10069b.js";import"./SkeletonPostsList-68921a0e.js";import"./PostDetailModal-69941281.js";import"./PostContent-93850f8e.js";const N={props:["groupInfo"],components:{PostsList:V,PostStatusBoxHolder:M,BaseButton:x,BaseIcon:v,SlimScroll:C},computed:{...f(P,["postsList","loadingPostsList","pinnedPostFlag"]),...f(w,["searchKeyword","searchType"]),postsListKey(){return this.currentKeyword?this.currentKeyword:this.currentHashtag?this.currentHashtag:"all"}},data(){return{currentPage:1,currentHashtag:"",currentKeyword:"",hashtagChar:G.HASHTAG}},watch:{searchType:"updateFeedsByKeyword",searchKeyword:"updateFeedsByKeyword",groupInfo(){this.groupInfo.canView&&this.updateFeedsByKeyword()},pinnedPostFlag(){this.groupInfo.canView&&this.updateFeedsByKeyword()}},mounted(){this.groupInfo.canView&&this.updateFeedsByKeyword(),this.setCurrentPostPage("group")},unmounted(){this.unsetPostsList(),this.setCurrentPostPage(),this.resetSearch()},methods:{..._(P,["getGroupPostsList","unsetPostsList","setCurrentPostPage","getGroupPostsListWithHashtag","getSearchGroupPosts"]),..._(w,["resetSearch"]),loadMorePosts(e){this.currentKeyword?this.getSearchGroupPosts(this.groupInfo.id,this.currentKeyword,++this.currentPage).then(r=>{r.length===0?e.complete():e.loaded()}):this.currentHashtag?this.getGroupPostsListWithHashtag(this.groupInfo.id,this.currentHashtag,++this.currentPage).then(r=>{r.length===0?e.complete():e.loaded()}):this.getGroupPostsList(this.groupInfo.id,++this.currentPage).then(r=>{r.length===0?e.complete():e.loaded()})},handleSelectHashtag(e){this.currentKeyword="",this.currentHashtag=e,this.currentPage=1,this.getGroupPostsListWithHashtag(this.groupInfo.id,e,this.currentPage)},handleSelectKeyword(e){this.currentHashtag="",this.currentKeyword=e,this.currentPage=1,this.getSearchGroupPosts(this.groupInfo.id,e,this.currentPage)},handleRemoveSelected(){this.currentKeyword="",this.currentHashtag="",this.currentPage=1,this.getGroupPostsList(this.groupInfo.id,this.currentPage)},updateFeedsByKeyword(){this.searchKeyword?this.searchType==="hashtag"?this.handleSelectHashtag(this.searchKeyword):this.handleSelectKeyword(this.searchKeyword):this.handleRemoveSelected()}}},T={key:0,class:"leading-none my-5 px-base-2 md:px-0"},R=["onClick"],j={key:1,class:"flex items-center bg-web-wash rounded-none md:rounded-base-lg p-4 mb-base-2 dark:bg-dark-web-wash"},A={class:"flex-1 font-bold"},W={class:"main-content-section bg-white border border-white text-main-color p-10 text-center rounded-none mb-base-2 md:rounded-base-lg dark:bg-slate-800 dark:border-slate-800 dark:text-white"},D={class:"text-base-lg font-bold"};function E(e,r,o,U,t,i){var m,y;const K=h("PostStatusBoxHolder"),k=h("SlimScroll"),B=h("BaseIcon"),H=h("BaseButton"),I=h("PostsList");return s(),n(u,null,[c(K,{"post-from":"groups",subject:o.groupInfo},null,8,["subject"]),o.groupInfo.hashtag_trending.length||t.currentHashtag||t.currentKeyword?(s(),n("div",T,[!t.currentHashtag&&!t.currentKeyword?(s(),n(u,{key:0},[o.groupInfo.hashtag_trending.length?(s(),b(k,{key:0},{default:l(()=>[(s(!0),n(u,null,F(o.groupInfo.hashtag_trending,d=>(s(),n("button",{key:d.name,onClick:q=>i.handleSelectHashtag(d.name),class:"text-primary-color font-semibold mx-2 first:ms-0 cursor-pointer dark:text-dark-primary-color"},a(t.hashtagChar+d.name),9,R))),128))]),_:1})):g("",!0)],64)):(s(),n("div",{key:1,class:"inline-flex gap-base-2 items-center text-primary-color font-bold text-base cursor-pointer dark:text-dark-primary-color",onClick:r[0]||(r[0]=(...d)=>i.handleRemoveSelected&&i.handleRemoveSelected(...d))},[c(B,{name:"caret_left",class:"text-main-color dark:text-white rtl:-rotate-180"}),S(" "+a(t.currentKeyword&&t.currentKeyword)+" "+a(t.currentHashtag&&t.hashtagChar+t.currentHashtag),1)]))])):g("",!0),(m=o.groupInfo)!=null&&m.user_post_pending_count?(s(),n("div",j,[p("div",A,a(e.$filters.numberShortener((y=o.groupInfo)==null?void 0:y.user_post_pending_count,e.$t("[number] pending post"),e.$t("[number] pending posts"))),1),c(H,{to:{name:"groups_user_manage",params:{id:o.groupInfo.id}}},{default:l(()=>[S(a(e.$t("Manage post")),1)]),_:1},8,["to"])])):g("",!0),(s(),b(I,{key:i.postsListKey,loading:e.loadingPostsList,"posts-list":e.postsList,onLoadMore:i.loadMorePosts},{empty:l(()=>[p("div",W,[p("div",D,a(e.$t("Nothing to see here yet")),1)])]),_:1},8,["loading","posts-list","onLoadMore"]))],64)}const Z=L(N,[["render",E]]);export{Z as default};
