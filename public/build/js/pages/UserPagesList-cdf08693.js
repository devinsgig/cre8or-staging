import{_ as x,br as C,r as d,o as t,c as s,F as c,f as y,b as i,d as l,b0 as P,b1 as D,B as I,aB as M,m as L,p as U,I as v,y as V,bK as $,g as p,S as z,w as h,e as m,t as n,h as w,aC as E}from"../../assets/app-8df99815.js";const q={components:{Skeleton:C},props:{itemNumber:{type:Number,default:2}}},K={class:"grid grid-cols-1 md:grid-cols-2 gap-base-2"},R={class:"block pb-[35%] relative overflow-hidden rounded-t-lg"},T={class:"absolute inset-0"},Y={class:"p-base-2"},j={class:"flex gap-4 mb-base-2"},G={class:"flex flex-col gap-2"};function H(e,o,u,S,k,_){const r=d("Skeleton");return t(),s("div",K,[(t(!0),s(c,null,y(u.itemNumber,g=>(t(),s("div",{key:g,class:"rounded-lg border border-divider dark:border-white/10 bg-white h-full dark:bg-slate-800"},[i("div",R,[i("div",T,[l(r,{height:"100%",width:"100%",class:"rounded-none"})])]),i("div",Y,[i("div",j,[l(r,{shape:"circle",size:"3.125rem",class:"flex-shrink-0"}),i("div",G,[l(r,{height:"1.25rem",width:"15rem"}),l(r,{width:"10rem"}),l(r,{width:"10rem"})])]),l(r,{width:"100%",height:"2.25rem"})])]))),128))])}const J=x(q,[["render",H]]),O={components:{Avatar:P,UserName:D,BaseButton:I,SkeletonPagesList:J,InfiniteLoading:M},props:{pagesList:{type:Array,default:null},loading:{type:Boolean,default:!0},hasLoadMore:{type:Boolean,default:!0},autoLoadMore:{type:Boolean,default:!1}},data(){return{pagesListData:window._.clone(this.pagesList)}},computed:{...L(V,["authenticated"]),...L($,["userAction"])},watch:{userAction(){this.pagesListData.map(e=>(e.id===this.userAction.pageId&&(this.userAction.status==="follow"?e.is_followed=!0:this.userAction.status==="unfollow"&&(e.is_followed=!1)),e))},pagesList(){this.pagesListData=window._.clone(this.pagesList)}},methods:{...U($,["updateFollowStatus"]),async followPage(e){if(this.authenticated)try{await v({id:e.id,action:"follow"}),this.pagesListData.map(o=>(o.id===e.id&&(o.is_followed=!0),o)),this.updateFollowStatus({pageId:e.id,status:"follow"}),this.$emit("follow_page",e)}catch(o){this.showError(o.error)}else this.showRequireLogin()},async unFollowPage(e){try{await v({id:e.id,action:"unfollow"}),this.pagesListData.map(o=>(o.id===e.id&&(o.is_followed=!1),o)),this.updateFollowStatus({pageId:e.id,status:"unfollow"}),this.$emit("unfollow_page",e)}catch(o){this.showError(o.error)}},handleLoadmore(){this.hasLoadMore&&this.$emit("load-more")},handleLoadInfinite(e){this.hasLoadMore&&this.autoLoadMore&&this.$emit("load-more",e)}},emits:["follow_page","unfollow_page","load-more"]},Q={class:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-base-2"},W={class:"p-base-2"},X={class:"flex gap-4"},Z={class:"flex-1 min-w-0"},ee={class:"flex flex-wrap gap-2 items-center mb-1"},te={key:0,class:"grid-item-sub text-xs mb-1 truncate text-sub-color dark:text-slate-400"},se={key:1,class:"grid-item-sub text-xs text-sub-color dark:text-slate-400"},oe={key:0,class:"mt-base-2"},ae={key:0,class:"text-center mt-4"},ie={key:1,class:"text-center"};function le(e,o,u,S,k,_){const r=d("SkeletonPagesList"),g=d("router-link"),B=d("Avatar"),A=d("UserName"),b=d("BaseButton"),F=d("InfiniteLoading");return u.loading?(t(),p(r,{key:0})):(t(),s(c,{key:1},[k.pagesListData.length?(t(),s(c,{key:0},[i("div",Q,[(t(!0),s(c,null,y(k.pagesListData,a=>(t(),s("div",{key:a.id,class:"grid-item rounded-lg border border-divider dark:border-white/10 h-full"},[l(g,{to:{name:"profile",params:{user_name:a.user_name}},class:"block pb-[35%] bg-cover bg-center bg-no-repeat rounded-t-lg",style:z({backgroundImage:`url(${a.cover})`})},null,8,["to","style"]),i("div",W,[i("div",X,[l(B,{user:a,size:50},null,8,["user"]),i("div",Z,[i("div",ee,[l(A,{user:a,class:"grid-item-title"},null,8,["user"])]),a.categories.length?(t(),s("div",te,[(t(!0),s(c,null,y(a.categories,(f,N)=>(t(),s("span",{key:f.id},[l(g,{to:{name:"user_pages",query:{category_id:f.id}},class:"text-inherit"},{default:h(()=>[m(n(f.name),1)]),_:2},1032,["to"]),m(" "+n(N===a.categories.length-1?"":" Â· "),1)]))),128))])):w("",!0),a.show_follower?(t(),s("div",se,n(e.$filters.numberShortener(a.follower_count,e.$t("[number] Follower"),e.$t("[number] Followers"))),1)):w("",!0)])]),a.can_follow?(t(),s("div",oe,[a.is_followed?(t(),p(b,{key:0,onClick:f=>_.unFollowPage(a),type:"outlined",class:"w-full"},{default:h(()=>[m(n(e.$t("Unfollow")),1)]),_:2},1032,["onClick"])):(t(),p(b,{key:1,onClick:f=>_.followPage(a),type:"outlined",class:"w-full"},{default:h(()=>[m(n(e.$t("Follow")),1)]),_:2},1032,["onClick"]))])):w("",!0)])]))),128))]),u.autoLoadMore?(t(),s(c,{key:0},[u.hasLoadMore?(t(),p(F,{key:0,onInfinite:_.handleLoadInfinite},{spinner:h(()=>[l(r)]),complete:h(()=>o[0]||(o[0]=[i("span",null,null,-1)])),_:1},8,["onInfinite"])):w("",!0)],64)):(t(),s(c,{key:1},[u.hasLoadMore?(t(),s("div",ae,[l(b,{onClick:_.handleLoadmore},{default:h(()=>[m(n(e.$t("View more")),1)]),_:1},8,["onClick"])])):w("",!0)],64))],64)):(t(),s("div",ie,[E(e.$slots,"empty",{},()=>[i("div",null,n(e.$t("No Pages")),1)])]))],64))}const ne=x(O,[["render",le]]);export{ne as U};
