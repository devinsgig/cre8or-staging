import{_ as p,B as c,a2 as f,ci as m,cj as u,r as i,o as h,c as _,b as s,t,d as l,w as x,$ as g,e as v}from"../../assets/app-8df99815.js";const b={components:{BaseButton:c,BasePassword:f},data(){return{passwordData:{password:"",password_new:"",password_new_confirmed:""},error:{password:null,password_new:null,password_new_confirmed:null},loading:!1}},methods:{async changePassword(){if(!this.loading){this.loading=!0;try{await m(this.passwordData),this.showSuccess(this.$t("Your password has been changed."));let r=this.passwordData.password_new;this.$confirm.require({message:this.$t("Do you want to log out of other devices?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await u(r),this.showSuccess(this.$t("You are successfully logged out."))}catch(e){this.showError(e.error)}}}),Object.keys(this.passwordData).forEach(e=>this.passwordData[e]=null),this.resetErrors(this.error)}catch(r){this.handleApiErrors(this.error,r)}finally{this.loading=!1}}}}},D={class:"flex flex-wrap gap-x-5 mb-3"},B={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},P={class:"md:flex-2 w-full"},V={class:"flex flex-wrap gap-x-5 mb-3"},y={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},C={class:"md:flex-2 w-full"},E={class:"flex flex-wrap gap-x-5 mb-3"},S={class:"md:flex-1 md:text-end w-full mb-1 pt-0 md:pt-2"},k={class:"md:flex-2 w-full"},N={class:"flex flex-wrap gap-x-5"},O={class:"md:flex-2 w-full"};function $(r,e,j,L,o,n){const d=i("BasePassword"),w=i("BaseButton");return h(),_("form",{onSubmit:e[3]||(e[3]=g((...a)=>n.changePassword&&n.changePassword(...a),["prevent"]))},[s("div",D,[s("div",B,[s("label",null,t(r.$t("Old Password")),1)]),s("div",P,[l(d,{modelValue:o.passwordData.password,"onUpdate:modelValue":e[0]||(e[0]=a=>o.passwordData.password=a),error:o.error.password,left_icon:!1},null,8,["modelValue","error"])])]),s("div",V,[s("div",y,[s("label",null,t(r.$t("New Password")),1)]),s("div",C,[l(d,{modelValue:o.passwordData.password_new,"onUpdate:modelValue":e[1]||(e[1]=a=>o.passwordData.password_new=a),error:o.error.password_new,left_icon:!1},null,8,["modelValue","error"])])]),s("div",E,[s("div",S,[s("label",null,t(r.$t("Confirm Password")),1)]),s("div",k,[l(d,{modelValue:o.passwordData.password_new_confirmed,"onUpdate:modelValue":e[2]||(e[2]=a=>o.passwordData.password_new_confirmed=a),error:o.error.password_new_confirmed,left_icon:!1},null,8,["modelValue","error"])])]),s("div",N,[e[4]||(e[4]=s("div",{class:"md:flex-1 md:text-end w-full"},null,-1)),s("div",O,[l(w,{loading:o.loading,class:"w-full"},{default:x(()=>[v(t(r.$t("Save")),1)]),_:1},8,["loading"])])])],32)}const Y=p(b,[["render",$]]);export{Y as default};
