import{_ as w,B as g,am as T,v as k,s as A,m as h,p as B,r as i,o as u,c as r,b as t,t as o,d as l,h as p,w as V,$ as v,y as _,u as M,V as R,e as C}from"../../assets/app-8df99815.js";import{B as P}from"./BaseRadio-b63270a2.js";import{e as q}from"./wallet-d0104669.js";const I={components:{BaseButton:g,BaseRadio:P,BaseInputNumber:T,BaseTextarea:k,BaseInputText:A},data(){return{amountType:"custom",customWithdrawAmount:null,paymentMethodType:null,withdrawAmount:null,bankAccount:null,bankAccountComfirmed:null,loadingRequest:!1}},computed:{...h(_,["user"]),...h(M,["config"])},mounted(){if(!this.config.wallet.enable)return this.$router.push({name:"permission"});if(!this.config.wallet.fundTransferEnable)return this.$router.push({name:"permission"});if(this.config.wallet.fundTransferVerifyEnable&&!this.user.is_verify)return this.$router.push({name:"permission"});let e="wallet.transfer_fund";if(!window._.has(this.user.permissions,e)||!this.user.permissions[e])return this.$router.push({name:"permission"})},watch:{customWithdrawAmount(){this.amountType==="custom"&&(this.withdrawAmount=this.customWithdrawAmount)},paymentMethodType(){this.bankAccount=null,this.bankAccountComfirmed=null},amountType(){this.amountType==="custom"?this.withdrawAmount=this.customWithdrawAmount:this.amountType==="all"&&(this.withdrawAmount=this.formattedAmount(this.user.wallet_balance))}},methods:{...B(R,["pingNotification"]),async submitPaymentRequest(){try{if(!this.paymentMethodType){this.showError(this.$t("Please select payment method."));return}this.loadingRequest=!0,await q({type:this.paymentMethodType,amount:this.formattedAmount(this.withdrawAmount),bank_account:this.bankAccount,bank_account_confirmed:this.bankAccountComfirmed}),this.pingNotification(),this.customWithdrawAmount=null,this.withdrawAmount=null,this.bankAccount=null,this.bankAccountComfirmed=null,this.loadingRequest=!1,this.showSuccess(this.$t("Request submitted successfully"))}catch(e){this.showError(e.error),this.loadingRequest=!1}},amountFee(e){return this.exchangeCurrency(e*this.withdrawAmount/100)}}},N={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 mb-base-2 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},W={class:"flex flex-wrap items-center justify-between gap-2 mb-base-2"},S={class:"text-main-color text-base-lg font-extrabold dark:text-white"},F={class:"font-bold mb-base-2"},U={class:"flex flex-col gap-3 mb-base-2"},x={class:"flex flex-wrap items-center gap-3"},E={class:"flex-1 flex flex-wrap items-center gap-x-3 gap-y-1"},$={for:"custom"},Y={class:"flex items-center gap-3"},D={for:"all"},j={class:"font-bold mb-base-2"},z={class:"flex flex-col gap-3 mb-base-2"},G={key:0,class:"flex items-center gap-3"},H={for:"paypal"},J={key:1,class:"flex items-center gap-3"},K={for:"bank"},L={key:0},O={class:"mb-base-2"},Q={class:"list-disc ps-5 mb-base-2"},X={key:1};function Z(e,a,ee,te,n,m){const d=i("BaseRadio"),f=i("BaseInputNumber"),b=i("BaseTextarea"),c=i("BaseInputText"),y=i("BaseButton");return u(),r("div",N,[t("div",W,[t("h3",S,o(e.$t("Submit a payment request")),1)]),t("form",{onSubmit:a[8]||(a[8]=v((...s)=>m.submitPaymentRequest&&m.submitPaymentRequest(...s),["prevent"]))},[t("h5",F,o(e.$t("Amount")),1),t("div",U,[t("div",x,[l(d,{modelValue:n.amountType,"onUpdate:modelValue":a[0]||(a[0]=s=>n.amountType=s),inputId:"custom",name:"amountType",value:"custom"},null,8,["modelValue"]),t("div",E,[l(f,{modelValue:n.customWithdrawAmount,"onUpdate:modelValue":a[1]||(a[1]=s=>n.customWithdrawAmount=s),placeholder:e.$t("Value"),class:"max-w-[240px]"},null,8,["modelValue","placeholder"]),t("label",$,o(e.config.wallet.tokenName+" ~ "+e.exchangeCurrency(n.customWithdrawAmount)),1)])]),t("div",Y,[l(d,{modelValue:n.amountType,"onUpdate:modelValue":a[2]||(a[2]=s=>n.amountType=s),inputId:"all",name:"amountType",value:"all"},null,8,["modelValue"]),t("label",D,o(e.$t("All current balance")+" ("+e.exchangeTokenCurrency(e.user.wallet_balance)+" ~ "+e.exchangeCurrency(e.user.wallet_balance)+")"),1)])]),t("h5",j,o(e.$t("Payment method")),1),t("div",z,[e.config.wallet.fundTransferPaypalEnable?(u(),r("div",G,[l(d,{modelValue:n.paymentMethodType,"onUpdate:modelValue":a[3]||(a[3]=s=>n.paymentMethodType=s),inputId:"paypal",name:"payment_method",value:"paypal"},null,8,["modelValue"]),t("label",H,o(e.$t("Paypal - Minimun")+" "+e.config.wallet.fundTransferPaypalMinimum+" "+e.config.currency.code+" - "+e.$t("Transfer fee is")+" "+m.amountFee(e.config.wallet.fundTransferPaypalFee))+" ("+o(e.config.wallet.fundTransferPaypalFee)+"%)",1)])):p("",!0),e.config.wallet.fundTransferBankEnable?(u(),r("div",J,[l(d,{modelValue:n.paymentMethodType,"onUpdate:modelValue":a[4]||(a[4]=s=>n.paymentMethodType=s),inputId:"bank",name:"payment_method",value:"bank"},null,8,["modelValue"]),t("label",K,o(e.$t("Bank Transfer - Minimum")+" "+e.config.wallet.fundTransferBankMinimum+" "+e.config.currency.code+" - "+e.$t("Transfer fee is")+" "+m.amountFee(e.config.wallet.fundTransferBankFee))+" ("+o(e.config.wallet.fundTransferBankFee)+"%)",1)])):p("",!0)]),n.paymentMethodType==="bank"?(u(),r("div",L,[t("p",O,o(this.config.siteName)+" "+o(e.$t("cannot be held responsible for delays, extra costs or financial loss that arises from being provided incorrect account information, so please ensure that you double check the details with your financial institution prior to submitting a request for a Bank Wire Transfer. Please fill in your bank details as complete as possible, including"))+":",1),t("ul",Q,[t("li",null,o(e.$t("Your Address")),1),t("li",null,o(e.$t("Your bank's Address")),1),t("li",null,o(e.$t("The name of the account holder")),1),t("li",null,o(e.$t("Your account number and if possible IBAN")),1),t("li",null,o(e.$t("Your bank's SWIFT code")),1)]),l(b,{modelValue:n.bankAccount,"onUpdate:modelValue":a[5]||(a[5]=s=>n.bankAccount=s),autoResize:!0,placeholder:e.$t("Bank Detail"),rows:5,class:"mb-base-2"},null,8,["modelValue","placeholder"])])):n.paymentMethodType==="paypal"?(u(),r("div",X,[l(c,{modelValue:n.bankAccount,"onUpdate:modelValue":a[6]||(a[6]=s=>n.bankAccount=s),placeholder:e.$t("Paypal Email"),class:"max-w-[240px] mb-base-2"},null,8,["modelValue","placeholder"]),l(c,{modelValue:n.bankAccountComfirmed,"onUpdate:modelValue":a[7]||(a[7]=s=>n.bankAccountComfirmed=s),placeholder:e.$t("Re-type Paypal email"),class:"max-w-[240px] mb-base-2"},null,8,["modelValue","placeholder"])])):p("",!0),l(y,{loading:n.loadingRequest},{default:V(()=>[C(o(e.$t("Submit Request")),1)]),_:1},8,["loading"])],32)])}const oe=w(I,[["render",Z]]);export{oe as default};
