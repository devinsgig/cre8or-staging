import{b as g,d as y,c as k,r as w}from"./subscription-dccd4f39.js";import{_ as f,L as S,B,r as d,o,c as i,g as T,h as u,b as s,t as r,d as b,F as h,f as D,w as C,e as L}from"../../assets/app-8df99815.js";import{C as v}from"./CurrentPlan-7a657346.js";const x={props:["id"],components:{Loading:S,BaseButton:B,CurrentPlan:v},data(){return{subscriptionDetail:null,loadingTransaction:!0,loadmoreTransaction:!1,transactionsList:[],currentPage:1}},mounted(){this.getSubscriptionDetail(this.id),this.getSubscriptionTransactions(this.id,this.currentPage)},methods:{async getSubscriptionDetail(t){try{const e=await g(t);this.subscriptionDetail=e}catch(e){this.showError(e.error)}},async getSubscriptionTransactions(t,e){try{const a=await y(t,e);e===1?this.transactionsList=a.items:this.transactionsList=window._.concat(this.transactionsList,a.items),a.has_next_page?(this.loadmoreTransaction=!0,this.currentPage++):this.loadmoreTransaction=!1,this.loadingTransaction=!1}catch(a){this.showError(a.error)}},async handleCancelSubscription(t){try{await k(t),this.getSubscriptionDetail(t)}catch(e){this.showError(e.error)}},async handleResumeSubscription(t){try{await w(t),this.getSubscriptionDetail(t)}catch(e){this.showError(e.error)}},handleBack(){this.$router.push({name:"setting_subscriptions"})}}},P={class:"mb-base-2 font-bold"},E={class:"relative overflow-x-auto scrollbar-thin border border-b-0 border-table-border-color md:rounded-md dark:border-white/10"},N={class:"w-full text-sm whitespace-nowrap text-center"},V={class:"text-xs uppercase bg-table-header-color dark:bg-dark-web-wash"},R={scope:"col",class:"p-3 text-start"},F={scope:"col",class:"p-3"},A={scope:"col",class:"p-3"},$={scope:"col",class:"p-3"},j={key:0},q={colspan:"4"},z={class:"p-3 text-start"},G={class:"p-3"},H={class:"p-3"},J={class:"p-3"},K={key:1,class:"border-b border-table-border-color dark:border-gray-700"},M={colspan:"4",class:"p-3"},O={key:1,class:"text-center my-base-2"};function Q(t,e,a,U,n,l){const p=d("CurrentPlan"),_=d("Loading"),m=d("BaseButton");return o(),i(h,null,[n.subscriptionDetail?(o(),T(p,{key:0,subscription:n.subscriptionDetail,onCancel:l.handleCancelSubscription,onResume:l.handleResumeSubscription,onBack:l.handleBack,class:"mb-base-2"},null,8,["subscription","onCancel","onResume","onBack"])):u("",!0),s("div",P,r(t.$t("Payment history")),1),s("div",E,[s("table",N,[s("thead",V,[s("tr",null,[s("th",R,r(t.$t("Date")),1),s("th",F,r(t.$t("Status")),1),s("th",A,r(t.$t("Transaction ID")),1),s("th",$,r(t.$t("Amount")),1)])]),s("tbody",null,[n.loadingTransaction?(o(),i("tr",j,[s("td",q,[b(_,{class:"mt-base-2"})])])):(o(),i(h,{key:1},[n.transactionsList.length?(o(!0),i(h,{key:0},D(n.transactionsList,c=>(o(),i("tr",{key:c.id,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b border-table-border-color dark:border-gray-700"},[s("td",z,r(c.date),1),s("td",G,r(c.status_text),1),s("td",H,r(c.transaction_id),1),s("td",J,r(c.price),1)]))),128)):(o(),i("tr",K,[s("td",M,r(t.$t("No Transactions")),1)]))],64))])])]),n.loadmoreTransaction?(o(),i("div",O,[b(m,{onClick:e[0]||(e[0]=c=>l.getSubscriptionTransactions(a.id,n.currentPage))},{default:C(()=>[L(r(t.$t("View more")),1)]),_:1})])):u("",!0)],64)}const Z=f(x,[["render",Q]]);export{Z as default};
