import{_ as S,j as B,B as C,m as f,u as A,y,W as D,aa as P,ab as T,r as c,o as t,c as i,b as o,F as k,f as v,g as x,w as n,e as h,t as l,d as a,h as u,Q as $}from"../../assets/app-8df99815.js";const L={components:{BaseIcon:B,BaseButton:C},props:["tab"],data(){return{currentTab:this.$route.path.split("/")[2],error:{password:null}}},computed:{...f(A,["isMobile"]),...f(y,["user"]),settingsList(){return[{name:this.isMobile?"setting_profile":"setting_index",label:this.user.is_page?this.$t("General Settings"):this.$t("Profile")},{name:"setting_subscriptions",label:this.$t("Subscriptions")},{name:"setting_account",label:this.$t("Account"),isShow:!this.user.is_page&&this.user.has_email},{name:"setting_creator_dashboard",label:this.$t("Creator Dashboard"),isShow:this.user.can_show_creator_dashboard},{name:"setting_password",label:this.$t("Change password"),isShow:!this.user.is_page&&this.user.has_email},{name:"setting_add_email_password",label:this.$t("Add email and password"),isShow:!this.user.is_page&&!this.user.has_email},{name:"setting_privacy",label:this.$t("Privacy")},{name:"setting_email",label:this.$t("Email Notifications"),isShow:!this.user.is_page},{name:"setting_notifications",label:this.$t("Push Notifications")},{name:"setting_display",label:this.$t("Display")},{name:"setting_download",label:this.$t("Download your Data")}]},visibleSettingsList(){return this.settingsList.filter(e=>e.isShow||typeof e.isShow>"u")},settingTitle(){return{profile:this.user.is_page?this.$t("General Settings"):this.$t("Profile"),account:this.$t("Account"),password:this.$t("Change password"),privacy:this.$t("Privacy"),email:this.$t("Email"),notifications:this.$t("Notifications"),display:this.$t("Display"),download:this.$t("Download"),add_email_password:this.$t("Add email and password"),subscriptions:this.$t("Subscriptions"),creator_dashboard:this.$t("Creator Dashboard")}[this.currentTab]||this.$t("Profile")}},methods:{async deleteUser(){const e=this.$dialog.open(D,{props:{header:this.$t("Enter Password"),class:"password-modal",modal:!0,dismissableMask:!0,draggable:!1},emits:{onConfirm:async d=>{if(d.password)try{this.user.is_page?await P({password:d.password}):(await T({password:d.password}),y().remove()),window.location.href=window.siteConfig.siteUrl,e.close()}catch(m){this.handleApiErrors(this.error,m),e.close()}}}})},isActive(e){return["setting_creator_dashboard","setting_subscriber_detail"].includes(this.$router.currentRoute.value.name)&&e==="setting_creator_dashboard"||["setting_subscription_detail"].includes(this.$router.currentRoute.value.name)&&e==="setting_subscriptions"}}},N={key:0,class:"flex main-content-section bg-white rounded-none md:rounded-lg dark:bg-slate-800"},E={key:0,class:"flex-1 py-base-2 lg:border-r border-divider dark:border-white/10"},M={class:"settings-list flex flex-col"},U={key:0,class:"px-base-2 mt-6"},V={class:"flex items-center gap-3 mb-5"},j={class:"text-2xl capitalize font-bold font-workSans"},z={key:1,class:"flex main-content-section bg-white border border-white text-main-color dark:bg-slate-800 dark:border-slate-800 dark:text-white rounded-base-lg mb-base-2"},I={class:"flex-1 py-base-7 md:border-e border-divider dark:border-white/10 rounded-s-base-lg"},F={class:"settings-list flex flex-col"},G={key:0,class:"px-base-2 mt-6"},R={class:"flex-2 min-w-0 p-5 lg:p-10"};function Q(e,d,m,W,_,r){const b=c("BaseIcon"),p=c("router-link"),g=c("BaseButton"),w=c("router-view");return e.isMobile?(t(),i("div",N,[_.currentTab?u("",!0):(t(),i("div",E,[o("div",M,[(t(!0),i(k,null,v(r.visibleSettingsList,s=>(t(),x(p,{key:s.name,class:"main-content-menu-item settings-list-item flex justify-between items-center px-5 py-base-2 text-main-color dark:text-white",to:{name:s.name}},{default:n(()=>[h(l(s.label)+" ",1),a(b,{name:"caret_right",size:"16"})]),_:2},1032,["to"]))),128)),e.user.can_delete?(t(),i("div",U,[a(g,{type:"danger-outlined",class:"w-full",onClick:r.deleteUser},{default:n(()=>[h(l(e.$t("Delete Account")),1)]),_:1},8,["onClick"])])):u("",!0)])])),_.currentTab?(t(),i("div",{key:1,class:$(["flex-2 min-w-0 ps-5 py-5 lg:p-10",_.currentTab==="profile"?"pe-10":"pe-5"])},[o("div",V,[a(p,{to:{name:"setting_index"},class:"text-inherit"},{default:n(()=>[a(b,{name:"arrow_left",class:"align-middle"})]),_:1}),o("h2",j,l(r.settingTitle),1)]),a(w)],2)):u("",!0)])):(t(),i("div",z,[o("div",I,[o("div",F,[(t(!0),i(k,null,v(r.visibleSettingsList,s=>(t(),x(p,{key:s.name,class:$(["main-content-menu-item settings-list-item flex justify-between items-center px-5 py-base-2 text-main-color dark:text-white",{"router-link-exact-active":r.isActive(s.name)}]),to:{name:s.name}},{default:n(()=>[h(l(s.label),1)]),_:2},1032,["class","to"]))),128)),e.user.can_delete?(t(),i("div",G,[a(g,{type:"danger-outlined",class:"btn-block",onClick:r.deleteUser},{default:n(()=>[h(l(e.user.is_page?e.$t("Delete Page"):e.$t("Delete Account")),1)]),_:1},8,["onClick"])])):u("",!0)])]),o("div",R,[a(w)])]))}const H=S(L,[["render",Q]]);export{H as default};
