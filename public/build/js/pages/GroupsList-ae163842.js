import{_ as $,br as G,r as c,o,c as a,F as p,f as y,b as d,d as u,B as v,t as l,w as h,e as k,W as C,bL as I,b0 as S,p as M,bM as j,bD as q,S as x,Q as N,h as _,g as w,aB as A,L as R,b4 as T,aC as D}from"../../assets/app-8df99815.js";const O={components:{Skeleton:G},props:{itemNumber:{type:Number,default:3}}},J={class:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-base-2"},H={class:"block pb-[60%] relative overflow-hidden rounded-t-lg"},V={class:"absolute inset-0"},z={class:"p-4"},E={class:"flex mb-base-2"};function P(e,s,t,B,g,n){const i=c("Skeleton");return o(),a("div",J,[(o(!0),a(p,null,y(t.itemNumber,b=>(o(),a("div",{key:b,class:"rounded-lg border border-divider dark:border-white/10 bg-white h-full dark:bg-slate-800"},[d("div",H,[d("div",V,[u(i,{height:"100%",width:"100%",class:"rounded-none"})])]),d("div",z,[u(i,{height:"1.25rem",width:"75%",class:"mb-2"}),u(i,{width:"50%",class:"mb-base-2"}),d("div",E,[(o(),a(p,null,y(5,f=>u(i,{key:f,width:"1.5rem",height:"1.5rem",class:"-ms-2 first:ms-0 rounded-full"})),64))]),u(i,{width:"100%",height:"2.25rem"})])]))),128))])}const F=$(O,[["render",P]]),Q={components:{BaseButton:v},inject:{dialogRef:{default:null}},data(){return{content:this.dialogRef.data.content}}},W={class:"text-center"},Y={class:"mb-base-2"};function K(e,s,t,B,g,n){const i=c("BaseButton");return o(),a("div",W,[d("div",Y,l(g.content),1),u(i,{to:{name:"contact"}},{default:h(()=>[k(l(e.$t("Contact admin")),1)]),_:1})])}const L=$(Q,[["render",K]]),U={components:{BaseButton:v},inject:{dialogRef:{default:null}},data(){return{group:this.dialogRef.data.group}},methods:{async handleOpenGroup(){const e=this.$dialog.open(C,{props:{header:this.$t("Enter Password"),class:"password-modal",modal:!0,dismissableMask:!0,draggable:!1},emits:{onConfirm:async s=>{if(s.password)try{await I({id:this.group.id,password:s.password}),this.dialogRef.close(),e.close(),this.showSuccess(this.$t("Open Group Successfully.")),this.$router.push({name:"group_profile",params:{id:this.group.id,slug:this.group.slug}})}catch(t){this.showError(t.error),e.close()}}}})}}},X={class:"text-center"},Z={class:"mb-base-2"};function ee(e,s,t,B,g,n){const i=c("BaseButton");return o(),a("div",X,[d("div",Z,l(e.$t("This group is hidden now")),1),u(i,{onClick:n.handleOpenGroup},{default:h(()=>[k(l(e.$t("Open Now")),1)]),_:1},8,["onClick"])])}const te=$(U,[["render",ee]]),se={props:{item:Object,showButton:{type:Boolean,default:!0},showBadge:{type:Boolean,default:!1}},components:{Avatar:S,BaseButton:v},computed:{joinButtonType(){return this.item.request_id?"danger-outlined":"outlined"},joinLabel(){return this.item.request_id?this.$t("Cancel Request"):this.item.canJoin?this.$t("Join Group"):this.$t("View Group")},statusInfo(){let e,s;switch(this.item.status){case"pending":e="bg-base-yellow text-main-color",s=this.$t("Pending Approval");break;case"hidden":e="bg-invalid-color text-white",s=this.$t("Hidden");break;case"disable":e="bg-web-wash text-sub-color",s=this.$t("Disabled");break;default:e="bg-base-green text-white",s=this.$t("Active")}return{badgeClass:e,text:s}}},methods:{...M(q,["handleDeleteJoinRequest"]),handleJoinGroup(e){e.request_id?this.$confirm.require({message:this.$t("Do you want to cancel your join request?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await this.handleDeleteJoinRequest(e)}catch(s){this.showError(s.error)}}}):this.$router.push({name:"group_profile",params:{id:e.id,slug:e.slug}})},handleClickGroup(){switch(this.item.status){case"hidden":this.item.is_owner?this.$dialog.open(te,{data:{group:this.item},props:{showHeader:!1,class:"p-dialog-no-header",modal:!0,dismissableMask:!0,draggable:!1}}):this.item.is_admin&&this.$dialog.open(j,{data:{content:this.$t("This group is hidden now")},props:{showHeader:!1,class:"p-dialog-no-header",modal:!0,dismissableMask:!0,draggable:!1}});break;case"disable":this.$dialog.open(L,{data:{content:this.$t("This group is disabled by admin")},props:{showHeader:!1,class:"p-dialog-no-header",modal:!0,dismissableMask:!0,draggable:!1}});break;case"pending":this.$dialog.open(L,{data:{content:this.$t("This group is pending for approval")},props:{showHeader:!1,class:"p-dialog-no-header",modal:!0,dismissableMask:!0,draggable:!1}});break;default:this.$router.push({name:"group_profile",params:{id:this.item.id,slug:this.item.slug}})}}}},oe={class:"grid-item rounded-lg border border-divider dark:border-white/10 bg-white h-full dark:bg-slate-800"},ae={class:"pt-3 px-4 pb-4"},ne={key:0,class:"mb-2 leading-none"},ie={key:1,class:"grid-item-sub text-xs truncate text-sub-color dark:text-slate-400 mb-base-1"},re={key:2,class:"flex items-center"},de={class:"grid-item-sub text-base-xs text-sub-color ms-2 dark:text-slate-400"};function le(e,s,t,B,g,n){const i=c("router-link"),b=c("Avatar"),f=c("BaseButton");return o(),a("div",oe,[d("div",{onClick:s[0]||(s[0]=(...r)=>n.handleClickGroup&&n.handleClickGroup(...r)),class:"block pb-[60%] bg-cover bg-center bg-no-repeat rounded-t-lg cursor-pointer",style:x({backgroundImage:`url(${t.item.cover})`})},null,4),d("div",ae,[d("div",{onClick:s[1]||(s[1]=(...r)=>n.handleClickGroup&&n.handleClickGroup(...r)),class:"grid-item-title block font-semibold mb-1 cursor-pointer truncate"},l(t.item.name),1),t.showBadge?(o(),a("div",ne,[d("div",{class:N(["inline-block px-base-1 py-1 rounded text-xs leading-none",n.statusInfo.badgeClass])},l(n.statusInfo.text),3)])):_("",!0),t.item.categories.length?(o(),a("div",ie,[(o(!0),a(p,null,y(t.item.categories,(r,m)=>(o(),a("span",{key:r.id},[u(i,{to:{name:"groups",params:{tab:"all"},query:{category_id:r.id}},class:"text-inherit"},{default:h(()=>[k(l(r.name),1)]),_:2},1032,["to"]),k(" "+l(m===t.item.categories.length-1?"":" Â· "),1)]))),128))])):_("",!0),t.item.members.length?(o(),a("div",re,[(o(!0),a(p,null,y(t.item.members,(r,m)=>(o(),w(b,{key:r.id,user:r,border:!1,size:24,class:"-ms-2 first:ms-0 relative border-2 border-white rounded-full dark:border-slate-800",style:x({zIndex:t.item.members.length-m})},null,8,["user","style"]))),128)),d("span",de,l(e.$filters.numberShortener(t.item.member_count,e.$t("[number] member"),e.$t("[number] members"))),1)])):_("",!0),t.showButton?(o(),w(f,{key:3,onClick:s[2]||(s[2]=r=>n.handleJoinGroup(t.item)),type:n.joinButtonType,class:"w-full mt-base-2"},{default:h(()=>[k(l(n.joinLabel),1)]),_:1},8,["type"])):_("",!0)])])}const ue=$(se,[["render",le]]),ce={props:{loading:{type:Boolean,default:!0},groupsList:{type:Array,default:()=>[]},loadMore:{type:Boolean,default:!0},showButton:{type:Boolean,default:!0},showBadge:{type:Boolean,default:!1}},components:{SkeletonGroupsList:F,InfiniteLoading:A,GroupListItem:ue,Loading:R},methods:{handleLoadInfinite(e){this.loadMore&&this.$emit("load-more",e)}},emits:["load-more"]},he={key:0,class:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-base-2"},me={class:"bg-white rounded-none md:rounded-base-lg p-5 text-center dark:bg-slate-800"};function pe(e,s,t,B,g,n){const i=c("SkeletonGroupsList"),b=c("GroupListItem"),f=c("Loading"),r=c("InfiniteLoading");return t.loading?(o(),w(i,{key:0})):(o(),a(p,{key:1},[t.groupsList.length?(o(),a("div",he,[u(T,{name:"fade"},{default:h(()=>[(o(!0),a(p,null,y(t.groupsList,m=>(o(),w(b,{key:m.id,item:m,"show-button":t.showButton,"show-badge":t.showBadge},null,8,["item","show-button","show-badge"]))),128))]),_:1}),t.loadMore?(o(),w(r,{key:0,onInfinite:n.handleLoadInfinite},{spinner:h(()=>[u(f)]),complete:h(()=>s[0]||(s[0]=[d("span",null,null,-1)])),_:1},8,["onInfinite"])):_("",!0)])):D(e.$slots,"empty",{key:1},()=>[d("div",me,l(e.$t("No groups are found")),1)])],64))}const be=$(ce,[["render",pe]]);export{be as G};
