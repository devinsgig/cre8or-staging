import{B as L,s as R,a2 as z,a as A,u as k,ac as C,m as D,p as O,y as j,bR as G,_ as M,r as s,o as t,c as m,b as d,t as i,d as a,g as c,h as p,w as f,e as u,$ as W,F as v,f as q}from"../../assets/app-8df99815.js";import{C as H,u as J}from"./CloudFlareTurnstile-dd2b6044.js";import{B as K}from"./BaseCalendar-e4a0da98.js";import{B as Q}from"./BaseSelectLocation-a004491b.js";import{B as X}from"./BaseInputTel-35ebd3b3.js";import"./index.esm-3350796f.js";const Y={components:{BaseButton:L,BaseInputText:R,BasePassword:z,BaseSelect:A,BaseCalendar:K,BaseSelectLocation:Q,BaseInputTel:X,CloudFlareTurnstile:H},data(){const o=k(),r=J(o.config.signupEnableRecapcha,this.enableRecapcha,this.enableTurnstile);return{name:null,user_name:null,email:null,phoneNumber:null,password:null,ref_code:C.get("ref_code",null),gender_id:0,birthday:null,location:{country_id:null,state_id:null,city_id:null,zip_code:null,address:null},loadingSignup:!1,error:{name:null,user_name:null,email:null,password:null,gender_id:null,birthday:null,country_id:null,state_id:null,city_id:null,zip_code:null,address:null,phone_number:null,ref_code:null},signupConfig:null,...r}},computed:{...D(k,["config"])},mounted(){setTimeout(()=>{this.loadRecaptcha(this.$recaptchaInstance)},2e3),this.handleGetSignupConfig()},unmounted(){this.unloadRecaptcha(this.$recaptchaInstance)},methods:{...O(j,["signupUser"]),async handleGetSignupConfig(){try{const o=await G();this.signupConfig=o}catch(o){this.showError(o.error)}},async handleSignup(){var o,r;this.loadingSignup=!0;try{const n={name:this.name,user_name:this.user_name,email:this.email,password:this.password,ref_code:this.ref_code,gender_id:this.gender_id,birthday:this.formatDateTime(this.birthday),country_id:this.location.country_id,state_id:this.location.state_id,city_id:this.location.city_id,zip_code:this.location.zip_code,address:this.location.address,phone_number:this.phoneNumber};n.token=await this.getCaptchaToken(this.$recaptcha,this.turnstileToken,"signup"),await this.signupUser(n),this.resetErrors(this.error),this.ref_code&&C.remove("ref_code"),window.location.href=window.siteConfig.siteUrl}catch(n){this.resetErrors(this.error),((o=n.error)==null?void 0:o.code)=="error_validate"?Object.keys(this.error).forEach(h=>this.error[h]=n.error.detail[h]?n.error.detail[h]:null):((r=n.error)==null?void 0:r.code)=="inactive"?this.showError(n.error.message):this.showError(n.error)}finally{this.loadingSignup=!1}}}},Z={class:"widget-box bg-white rounded-base-lg mb-base-2 max-w-full w-full sm:w-96 p-7 mx-auto dark:bg-slate-800"},$={class:"text-base-lg font-extrabold mb-5 dark:text-white"},ee={key:5,class:"text-center"},oe={class:"mt-base-2 text-center"},re={class:"mt-4 border-t border-divider pt-4 dark:border-white/10"},le={class:"text-center"},ne={class:"flex justify-center flex-wrap gap-3 my-4"},te=["href"],se=["src","alt"],ie={class:"text-center"};function ae(o,r,n,h,e,y){var b,w,V,B,S;const g=s("BaseInputText"),T=s("BaseInputTel"),U=s("BasePassword"),N=s("BaseSelect"),P=s("BaseCalendar"),E=s("BaseSelectLocation"),F=s("CloudFlareTurnstile"),I=s("BaseButton"),_=s("router-link");return t(),m("div",Z,[d("h3",$,i(o.$t("Sign up")),1),d("form",{onSubmit:r[10]||(r[10]=W((...l)=>y.handleSignup&&y.handleSignup(...l),["prevent"])),class:"flex flex-col gap-base-2"},[a(g,{modelValue:e.name,"onUpdate:modelValue":r[0]||(r[0]=l=>e.name=l),placeholder:o.$t("Name"),error:e.error.name,left_icon:"user",autocomplete:"name"},null,8,["modelValue","placeholder","error"]),a(g,{modelValue:e.user_name,"onUpdate:modelValue":r[1]||(r[1]=l=>e.user_name=l),placeholder:o.$t("Username"),error:e.error.user_name,left_icon:"at",autocomplete:"nickname"},null,8,["modelValue","placeholder","error"]),a(g,{modelValue:e.email,"onUpdate:modelValue":r[2]||(r[2]=l=>e.email=l),placeholder:o.$t("Email"),error:e.error.email,left_icon:"mail",autocomplete:"on"},null,8,["modelValue","placeholder","error"]),o.config.phoneVerify?(t(),c(T,{key:0,modelValue:e.phoneNumber,"onUpdate:modelValue":r[3]||(r[3]=l=>e.phoneNumber=l),placeholder:o.$t("Phone Number"),error:e.error.phone_number},null,8,["modelValue","placeholder","error"])):p("",!0),a(U,{modelValue:e.password,"onUpdate:modelValue":r[4]||(r[4]=l=>e.password=l),error:e.error.password,placeholder:o.$t("Password")},null,8,["modelValue","error","placeholder"]),(b=e.signupConfig)!=null&&b.signupField.genderShow?(t(),c(N,{key:1,modelValue:e.gender_id,"onUpdate:modelValue":r[5]||(r[5]=l=>e.gender_id=l),options:[{id:0,name:this.$t("Prefer not to say")},...(w=e.signupConfig)==null?void 0:w.genders],optionLabel:"name",optionValue:"id",error:e.error.gender_id},null,8,["modelValue","options","error"])):p("",!0),(V=e.signupConfig)!=null&&V.signupField.birthShow?(t(),c(P,{key:2,modelValue:e.birthday,"onUpdate:modelValue":r[6]||(r[6]=l=>e.birthday=l),placeholder:o.$t("Birthday"),error:e.error.birthday},null,8,["modelValue","placeholder","error"])):p("",!0),(B=e.signupConfig)!=null&&B.signupField.locationShow?(t(),c(E,{key:3,modelValue:e.location,"onUpdate:modelValue":r[7]||(r[7]=l=>e.location=l),"show-label":!1,error:e.error},null,8,["modelValue","error"])):p("",!0),(S=e.signupConfig)!=null&&S.inviteOnly?(t(),c(g,{key:4,modelValue:e.ref_code,"onUpdate:modelValue":r[8]||(r[8]=l=>e.ref_code=l),placeholder:o.$t("Invitation Code"),error:e.error.ref_code,left_icon:"user_plus"},null,8,["modelValue","placeholder","error"])):p("",!0),o.enableWidget?(t(),m("div",ee,[a(F,{modelValue:o.turnstileToken,"onUpdate:modelValue":r[9]||(r[9]=l=>o.turnstileToken=l)},null,8,["modelValue"])])):p("",!0),a(I,{loading:e.loadingSignup,disabled:!o.isVerified(),class:"w-full"},{default:f(()=>[u(i(o.$t("Sign up")),1)]),_:1},8,["loading","disabled"])],32),d("div",oe,[u(i(o.$t("By clicking Sign Up, you agree to our"))+" ",1),a(_,{to:{name:"sp_detail",params:{slug:"terms-of-service"}},class:"text-primary-color dark:text-dark-primary-color"},{default:f(()=>[u(i(o.$t("Terms of Service")),1)]),_:1}),u(" "+i(o.$t("and"))+" ",1),a(_,{to:{name:"sp_detail",params:{slug:"privacy-policy"}},class:"text-primary-color dark:text-dark-primary-color"},{default:f(()=>[u(i(o.$t("Privacy Policy")),1)]),_:1}),r[11]||(r[11]=u("."))]),d("div",re,[o.config.openidProviders.length?(t(),m(v,{key:0},[d("div",le,i(o.$t("Or Sign up using")),1),d("div",ne,[(t(!0),m(v,null,q(o.config.openidProviders,(l,x)=>(t(),m("a",{key:x,href:l.href},[d("img",{class:"max-w-[2rem]",src:l.photo,alt:l.name},null,8,se)],8,te))),128))])],64)):p("",!0),d("div",ie,[u(i(o.$t("Already had an account?"))+"Â ",1),a(_,{to:{name:"login"},class:"text-primary-color dark:text-dark-primary-color"},{default:f(()=>[u(i(o.$t("Login")),1)]),_:1})])])])}const ge=M(Y,[["render",ae]]);export{ge as default};
