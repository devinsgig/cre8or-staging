import{_ as k,bN as P,L as b,a7 as I,ac as n,m,ak as c,y as L,p as u,u as v,r as s,o,g as f,c as a,b as l,w,e as B,t as E,d as _,h as N}from"../../assets/app-8df99815.js";import{P as S}from"./PostContent-93850f8e.js";const F={components:{CommentsList:P,Loading:b,Error:I,PostContent:S},props:["data","params","position"],data(){return{loading_status:!0,error:null,refCode:null}},mounted(){this.params.id&&this.loadPostInfo(this.params.id),this.refCode=this.$route.query.ref_code||"",this.refCode?n.set("ref_code",this.refCode):n.remove("ref_code")},unmounted(){this.unsetPostInfo(),this.refCode&&n.remove("ref_code")},computed:{...m(c,["postInfo"]),...m(L,["authenticated"])},methods:{...u(c,["getPostById","unsetPostInfo"]),...u(v,["setErrorLayout"]),async loadPostInfo(e){try{await this.getPostById(e),this.loading_status=!1}catch(t){this.setErrorLayout(!0),this.error=t.error.detail.id,this.loading_status=!1}},focusForm(){this.postInfo.canComment&&this.$refs.commentsList.focusForm()}}},V={key:1},A={class:"feed-item bg-white border border-white rounded-none md:rounded-base-lg dark:bg-slate-800 dark:border-slate-800 mb-base-2"},D={key:1},q={class:"feed-entry-wrap"},x={key:0};function T(e,t,i,$,r,d){const p=s("Loading"),h=s("Error"),y=s("PostContent"),C=s("CommentsList");return r.loading_status?(o(),f(p,{key:0})):(o(),a("div",V,[l("div",A,[r.error?(o(),f(h,{key:0,class:"mb-0"},{default:w(()=>[B(E(r.error),1)]),_:1})):(o(),a("div",D,[l("div",q,[_(y,{post:e.postInfo,onComment_click:t[0]||(t[0]=g=>d.focusForm()),onComment_count_click:t[1]||(t[1]=g=>d.focusForm())},null,8,["post"]),e.postInfo?(o(),a("div",x,[_(C,{ref:"commentsList",comment_id:i.params.comment_id,reply_id:i.params.reply_id,item:e.postInfo,"has-menu-footer":!!e.authenticated},null,8,["comment_id","reply_id","item","has-menu-footer"])])):N("",!0)])]))])]))}const G=k(F,[["render",T]]);export{G as default};
