import{_ as g,B as h,de as p,df as m,r,o as y,g as u,w as o,d as f,e as a,t as d}from"../../assets/app-8df99815.js";import{P as L}from"./PendingPostsList-701fede9.js";import"./SkeletonPostsList-68921a0e.js";const _={props:["userConfig"],components:{PendingPostsList:L,BaseButton:h},data(){return{currentPage:1,loadingMyPendingPosts:!0,myPendingPostsList:[]}},mounted(){this.handleGetMyPendingPosts(this.userConfig.group.id,this.currentPage)},methods:{async handleGetMyPendingPosts(t,s){try{const e=await p(t,s);return s==1&&(this.myPendingPostsList=[]),this.myPendingPostsList=window._.concat(this.myPendingPostsList,e.items),e}catch(e){this.showError(e.error)}finally{this.loadingMyPendingPosts=!1}},loadMorePosts(t){this.handleGetMyPendingPosts(this.userConfig.group.id,++this.currentPage).then(s=>{s.items.length===0?t.complete():t.loaded()})},handleDeletePost(t){this.$confirm.require({message:this.$t("Do you want to remove this pending post?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await m(t),this.myPendingPostsList=this.myPendingPostsList.filter(s=>s.id!==t)}catch(s){this.showError(s.error)}}})}}};function M(t,s,e,w,n,i){const P=r("BaseButton"),c=r("PendingPostsList");return y(),u(c,{loading:n.loadingMyPendingPosts,"posts-list":n.myPendingPostsList,onLoadMore:i.loadMorePosts},{actions:o(({item:l})=>[f(P,{onClick:B=>i.handleDeletePost(l.id),class:"w-full",type:"danger"},{default:o(()=>[a(d(t.$t("Delete")),1)]),_:2},1032,["onClick"])]),empty:o(()=>[a(d(t.$t("No pending posts")),1)]),_:1},8,["loading","posts-list","onLoadMore"])}const D=g(_,[["render",M]]);export{D as default};
