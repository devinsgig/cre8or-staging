import{_ as L,j as v,D as B,r as g,o as r,c as i,F as K,f as C,d as a,w,e as p,t as d,b as n,h as c,y as H,B as E,U as T,E as z,m as V,G as j,H as D,I as q,J as U,K as x}from"../../assets/app-8df99815.js";import{H as R}from"./HashtagsList-2b30b1b4.js";const A={components:{BaseIcon:v},props:["hashtagsList","target"],methods:{async unFollowHashtag(e){try{await B({name:e,action:"unfollow"}),this.hashtagsList.map(s=>(s.name===e&&(s.is_followed=!1),s)),this.$emit("unfollow_signup_hashtag",e)}catch(s){this.showError(s.error)}}},emits:["unfollow_signup_hashtag"]},G={key:0,class:"boxes-list flex flex-wrap gap-2"},J=["onClick"];function M(e,s,_,k,t,o){const m=g("router-link"),h=g("BaseIcon");return _.hashtagsList.length>0?(r(),i("div",G,[(r(!0),i(K,null,C(_.hashtagsList,u=>(r(),i("div",{key:u.name,class:"boxes-list-item text-sub-color inline-flex items-center rounded-base px-base-2 py-2 border border-secondary-box-color dark:text-slate-400 dark:border-white/30"},[a(m,{to:{name:"search",params:{search_type:"hashtag",type:"post"},query:{q:u.name}},target:_.target,class:"font-bold text-xs me-2 text-inherit"},{default:w(()=>[p(d(u.name),1)]),_:2},1032,["to","target"]),n("button",{onClick:b=>o.unFollowHashtag(u.name)},[a(h,{name:"close",size:"16"})],8,J)]))),128))])):c("",!0)}const N=L(A,[["render",M]]);var f=null;const y=H(),P={components:{BaseIcon:v,BaseButton:E,HashtagsList:R,HashtagsBoxList:N,UsersList:T,UsersBoxList:z},computed:{...V(H,["user"])},data(){return{hashtagKeyword:"",UserKeyword:"",loading_suggest_hashtags:!0,followingHashtags:[],suggestHashtags:null,loading_suggest_users:!0,suggestUserLists:null,followingUsersList:[],currentStep:1}},mounted(){this.getSuggestHashtagsList(""),this.getSuggestUsersList(""),y.loginFirst()},methods:{findHashtag(){clearTimeout(f),f=setTimeout(()=>this.getSuggestHashtagsList(this.hashtagKeyword),400)},deleteHashtagSearch(){this.hashtagKeyword="",this.findHashtag()},findUser(){clearTimeout(f),f=setTimeout(()=>this.getSuggestUsersList(this.UserKeyword),400)},deleteUserSearch(){this.UserKeyword="",this.findUser()},async getSuggestHashtagsList(e){try{const s=await j(e);this.suggestHashtags=s}catch(s){this.showError(s.error)}finally{this.loading_suggest_hashtags=!1}},async getSuggestUsersList(e){try{const s=await D(e);this.suggestUserLists=s}catch(s){this.showError(s.error)}finally{this.loading_suggest_users=!1}},removeFollowingHashtags(e){this.followingHashtags=this.followingHashtags.filter(s=>s.name!==e),this.suggestHashtags.map(s=>(s.name===e&&(s.is_followed=!1),s))},followHashtag(e){this.followingHashtags.push({name:e})},unFollowHashtag(e){this.followingHashtags=this.followingHashtags.filter(s=>s.name!==e)},async removeFromFollowingUsers(e){try{await q({id:e.id,action:"unfollow",name:e.name,avatar:e.avatar}),this.followingUsersList=this.followingUsersList.filter(s=>s.id!==e.id),this.suggestUserLists.map(s=>(s.id===e.id&&(s.is_followed=!1),s))}catch(s){this.showError(s.error)}},followUser(e){this.followingUsersList.push({id:e.id,name:e.name,user_name:e.user_name,avatar:e.avatar})},unFollowUser(e){this.followingUsersList=this.followingUsersList.filter(s=>s.id!==e.id)},nextStep(){this.currentStep===2?(y.me(),this.$router.push({name:"home"})):this.currentStep++}}},O={class:"main-content-section bg-white border border-divider p-5 rounded-base-lg dark:bg-slate-800 dark:border-slate-800"},Q={key:0},W={class:"flex items-center justify-between mb-3"},X={class:"text-main-color text-base-lg font-extrabold dark:text-white"},Y={class:"mt-base-2 mb-3"},Z={class:"relative p-input-icon-left"},I=["placeholder"],$={key:1},ss={class:"flex items-center justify-between mb-3"},es={class:"text-main-color text-base-lg font-extrabold dark:text-white"},ts={class:"mt-base-2 mb-3"},os={class:"relative p-input-icon-left"},ns=["placeholder"],as={key:0,class:"users-list-item-content-sub list_items_sub_text_color flex items-center text-xs text-sub-color dark:text-slate-400"},ls={class:"text-center mt-3"};function rs(e,s,_,k,t,o){const m=g("HashtagsBoxList"),h=g("BaseIcon"),u=g("HashtagsList"),b=g("UsersBoxList"),S=g("UsersList"),F=g("BaseButton");return r(),i("div",O,[t.currentStep===1?(r(),i("div",Q,[n("div",W,[n("h3",X,d(e.$t("Select Tags to Follow")),1)]),a(m,{hashtagsList:t.followingHashtags,target:"_blank",onUnfollow_signup_hashtag:o.removeFollowingHashtags},null,8,["hashtagsList","onUnfollow_signup_hashtag"]),n("div",Y,[n("div",Z,[a(h,{name:"pencil",size:"16",class:"text-input-icon-color absolute top-3 start-2"}),U(n("input",{type:"text",onInput:s[0]||(s[0]=l=>o.findHashtag()),"onUpdate:modelValue":s[1]||(s[1]=l=>t.hashtagKeyword=l),placeholder:e.$t("Enter topics"),class:"p-inputtext"},null,40,I),[[x,t.hashtagKeyword]]),t.hashtagKeyword!=""?(r(),i("button",{key:0,class:"inline-block leading-none absolute top-base-2 end-2",onClick:s[2]||(s[2]=l=>o.deleteHashtagSearch())},[a(h,{name:"close",size:"16",class:"text-input-icon-color"})])):c("",!0)])]),a(u,{loading:t.loading_suggest_hashtags,hashtagsList:t.suggestHashtags,target:"_blank",onFollow_hashtag:o.followHashtag,onUnfollow_hashtag:o.unFollowHashtag},null,8,["loading","hashtagsList","onFollow_hashtag","onUnfollow_hashtag"])])):c("",!0),t.currentStep===2?(r(),i("div",$,[n("div",ss,[n("h3",es,d(e.$t("Select Users to Follow")),1)]),a(b,{usersList:t.followingUsersList,target:"_blank",onRemove_user:o.removeFromFollowingUsers},null,8,["usersList","onRemove_user"]),n("div",ts,[n("div",os,[a(h,{name:"pencil",size:"16",class:"text-input-icon-color absolute top-3 start-2"}),U(n("input",{type:"text",onInput:s[3]||(s[3]=l=>o.findUser()),"onUpdate:modelValue":s[4]||(s[4]=l=>t.UserKeyword=l),placeholder:e.$t("Enter name"),class:"p-inputtext"},null,40,ns),[[x,t.UserKeyword]]),t.UserKeyword!=""?(r(),i("button",{key:0,onClick:s[5]||(s[5]=l=>o.deleteUserSearch()),class:"inline-block leading-none absolute top-base-2 end-2"},[a(h,{name:"close",size:"16",class:"text-input-icon-color"})])):c("",!0)])]),a(S,{loading:t.loading_suggest_users,usersList:t.suggestUserLists,target:"_blank",onFollow_user:o.followUser,onUnfollow_user:o.unFollowUser,showPopover:!1},{sub_text:w(({user:l})=>[l.show_follower?(r(),i("p",as,[a(h,{name:"users",size:"16",class:"me-1"}),p(d(e.$filters.numberShortener(l.follower_count,e.$t("[number] follower"),e.$t("[number] followers"))),1)])):c("",!0)]),_:1},8,["loading","usersList","onFollow_user","onUnfollow_user"])])):c("",!0),n("div",ls,[a(F,{class:"font-bold",onClick:s[6]||(s[6]=l=>o.nextStep())},{default:w(()=>[p(d(e.$t("Continue")),1)]),_:1})])])}const hs=L(P,[["render",rs]]);export{hs as default};
