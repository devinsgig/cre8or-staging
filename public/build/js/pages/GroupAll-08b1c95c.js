import{_ as g,B as y,s as f,bs as n,m as G,bD as p,p as w,cI as L,l as S,r,o as d,c as b,b as C,d as i,w as _,e as x,t as B,$ as k,g as V}from"../../assets/app-8df99815.js";import{G as A}from"./GroupsList-ae163842.js";import{s as I}from"./treeselect.esm-3db5b66c.js";import"./index.esm-3350796f.js";const T={props:["categoryId"],components:{GroupsList:A,BaseButton:y,BaseInputText:f,TreeSelect:I},data(){return{searchPage:1,searchKeyword:"",selectedCategory:window._.invert({true:this.categoryId?this.categoryId:""}),categoriesList:[],key:n()}},mounted(){this.handleGetGroupCategories(),this.getAllGroupsList(this.searchPage,this.searchKeyword,this.formatedSelectedCategory)},unmounted(){this.unsetGroupsList()},computed:{...G(p,["loadingGroupsList","groupsList"]),formatedSelectedCategory(){return Object.keys(this.selectedCategory)[0]}},methods:{...w(p,["getAllGroupsList","unsetGroupsList"]),async handleGetGroupCategories(){try{const e=await L();this.categoriesList=window._.map(e,function(t){return{key:t.id,label:t.name,children:window._.map(t.childs,function(a){return{key:a.id,label:a.name}})}}),this.categoriesList=[{key:"",label:this.$t("All")},...this.categoriesList]}catch(e){console.log(e)}},handleSearchGroups(){this.searchPage=1,this.key=n(),this.getAllGroupsList(this.searchPage,this.searchKeyword,this.formatedSelectedCategory);let e=this.$router.resolve({name:"groups",params:{tab:"all"},query:{category_id:this.formatedSelectedCategory}});S(e.fullPath)},loadmoreGroups(e){this.getAllGroupsList(++this.searchPage,this.searchKeyword,this.formatedSelectedCategory).then(t=>{t.has_next_page?e.loaded():e.complete()})}}},v={class:"p-base-2 md:p-0"};function K(e,t,a,P,s,l){const c=r("BaseInputText"),u=r("TreeSelect"),h=r("BaseButton"),m=r("GroupsList");return d(),b("div",v,[C("form",{class:"flex flex-wrap gap-base-2 mb-base-2",onSubmit:t[2]||(t[2]=k((...o)=>l.handleSearchGroups&&l.handleSearchGroups(...o),["prevent"]))},[i(c,{modelValue:s.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=o=>s.searchKeyword=o),placeholder:e.$t("Keyword"),class:"flex-1 min-w-[150px] max-w-[240px]"},null,8,["modelValue","placeholder"]),i(u,{class:"flex-1 min-w-[150px] max-w-[240px]",modelValue:s.selectedCategory,"onUpdate:modelValue":t[1]||(t[1]=o=>s.selectedCategory=o),options:s.categoriesList,optionLabel:"key",optionValue:"label",placeholder:e.$t("Category")},null,8,["modelValue","options","placeholder"]),i(h,null,{default:_(()=>[x(B(e.$t("Search")),1)]),_:1})],32),(d(),V(m,{key:s.key,loading:e.loadingGroupsList,"groups-list":e.groupsList,onLoadMore:l.loadmoreGroups},null,8,["loading","groups-list","onLoadMore"]))])}const j=g(T,[["render",K]]);export{j as default};
