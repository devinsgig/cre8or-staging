import{_,br as L,r as n,o,c as i,F as h,f as $,b as s,d as r,j as P,bF as C,dD as w,l as v,ad as I,g as u,w as p,S as M,t as g,aB as S,L as B,b4 as x,h as W,aC as N}from"../../assets/app-8df99815.js";import{P as j}from"./PostDetailModal-69941281.js";const U={components:{Skeleton:L},props:{itemNumber:{type:Number,default:3}}},D={class:"grid grid-cols-3 gap-base-2"},F={class:"absolute inset-0"};function T(e,l,t,f,b,d){const a=n("Skeleton");return o(),i("div",D,[(o(!0),i(h,null,$(t.itemNumber,c=>(o(),i("div",{key:c,class:"pb-[100%] relative"},[s("div",F,[r(a,{height:"100%",width:"100%"})])]))),128))])}const V=_(U,[["render",T]]),z={props:["post"],components:{BaseIcon:P,ContentWarningWrapper:C,PaidContentWrapper:w},computed:{thumbUrl(){var e;if((e=this.post.items)!=null&&e.length){if(this.post.type==="photo")return this.post.items[0].subject.url;if(this.post.type==="video")return this.post.items[0].subject.thumb.url}return this.post.thumb},iconType(){return this.post.type==="photo"&&this.post.items.length>1?"images":this.post.type==="video"?"video_solid":"photo"}},methods:{handleClickPost(){let e=this.$router.resolve({name:"post",params:{id:this.post.id}});v(e.fullPath),this.$dialog.open(j,{data:{post:this.post},props:{class:"post-detail-modal p-dialog-lg p-dialog-full-page",modal:!0,dismissableMask:!0,showHeader:!1,draggable:!1},onClose:()=>{v(this.$router.currentRoute.value.fullPath),I()}})}}},A={class:"absolute inset-0"},E={class:"flex items-center justify-center gap-6 text-white absolute inset-0 bg-black-trans-4 opacity-0 transition-opacity hover:opacity-100"},G={class:"flex items-center gap-2 leading-none"},H={class:"flex items-center gap-2 leading-none"};function R(e,l,t,f,b,d){const a=n("BaseIcon"),c=n("PaidContentWrapper"),m=n("ContentWarningWrapper");return o(),u(m,{"content-warning-list":t.post.content_warning_categories,post:t.post},{default:p(()=>[r(c,{item:t.post,ratio:1},{default:p(()=>[s("div",{class:"relative cursor-pointer bg-white dark:bg-slate-800 pb-[100%]",onClick:l[0]||(l[0]=y=>d.handleClickPost())},[s("div",A,[s("div",{class:"w-full h-full bg-center bg-cover bg-no-repeat",style:M({backgroundImage:`url(${d.thumbUrl})`})},null,4),r(a,{name:d.iconType,class:"absolute top-3 end-3 text-white"},null,8,["name"]),s("div",E,[s("div",G,[r(a,{name:"heart"}),s("span",null,g(e.$filters.numberShortener(t.post.like_count,e.$t("[number]"),e.$t("[number]"))),1)]),s("div",H,[r(a,{name:"message"}),s("span",null,g(e.$filters.numberShortener(t.post.comment_count,e.$t("[number]"),e.$t("[number]"))),1)])])])])]),_:1},8,["item"])]),_:1},8,["content-warning-list","post"])}const Y=_(z,[["render",R]]),q={components:{SkeletonMasonryPostsList:V,MasonryPostListsItem:Y,InfiniteLoading:S,Loading:B},props:{loading:{type:Boolean,default:!0},postsList:{type:Array,default:()=>[]},loadMore:{type:Boolean,default:!0}},methods:{handleLoadInfinite(e){this.loadMore&&this.$emit("load-more",e)}},emits:["load-more"]},J={key:0,class:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-1 md:gap-base-2"},K={class:"main-content-section bg-white border border-white text-main-color p-10 text-center rounded-none mb-base-2 md:rounded-base-lg dark:bg-slate-800 dark:border-slate-800 dark:text-white"},O={class:"text-base-lg font-bold"};function Q(e,l,t,f,b,d){const a=n("SkeletonMasonryPostsList"),c=n("MasonryPostListsItem"),m=n("Loading"),y=n("InfiniteLoading");return o(),i("div",null,[t.loading?(o(),u(a,{key:0})):(o(),i(h,{key:1},[t.postsList.length>0?(o(),i("div",J,[r(x,{name:"fade"},{default:p(()=>[(o(!0),i(h,null,$(t.postsList,k=>(o(),u(c,{key:k.id,post:k},null,8,["post"]))),128))]),_:1}),t.loadMore?(o(),u(y,{key:0,onInfinite:d.handleLoadInfinite},{spinner:p(()=>[r(m)]),complete:p(()=>l[0]||(l[0]=[s("span",null,null,-1)])),_:1},8,["onInfinite"])):W("",!0)])):N(e.$slots,"empty",{key:1},()=>[s("div",K,[s("div",O,g(e.$t("Nothing to see here yet")),1)])])],64))])}const ee=_(q,[["render",Q]]);export{ee as M};
