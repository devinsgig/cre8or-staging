import{ax as c,ay as f,az as v,o as m,c as k,m as y,_ as w,u as g,r as b,g as T,h as C}from"../../assets/app-8df99815.js";function M(t,r,e){const s=c(!1),i=c(""),n=f(()=>t);return{enableWidget:t,turnstileToken:i,loadRecaptcha:o=>{if(n.value&&r()){const a=o.value;a==null||a.showBadge(),s.value=!0}},unloadRecaptcha:o=>{if(n.value&&r()){const a=o.value;a==null||a.hideBadge()}},getCaptchaToken:async(o,a,h)=>{if(n.value){if(r())return await o(h);if(e())return a}return null},isVerified:()=>{if(n.value){if(r())return s.value;if(e())return!!i.value}return!0}}}const _="https://challenges.cloudflare.com/turnstile/v0/api.js",p="cfTurnstileOnLoad";let u=typeof window<"u"&&window.turnstile!==void 0?"ready":"unloaded",l;const I=v({name:"VueTurnstile",emits:["update:modelValue","error","unsupported","expired","before-interactive","after-interactive"],props:{siteKey:{type:String,required:!0},modelValue:{type:String,required:!0},resetInterval:{type:Number,required:!1,default:295*1e3},size:{type:String,required:!1,default:"normal"},theme:{type:String,required:!1,default:"auto"},language:{type:String,required:!1,default:"auto"},action:{type:String,required:!1,default:""},appearance:{type:String,required:!1,default:"always"},renderOnMount:{type:Boolean,required:!1,default:!0}},data(){return{resetTimeout:void 0,widgetId:void 0}},computed:{turnstileOptions(){return{sitekey:this.siteKey,theme:this.theme,language:this.language,size:this.size,callback:this.callback,action:this.action,appearance:this.appearance,"error-callback":this.errorCallback,"expired-callback":this.expiredCallback,"unsupported-callback":this.unsupportedCallback,"before-interactive-callback":this.beforeInteractiveCallback,"after-interactive-callback":this.afterInteractivecallback}}},methods:{afterInteractivecallback(){this.$emit("after-interactive")},beforeInteractiveCallback(){this.$emit("before-interactive")},expiredCallback(){this.$emit("expired")},unsupportedCallback(){this.$emit("unsupported")},errorCallback(t){this.$emit("error",t)},callback(t){this.$emit("update:modelValue",t),this.startResetTimeout()},reset(){window.turnstile&&(this.$emit("update:modelValue",""),window.turnstile.reset())},remove(){this.widgetId&&(window.turnstile.remove(this.widgetId),this.widgetId=void 0)},render(){this.widgetId=window.turnstile.render(this.$refs.turnstile,this.turnstileOptions)},startResetTimeout(){this.resetTimeout=setTimeout(()=>{this.reset()},this.resetInterval)}},async mounted(){const t=new Promise((r,e)=>{l={resolve:r,reject:e},u==="ready"&&r(void 0)});window[p]=()=>{l.resolve(),u="ready"},await(()=>{if(u==="unloaded"){u="loading";const r=`${_}?onload=${p}&render=explicit`,e=document.createElement("script");e.src=r,e.async=!0,e.addEventListener("error",()=>{l.reject("Failed to load Turnstile.")}),document.head.appendChild(e)}return t})(),this.renderOnMount&&this.render()},beforeUnmount(){this.remove(),clearTimeout(this.resetTimeout)}}),V=(t,r)=>{const e=t.__vccOpts||t;for(const[s,i]of r)e[s]=i;return e},x={ref:"turnstile"};function S(t,r,e,s,i,n){return m(),k("div",x,null,512)}const $=V(I,[["render",S]]),q={components:{VueTurnstile:$},data(){return{siteKey:window.siteConfig.turnstileSiteKey,recaptchaType:window.siteConfig.recaptchaType}},computed:{...y(g,["darkmode","systemMode"]),appearanceTheme(){return this.darkmode==="on"||this.darkmode==="auto"&&this.systemMode==="dark"?"dark":"light"}}};function B(t,r,e,s,i,n){const d=b("VueTurnstile");return i.recaptchaType==="turnstile"&&i.siteKey?(m(),T(d,{key:0,"site-key":i.siteKey,theme:n.appearanceTheme},null,8,["site-key","theme"])):C("",!0)}const R=w(q,[["render",B]]);export{R as C,M as u};
