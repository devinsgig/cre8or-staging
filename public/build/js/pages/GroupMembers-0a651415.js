import{_ as u,s as c,p as g,u as p,aF as M,aN as f,r as b,o as L,c as w,b as o,t as i,d as n,w as x,e as _}from"../../assets/app-8df99815.js";import{G}from"./GroupMembersList-c38b600c.js";const I={props:["groupInfo"],components:{BaseInputText:c,GroupMembersList:G},data(){return{currentModeratorPage:1,loadingModeratorList:!0,moderatorsList:[],loadmoreModeratorsList:!1,searchMemberText:"",currentMemberPage:1,loadingMembersList:!0,membersList:[],loadmoreMembersList:!1}},mounted(){if(!this.groupInfo.canView)return this.setErrorLayout(!0);this.getAdminsList(this.groupInfo.id,this.currentModeratorPage),this.handleGetGroupMember(this.groupInfo.id,this.searchMemberText,this.currentMemberPage)},methods:{...g(p,["setErrorLayout"]),async getAdminsList(r,t){try{const e=await M(r,t);t==1&&(this.moderatorsList=[]),this.moderatorsList=window._.concat(this.moderatorsList,e.items),e.has_next_page?(this.loadmoreModeratorsList=!0,this.currentModeratorPage++):this.loadmoreModeratorsList=!1}catch(e){this.showError(e.error)}finally{this.loadingModeratorList=!1}},async handleGetGroupMember(r,t,e){try{const a=await f(r,t,e);e==1&&(this.membersList=[]),this.membersList=window._.concat(this.membersList,a.items),a.has_next_page?(this.loadmoreMembersList=!0,this.currentMemberPage++):this.loadmoreMembersList=!1}catch(a){this.showError(a.error)}finally{this.loadingMembersList=!1}},debouncedGetGroupMembersList:window._.debounce(function(){this.handleGetGroupMember(this.groupInfo.id,this.searchMemberText,this.currentMemberPage)},500),handleSearchMembers(){this.currentMemberPage=1,this.debouncedGetGroupMembersList()}}},y={class:"flex flex-col gap-base-2"},k={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},P={class:"flex flex-wrap items-center justify-between gap-2 mb-base-2"},T={class:"text-base-lg font-extrabold"},v={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},A={class:"flex flex-wrap items-center justify-between gap-2 mb-base-2"},N={class:"text-base-lg font-extrabold"},V={class:"main-content-section bg-white border border-white text-main-color rounded-none md:rounded-base-lg p-5 dark:bg-slate-800 dark:border-slate-800 dark:text-white"},B={class:"text-base-lg font-extrabold mb-base-2"};function E(r,t,e,a,s,d){const m=b("GroupMembersList"),h=b("BaseInputText");return L(),w("div",y,[o("div",k,[o("div",P,[o("h3",T,i(r.$t("Admin")),1)]),n(m,{loading:!e.groupInfo.owner,"members-list":[e.groupInfo.owner]},null,8,["loading","members-list"])]),o("div",v,[o("div",A,[o("h3",N,i(r.$t("Moderators")+" - "+r.shortenNumber(e.groupInfo.admin_count)),1)]),n(m,{loading:s.loadingModeratorList,"members-list":s.moderatorsList,"has-load-more":s.loadmoreModeratorsList,onLoadMore:t[0]||(t[0]=l=>d.getAdminsList(e.groupInfo.id,s.currentModeratorPage))},{empty:x(()=>[_(i(r.$t("No moderators")),1)]),_:1},8,["loading","members-list","has-load-more"])]),o("div",V,[o("h3",B,i(r.$t("Members")+" - "+r.shortenNumber(e.groupInfo.member_without_admin)),1),n(h,{modelValue:s.searchMemberText,"onUpdate:modelValue":t[1]||(t[1]=l=>s.searchMemberText=l),onInput:d.handleSearchMembers,placeholder:r.$t("Search members"),class:"max-w-xs mb-base-2"},null,8,["modelValue","onInput","placeholder"]),n(m,{loading:s.loadingMembersList,"members-list":s.membersList,"has-load-more":s.loadmoreMembersList,onLoadMore:t[2]||(t[2]=l=>d.handleGetGroupMember(e.groupInfo.id,s.searchMemberText,s.currentMemberPage))},null,8,["loading","members-list","has-load-more"])])])}const C=u(I,[["render",E]]);export{C as default};
