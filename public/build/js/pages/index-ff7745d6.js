import{_ as y,B as S,s as C,a2 as k,R as V,a3 as v,a4 as B,a5 as x,r as c,o as p,c as m,b as r,d as l,t,a6 as h,w as i,e as d,h as f,F as P}from"../../assets/app-8df99815.js";const E={components:{BaseButton:S,BaseInputText:C,BasePassword:k,Logo:V},data(){return{currentStep:1,email:null,code:null,password:null,password_confirmed:null,error:{email:null,code:null,password:null,password_confirmed:null},loading:!1,loading_send:!1}},methods:{async sendCodeForEmail(){if(!this.loading_send){this.loading_send=!0;try{await v({email:this.email}),this.currentStep===2&&this.showSuccess(this.$t("Your code has been sent.")),this.currentStep=2,this.resetErrors(this.error)}catch(e){this.handleApiErrors(this.error,e)}finally{this.loading_send=!1}}},async checkValidateCode(){if(!this.loading){this.loading=!0;try{await B({email:this.email,code:this.code}),this.currentStep=3,this.resetErrors(this.error)}catch(e){this.handleApiErrors(this.error,e)}finally{this.loading=!1}}},async updatePassword(){if(!this.loading){this.loading=!0;try{await x({password:this.password,password_confirmed:this.password_confirmed,email:this.email,code:this.code}),this.currentStep=4,this.resetErrors(this.error)}catch(e){this.handleApiErrors(this.error,e)}finally{this.loading=!1}}},nextStep(){this.currentStep===1?this.sendCodeForEmail():this.currentStep===2?this.checkValidateCode():this.currentStep===3&&this.updatePassword()}}},F={class:"text-center mb-10"},K={class:"bg-white rounded-base w-full sm:w-96 p-7 mx-auto mb-base-2 dark:bg-slate-800 dark:text-white"},L={key:0},U={class:"flex items-center justify-between mb-4"},j={class:"text-base-lg font-extrabold"},A={class:"mb-4"},N={class:"mt-5 text-center"},T={key:1},I={class:"flex items-center justify-between mb-4"},R={class:"text-base-lg font-extrabold"},Y={class:"mb-4"},D={class:"mb-base-1"},W={key:2},q={class:"flex items-center justify-between mb-4"},z={class:"text-base-lg font-extrabold"},G={key:3},H={class:"flex items-center justify-between mb-4"},J={class:"text-base-lg font-extrabold"},M={class:"mb-4"};function O(e,o,Q,X,s,a){const _=c("Logo"),w=c("BaseInputText"),u=c("BaseButton"),b=c("router-link"),g=c("BasePassword");return p(),m(P,null,[r("div",F,[l(_)]),r("div",K,[s.currentStep===1?(p(),m("div",L,[r("div",U,[r("h3",j,t(e.$t("Forgot password")),1)]),r("p",A,t(e.$t("Please enter your email address to search for your account.")),1),l(w,{modelValue:s.email,"onUpdate:modelValue":o[0]||(o[0]=n=>s.email=n),placeholder:e.$t("Email"),error:s.error.email,left_icon:"mail",autocomplete:"username",onKeyup:h(a.nextStep,["enter"]),class:"mb-base-2"},null,8,["modelValue","placeholder","error","onKeyup"]),l(u,{loading:s.loading_send,class:"w-full",onClick:o[1]||(o[1]=n=>a.nextStep())},{default:i(()=>[d(t(e.$t("Continue")),1)]),_:1},8,["loading"]),r("div",N,[d(t(e.$t("Already had an account?"))+" ",1),l(b,{to:{name:"login"}},{default:i(()=>[d(t(e.$t("Login")),1)]),_:1})])])):f("",!0),s.currentStep===2?(p(),m("div",T,[r("div",I,[r("h3",R,t(e.$t("Enter security code")),1)]),r("p",Y,t(e.$t("Please check your email for a message with your code.")),1),l(w,{modelValue:s.code,"onUpdate:modelValue":o[2]||(o[2]=n=>s.code=n),placeholder:e.$t("Code"),error:s.error.code,onKeyup:h(a.nextStep,["enter"]),class:"mb-base-1"},null,8,["modelValue","placeholder","error","onKeyup"]),r("p",D,t(e.$t("We sent your code to"))+": "+t(s.email),1),l(u,{loading:s.loading,class:"w-full",onClick:o[3]||(o[3]=n=>a.nextStep())},{default:i(()=>[d(t(e.$t("Continue")),1)]),_:1},8,["loading"]),l(u,{type:"transparent",loading:s.loading_send,class:"w-full",onClick:o[4]||(o[4]=n=>a.sendCodeForEmail())},{default:i(()=>[d(t(e.$t("Resend code")),1)]),_:1},8,["loading"])])):f("",!0),s.currentStep===3?(p(),m("div",W,[r("div",q,[r("h3",z,t(e.$t("Change Password")),1)]),l(g,{modelValue:s.password,"onUpdate:modelValue":o[5]||(o[5]=n=>s.password=n),class:"mb-base-2",placeholder:e.$t("Password"),onKeyup:h(a.nextStep,["enter"]),error:s.error.password},null,8,["modelValue","placeholder","onKeyup","error"]),l(g,{modelValue:s.password_confirmed,"onUpdate:modelValue":o[6]||(o[6]=n=>s.password_confirmed=n),class:"mb-base-2",placeholder:e.$t("Confirm Password"),onKeyup:h(a.nextStep,["enter"]),error:s.error.password_confirmed},null,8,["modelValue","placeholder","onKeyup","error"]),l(u,{loading:s.loading,class:"w-full",onClick:o[7]||(o[7]=n=>a.nextStep())},{default:i(()=>[d(t(e.$t("Save")),1)]),_:1},8,["loading"])])):f("",!0),s.currentStep===4?(p(),m("div",G,[r("div",H,[r("h3",J,t(e.$t("Password Updated")),1)]),r("p",M,t(e.$t("Your password was changed")),1),l(u,{to:{name:"login"},class:"w-full"},{default:i(()=>[d(t(e.$t("Login")),1)]),_:1})])):f("",!0)])],64)}const $=y(E,[["render",O]]);export{$ as default};
