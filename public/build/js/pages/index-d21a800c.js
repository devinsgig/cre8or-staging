import{j as U,m as w,cw as E,_ as C,u as T,y as R,r as u,o,c as n,b as t,t as a,F as g,f as P,Q as A,d as l,h as _,am as N,a as x,B,cx as I,cy as q,w as k,e as f,L as V,cz as G,cA as O,s as M,b0 as j,b1 as z,c3 as F,cB as H,cC as Q,$ as Y,T as K,g as J,N as W}from"../../assets/app-8df99815.js";import{B as X}from"./BaseRadio-b63270a2.js";import{B as Z}from"./BaseCalendar-e4a0da98.js";import"./index.esm-3350796f.js";const ee={components:{BaseIcon:U},data(){return{paidContentConfig:null}},computed:{...w(T,["config"]),...w(R,["user"]),checklistItems(){var r,h;const e=[{field:"check_profile",title:this.$t("Update your profile picture and profile cover"),handler:this.handleUpdateProfile},{field:"check_membership",title:this.$t("Upgrade membership"),handler:this.handleUpgradeMembership},{field:"check_price",title:this.$t("Setup subscription pricing"),handler:this.handleSetPricing}];return(r=this.config)!=null&&r.userVerifyEnable&&((h=this.config)!=null&&h.paid_content.require_verify)&&e.push({field:"check_verify",title:this.$t("Verify your profile"),handler:this.handleVerifyProfile}),e},canCreatePaidContent(){return this.paidContentConfig?Object.values(this.paidContentConfig).every(e=>e===!0):!1}},mounted(){this.handleGetConfig()},methods:{async handleGetConfig(){try{const e=await E();this.paidContentConfig=e}catch(e){this.showError(e)}},handleUpdateProfile(){this.$router.push({name:"profile",params:{user_name:this.user.user_name}})},handleUpgradeMembership(){if(!this.config.membership.enable&&!this.paidContentConfig.check_membership)return this.showPermissionPopup("paid_content.allow_create");this.$router.push({name:"membership"})},handleSetPricing(){this.$router.push({name:"setting_creator_dashboard",params:{tab:"set_pricing"}})},handleVerifyProfile(){this.$router.push({name:"verify_profile"})}}},te={class:"font-bold text-xl mb-base-2"},se={class:"mb-4"},ae={key:0,class:"flex flex-col items-start gap-4 mb-4"},re=["onClick"],oe={key:1,class:"bg-web-wash rounded-base-lg px-5 py-3 text-center dark:bg-dark-web-wash"};function ne(e,r,h,y,s,c){const d=u("BaseIcon");return o(),n("div",null,[t("h3",te,a(e.$t("Become a creator")),1),t("p",se,a(e.$t("To become a creator, you need to complete the items below.")),1),s.paidContentConfig?(o(),n("div",ae,[(o(!0),n(g,null,P(c.checklistItems,p=>(o(),n("div",{key:p.field,class:A(["flex gap-base-2 items-center cursor-pointer",s.paidContentConfig[p.field]?"text-base-green cursor-text pointer-events-none dark:text-base-green":"text-primary-color dark:text-primary-dark-color"]),onClick:p.handler},[l(d,{name:s.paidContentConfig[p.field]?"check_circle":"x_circle"},null,8,["name"]),t("span",null,a(p.title),1)],10,re))),128))])):_("",!0),c.canCreatePaidContent?(o(),n("div",oe,[l(d,{name:"check_circle",size:"44",class:"text-base-green mb-3"}),t("div",null,a(e.$t("Your account has met all the requirements to create paid content to earn money.")),1)])):_("",!0)])}const ie=C(ee,[["render",ne]]),le={components:{BaseInputNumber:N,BaseSelect:x,BaseButton:B,BaseRadio:X},data(){return{trialDays:null,packages:null,selectedPackages:{monthly:null,quarterly:null,biannual:null,annual:null},defaultPackage:null,loadingSave:!1}},computed:{...w(T,["config"]),packageTypes(){return{monthly:{label:this.$t("Monthly Price")},quarterly:{label:this.$t("Quarterly Price")},biannual:{label:this.$t("Biannual Price")},annual:{label:this.$t("Annual Price")}}}},mounted(){this.handleGetPackages()},methods:{async handleGetPackages(){try{const e=await I();this.packages=e.all,this.selectedPackages={monthly:e.current.monthly,quarterly:e.current.quarterly,biannual:e.current.biannual,annual:e.current.annual},this.defaultPackage=e.default,this.trialDays=e.paid_content_trial_day||null}catch(e){this.showError(e.error)}},async handleSavePackage(){this.loadingSave=!0;try{await q({paid_content_trial_day:this.trialDays,monthly_id:this.selectedPackages.monthly,quarterly_id:this.selectedPackages.quarterly,biannual_id:this.selectedPackages.biannual,annual_id:this.selectedPackages.annual,default:this.defaultPackage}),this.showSuccess(this.$t("Packages saved successfully."))}catch(e){this.showError(e.error)}finally{this.loadingSave=!1}}}},ce={class:"font-bold text-xl mb-base-2"},de={class:"mb-4"},ue={class:"grid grid-cols-2 gap-5"},he={class:"col-span-2"},pe={class:"block mb-1"},me={class:"block mb-1"},be={key:0,class:"flex items-center gap-2"},ge=["for"],_e={class:"col-span-2"};function fe(e,r,h,y,s,c){const d=u("BaseInputNumber"),p=u("BaseSelect"),m=u("BaseRadio"),S=u("BaseButton");return o(),n("div",null,[t("h3",ce,a(e.$t("How much do creators earn?")),1),t("div",de,[t("p",null,a(e.$filters.textTranslate(this.$t("Creators receive [fee]% of the revenue on their earnings."),{fee:100-this.config.paid_content.commission_fee})),1),t("p",null,a(e.$filters.textTranslate(this.$t("The remaining [remaining_fee]% covers referral payments, payment processing, hosting, support, and all other services."),{remaining_fee:this.config.paid_content.commission_fee})),1),t("p",null,a(e.$t("Please set the fee below, leave blank if you want to disable trial, daily,...")),1)]),t("div",ue,[t("div",he,[t("label",pe,a(e.$t("Trial Period (in days)")),1),l(d,{modelValue:s.trialDays,"onUpdate:modelValue":r[0]||(r[0]=$=>s.trialDays=$)},null,8,["modelValue"])]),s.packages?(o(!0),n(g,{key:0},P(c.packageTypes,($,b)=>(o(),n("div",{key:b,class:"col-span-2 md:col-span-1"},[t("label",me,a($.label),1),l(p,{modelValue:s.selectedPackages[b],"onUpdate:modelValue":v=>s.selectedPackages[b]=v,options:s.packages[b],disabled:s.packages[b].length===0,optionLabel:"description",optionValue:"id",class:"mb-1"},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),s.packages[b].length?(o(),n("div",be,[l(m,{modelValue:s.defaultPackage,"onUpdate:modelValue":r[1]||(r[1]=v=>s.defaultPackage=v),inputId:b,name:"packages",value:b},null,8,["modelValue","inputId","value"]),t("label",{for:b},a(e.$t("Default selected")),9,ge)])):_("",!0)]))),128)):_("",!0),l(S,{loading:s.loadingSave,onClick:c.handleSavePackage,class:"col-span-2"},{default:k(()=>[f(a(e.$t("Save Changes")),1)]),_:1},8,["loading","onClick"]),t("div",_e,a(e.$t("Changes only affect new subscribers. Old subscribers will not be affected.")),1)])])}const ye=C(le,[["render",fe]]),ke={components:{Loading:V},data(){return{earningReport:null,loadingEarningTransactions:!0,earningTransactionsList:[]}},computed:{...w(T,["config"])},mounted(){this.getEarningReport(),this.getEarningTransactions()},methods:{async getEarningReport(){try{this.earningReport=await G()}catch(e){this.showError(e.error)}},async getEarningTransactions(){try{this.earningTransactionsList=await O()}catch(e){this.showError(e.error)}finally{this.loadingEarningTransactions=!1}}}},$e={class:"font-bold text-xl mb-base-2"},ve={class:"mb-4"},we={key:0,class:"grid grid-cols-3 gap-base-2 bg-badge-color p-5 text-center rounded-base-lg mb-5 dark:bg-dark-web-wash"},Ce={class:"mb-base-1"},Se={class:"text-2xl"},Te={class:"mb-base-1"},Pe={class:"text-2xl"},xe={class:"mb-base-1"},Be={class:"text-2xl"},Ve={class:"font-bold text-xl mb-base-2"},De={class:"mb-4"},Le={class:"relative overflow-x-auto scrollbar-thin border border-b-0 border-table-border-color md:rounded-md dark:border-white/10"},Ue={class:"w-full text-sm whitespace-nowrap text-center"},Ee={class:"text-xs uppercase bg-table-header-color dark:bg-dark-web-wash"},Re={scope:"col",class:"p-3 text-start"},Ae={scope:"col",class:"p-3"},Ne={scope:"col",class:"p-3"},Ie={scope:"col",class:"p-3"},qe={scope:"col",class:"p-3"},Ge={key:0},Oe={colspan:"5"},Me={class:"p-3 text-start"},je={class:"p-3"},ze={class:"p-3"},Fe={class:"p-3"},He={class:"p-3"},Qe={key:1,class:"border-b border-table-border-color dark:border-gray-700"},Ye={colspan:"5",class:"p-3"},Ke={key:1,class:"text-end mt-base-2"};function Je(e,r,h,y,s,c){const d=u("router-link"),p=u("Loading");return o(),n(g,null,[t("h3",$e,a(e.$t("Earning report")),1),t("p",ve,a(e.$t('You can see your total earnings from paid content sales here. To see earnings for a specific time period, please click "View all" for more details.')),1),s.earningReport?(o(),n("div",we,[t("div",null,[t("div",Ce,a(e.$t("Total")),1),t("div",Se,a(s.earningReport.total),1)]),t("div",null,[t("div",Te,a(e.$t("Platform fee")),1),t("div",Pe,a(s.earningReport.fee),1)]),t("div",null,[t("div",xe,a(e.$t("Earning")),1),t("div",Be,[l(d,{to:{name:"wallet",query:{type:"paid_content"}},class:"text-inherit"},{default:k(()=>[f(a(s.earningReport.earning),1)]),_:1})])])])):_("",!0),t("h3",Ve,a(e.$t("How much do creators earn?")),1),t("div",De,[t("p",null,a(e.$filters.textTranslate(this.$t("Creators receive [fee]% of the revenue on their earnings"),{fee:100-this.config.paid_content.commission_fee})),1),t("p",null,a(e.$filters.textTranslate(this.$t("The remaining [remaining_fee]% covers referral payments, payment processing, hosting, support, and all other services."),{remaining_fee:this.config.paid_content.commission_fee})),1)]),t("div",Le,[t("table",Ue,[t("thead",Ee,[t("tr",null,[t("th",Re,a(e.$t("Description")),1),t("th",Ae,a(e.$t("Gross")),1),t("th",Ne,a(e.$t("Platform fee")),1),t("th",Ie,a(e.$t("Net")),1),t("th",qe,a(e.$t("Date")),1)])]),t("tbody",null,[s.loadingEarningTransactions?(o(),n("tr",Ge,[t("td",Oe,[l(p,{class:"mt-base-2"})])])):(o(),n(g,{key:1},[s.earningTransactionsList.length?(o(!0),n(g,{key:0},P(s.earningTransactionsList,m=>(o(),n("tr",{key:m.id,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b border-table-border-color dark:border-gray-700"},[t("td",Me,a(m.description),1),t("td",je,a(m.gross),1),t("td",ze,a(m.fee),1),t("td",Fe,a(m.net),1),t("td",He,a(m.created_at),1)]))),128)):(o(),n("tr",Qe,[t("td",Ye,a(e.$t("No Transaction")),1)]))],64))])])]),s.earningTransactionsList.length?(o(),n("div",Ke,[l(d,{to:{name:"wallet",query:{type:"paid_content"}}},{default:k(()=>[f(a(e.$t("View all")),1)]),_:1})])):_("",!0)],64)}const We=C(ke,[["render",Je]]),Xe={components:{Loading:V,BaseButton:B,BaseInputText:M,BaseSelect:x,BaseCalendar:Z,Avatar:j,UserName:z},data(){return{dateType:"all",dateTypeOptions:[{name:this.$t("All"),value:"all"},{name:this.$t("Past 30 days"),value:"30_day"},{name:this.$t("Past 60 days"),value:"60_day"},{name:this.$t("Past 90 days"),value:"90_day"},{name:this.$t("Custom"),value:"custom"}],status:"all",statusOptions:[{name:this.$t("All"),value:"all"},{name:this.$t("Active"),value:"active"},{name:this.$t("Cancel"),value:"cancel"},{name:this.$t("Stop"),value:"stop"}],page:1,keyword:"",fromDate:"",toDate:"",loadingSubcribers:!0,loadmoreSubcribers:!1,subcribersList:[],loadingSearch:!1}},mounted(){this.handleGetUserSubscriber(this.dateType,this.status,this.page,this.keyword,this.fromDate,this.toDate)},methods:{async handleGetUserSubscriber(e,r,h,y,s,c){try{const d=await F(e,r,h,y,this.formatDateTime(s),this.formatDateTime(c));h==1&&(this.subcribersList=[]),this.subcribersList=window._.concat(this.subcribersList,d.items),d.has_next_page?(this.loadmoreSubcribers=!0,this.page++):this.loadmoreSubcribers=!1}catch(d){this.showError(d.error)}finally{this.loadingSubcribers=!1,this.loadingSearch=!1}},searchSubscribersList(){this.loadingSubcribers=!0,this.loadmoreSubcribers=!1,this.page=1,this.loadingSearch=!0,this.handleGetUserSubscriber(this.dateType,this.status,this.page,this.keyword,this.fromDate,this.toDate)},async resumeSubscription(e){this.$confirm.require({message:this.$t("Do you want to resume this subscription?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await H(e);const r=this.subcribersList.find(h=>h.id===e);r&&(r.canResume=!1,r.canCancel=!0)}catch(r){this.showError(r.error)}}})},async cancelSubscription(e){this.$confirm.require({message:this.$t("Are you sure you want to cancel this subscription?"),header:this.$t("Please confirm"),acceptLabel:this.$t("Ok"),rejectLabel:this.$t("Cancel"),accept:async()=>{try{await Q(e);const r=this.subcribersList.find(h=>h.id===e);r&&(r.canCancel=!1,r.canResume=!0)}catch(r){this.showError(r.error)}}})}}},Ze={class:"flex flex-col gap-base-2 flex-1"},et={class:"flex flex-col sm:flex-row flex-wrap gap-base-2"},tt={key:0,class:"flex flex-col sm:flex-row flex-wrap gap-base-2"},st={class:"relative overflow-x-auto scrollbar-thin border border-b-0 border-table-border-color md:rounded-md dark:border-white/10"},at={class:"w-full text-sm whitespace-nowrap text-center"},rt={class:"text-xs uppercase bg-table-header-color dark:bg-dark-web-wash"},ot={scope:"col",class:"p-3 text-start sticky start-0 bg-inherit"},nt={scope:"col",class:"p-3"},it={scope:"col",class:"p-3"},lt={scope:"col",class:"p-3"},ct={scope:"col",class:"p-3"},dt={key:0},ut={colspan:"5"},ht={class:"p-3 text-start sticky start-0 bg-inherit"},pt={class:"flex gap-2 items-center"},mt={class:"p-3"},bt={class:"p-3"},gt={class:"p-3"},_t={class:"p-3"},ft=["onClick"],yt=["onClick"],kt={key:1,class:"border-b border-table-border-color dark:border-gray-700"},$t={colspan:"5",class:"p-3"},vt={key:0,class:"text-center my-base-2"};function wt(e,r,h,y,s,c){const d=u("BaseInputText"),p=u("BaseSelect"),m=u("BaseCalendar"),S=u("BaseButton"),$=u("Loading"),b=u("Avatar"),v=u("UserName"),D=u("router-link");return o(),n(g,null,[t("form",{class:"flex flex-wrap gap-base-2 mb-base-2",onSubmit:r[5]||(r[5]=Y((...i)=>c.searchSubscribersList&&c.searchSubscribersList(...i),["prevent"]))},[t("div",Ze,[t("div",et,[l(d,{modelValue:s.keyword,"onUpdate:modelValue":r[0]||(r[0]=i=>s.keyword=i),placeholder:e.$t("Keyword"),class:"md:flex-1"},null,8,["modelValue","placeholder"]),l(p,{class:"md:flex-1",modelValue:s.status,"onUpdate:modelValue":r[1]||(r[1]=i=>s.status=i),options:s.statusOptions,optionLabel:"name",optionValue:"value",placeholder:e.$t("Status")},null,8,["modelValue","options","placeholder"]),l(p,{class:"md:flex-1",modelValue:s.dateType,"onUpdate:modelValue":r[2]||(r[2]=i=>s.dateType=i),options:s.dateTypeOptions,optionLabel:"name",optionValue:"value",placeholder:e.$t("Type")},null,8,["modelValue","options","placeholder"])]),s.dateType==="custom"?(o(),n("div",tt,[l(m,{modelValue:s.fromDate,"onUpdate:modelValue":r[3]||(r[3]=i=>s.fromDate=i),placeholder:e.$t("From Date"),class:"md:flex-1",showButtonBar:""},null,8,["modelValue","placeholder"]),l(m,{modelValue:s.toDate,"onUpdate:modelValue":r[4]||(r[4]=i=>s.toDate=i),placeholder:e.$t("End Date"),class:"md:flex-1",showButtonBar:""},null,8,["modelValue","placeholder"])])):_("",!0)]),l(S,{loading:s.loadingSearch,class:"self-start w-full md:w-auto"},{default:k(()=>[f(a(e.$t("Search")),1)]),_:1},8,["loading"])],32),t("div",st,[t("table",at,[t("thead",null,[t("tr",rt,[t("th",ot,a(e.$t("User")),1),t("th",nt,a(e.$t("Status")),1),t("th",it,a(e.$t("Package")),1),t("th",lt,a(e.$t("Date")),1),t("th",ct,a(e.$t("Action")),1)])]),t("tbody",null,[s.loadingSubcribers?(o(),n("tr",dt,[t("td",ut,[l($,{class:"mt-base-2"})])])):(o(),n(g,{key:1},[s.subcribersList.length?(o(!0),n(g,{key:0},P(s.subcribersList,i=>(o(),n("tr",{key:i.id,class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b border-table-border-color dark:border-gray-700"},[t("td",ht,[t("div",pt,[l(b,{user:i.user,size:20,"active-popover":!1},null,8,["user"]),l(v,{user:i.user,"active-popover":!1,class:"!font-normal !max-w-44"},null,8,["user"])])]),t("td",mt,a(i.status_text),1),t("td",bt,a(i.name),1),t("td",gt,a(i.created_at),1),t("td",_t,[l(D,{to:{name:"setting_subscriber_detail",params:{id:i.id}}},{default:k(()=>[f(a(e.$t("View")),1)]),_:2},1032,["to"]),i.canResume?(o(),n(g,{key:0},[r[7]||(r[7]=f(" · ")),t("button",{class:"text-primary-color dark:text-dark-primary-color",onClick:L=>c.resumeSubscription(i.id)},a(e.$t("Resume")),9,ft)],64)):_("",!0),i.canCancel?(o(),n(g,{key:1},[r[8]||(r[8]=f(" · ")),t("button",{class:"text-primary-color dark:text-dark-primary-color",onClick:L=>c.cancelSubscription(i.id)},a(e.$t("Cancel")),9,yt)],64)):_("",!0)])]))),128)):(o(),n("tr",kt,[t("td",$t,a(e.$t("No Subscribers")),1)]))],64))])])]),s.loadmoreSubcribers?(o(),n("div",vt,[l(S,{onClick:r[6]||(r[6]=i=>this.handleGetUserSubscriber(s.dateType,s.status,s.page,s.keyword,s.fromDate,s.toDate))},{default:k(()=>[f(a(e.$t("View more")),1)]),_:1})])):_("",!0)],64)}const Ct=C(Xe,[["render",wt]]),St={props:["tab"],components:{TabsMenu:K},data(){return{currentTab:this.tab||""}},computed:{...w(T,["config"]),creatorDashboardTabs(){return[{name:this.$t("Become a creator"),tab:"",isActive:this.currentTab===""},{name:this.$t("Subscribers"),tab:"subscribers",isActive:this.currentTab==="subscribers"},{name:this.$t("Set Pricing"),tab:"set_pricing",isActive:this.currentTab==="set_pricing"},{name:this.$t("Earning Report"),tab:"earning_report",isActive:this.currentTab==="earning_report"}]},creatorDashboardComponent(){switch(this.currentTab){case"subscribers":return Ct;case"set_pricing":return ye;case"earning_report":return We;default:return ie}}},methods:{changeTab(e){this.$router.push({name:"setting_creator_dashboard",params:{tab:e}})}}};function Tt(e,r,h,y,s,c){const d=u("TabsMenu");return o(),n(g,null,[l(d,{menus:c.creatorDashboardTabs,type:"secondary",onSelect:c.changeTab,class:"mb-4"},null,8,["menus","onSelect"]),(o(),J(W(c.creatorDashboardComponent)))],64)}const Dt=C(St,[["render",Tt]]);export{Dt as default};
