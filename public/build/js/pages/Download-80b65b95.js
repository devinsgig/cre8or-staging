import{_ as w,L as h,B as m,cu as p,W as f,cv as g,r as i,o,c as n,b as d,t as s,g as D,F as _,h as k,d as y,w as b,e as B}from"../../assets/app-8df99815.js";const q={components:{Loading:h,BaseButton:m},data(){return{downloadLink:null,canRequest:null,downloadDate:null,loadingStatus:!0}},mounted(){this.getDownloadStatus()},methods:{async getDownloadStatus(){try{const e=await p();this.downloadLink=e.downloadLink,this.canRequest=e.canRequest,this.downloadDate=e.downloadDate,this.loadingStatus=!1}catch{this.loadingStatus=!1}},async requestDownloadGPDR(){const e=this.$dialog.open(f,{props:{header:this.$t("Enter Password"),class:"password-modal",modal:!0,dismissableMask:!0,draggable:!1},emits:{onConfirm:async t=>{if(t.password)try{await g({password:t.password}),this.showSuccess(this.$t("The file is being processed. We will send you a notification when it is done.")),this.canRequest=!1,e.close()}catch(l){this.showError(l.error.detail.user),e.close()}}}})}}},v={class:"text-main-color text-base-lg font-extrabold mb-3 dark:text-white"},L={key:1},R={key:0},S={class:"mb-3"},$=["href"],C={key:1,class:"mb-3"};function P(e,t,l,x,a,r){const c=i("Loading"),u=i("BaseButton");return o(),n("div",null,[d("h3",v,s(e.$t("Download your Data")),1),a.loadingStatus?(o(),D(c,{key:0})):(o(),n("div",L,[a.canRequest?(o(),n("div",R,[d("p",S,s(e.$t("Your data will be available for download in a few days from the requested date. You will receive an email when it is ready to download.")),1),a.downloadLink!=""?(o(),n(_,{key:0},[d("a",{class:"font-bold mb-3",href:a.downloadLink},s(e.$t("Download your data")),9,$),d("p",null,s(a.downloadDate),1)],64)):k("",!0),y(u,{onClick:t[0]||(t[0]=N=>r.requestDownloadGPDR()),class:"w-full"},{default:b(()=>[B(s(e.$t("Request Download")),1)]),_:1})])):(o(),n("div",C,s(e.$t("Your data is being processed. Please wait until it is completed.")),1))]))])}const E=w(q,[["render",P]]);export{E as default};
